
> authentication@1.0.0 test-windows D:\wamp64\www\workonblockchain.com\server
> set NODE_ENV=default && nyc mocha ./test --recursive --exit --timeout 7000

{"message":"Configuring local multer to /uploads folder","level":"info"}


{"message":"Server listening on port 4000","level":"info"}
  GET /conversations
    getting conversations
{"message":"Connected to mongodb database","level":"info"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"c209e71092@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MWZmODc4MGExMTdlYzAwMzcyZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NTo0My40ODhaIiwiaWF0IjoxNTcyNDIyMTQ2LCJleHAiOjE1NzI0MjU3NDZ9.AyyyFL6nrJjKiADbD0URNeKA2N4ujODLiILS-pHjfqU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"03cb5406e3@example.com","name":"4e029"}}],"templateData":{"firstName":"4e029","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjAzODc4MGExMTdlYzAwMzczMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNDcsImV4cCI6MTU3MjQyNTc0N30.-1nXJiNjDAF3cOxh3bF-n9Uuv8MTBml6uV7Fl_vZT0c"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Maldivan' ],
  candidate: 
   { base_country: 'Dominican Republic',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 71539,
     current_currency: '$ USD',
     why_work: '8e2ff17dbc',
     description: '20326cfaa9',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 33250,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'Smart contract development', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '45206e4063',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"conversations":[{"count":1,"unread_count":0,"_id":"5db942048780a117ec00373f","user_id":"5db942038780a117ec003732","last_message":"2019-10-30T07:55:47.334Z"}],"userID":"5db941ff8780a117ec00372f","level":"debug","message":"converstaions"}
{"length":1,"level":"debug","message":"length"}
      √ it should get conversations (6366ms)
dropping database

  GET /conversations/:sender_id/messages/
    getting messages of a company or candidate
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"422198c547@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjA1ODc4MGExMTdlYzAwMzc0MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NTo0OS45MjlaIiwiaWF0IjoxNTcyNDIyMTUyLCJleHAiOjE1NzI0MjU3NTJ9.lxJLH-QsfogwoXMb92Oej1P-LoZpWubd_EnFELC_HDw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"50b24a881d@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjA4ODc4MGExMTdlYzAwMzc0NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTIsImV4cCI6MTU3MjQyNTc1Mn0.2-MZwRZPWUOjkppV4caHdTvoouUaXdo_qhsWEQu0uw8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get messages of a company or candidate (3172ms)
dropping database

  PATCH /conversations/:sender_id/messages/
    updating conversations
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"736fce107a@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBhODc4MGExMTdlYzAwMzc0ZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NTo1NC4yNTNaIiwiaWF0IjoxNTcyNDIyMTU3LCJleHAiOjE1NzI0MjU3NTd9.Jh8fSguaM8y_zlz1Dk2l84U8arBgHVXkRKNe2OuNne0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e9756d10bb@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBkODc4MGExMTdlYzAwMzc1MCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTcsImV4cCI6MTU3MjQyNTc1N30.tmANuH0kYx7QKcbPCdYnq7Mwrel8nMKD4Tt8IjV8PaE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update unread count (4005ms)
dropping database

  Get /email_templates
    get email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"decedb440c@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTgsImV4cCI6MTU3MjQyNTc1OH0.Zs4romN02PfX4y73aAK9tG_AJL8x0YZnDId-HTfugV4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
Response {
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  res: 
   IncomingMessage {
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [BufferList],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: true,
        endEmitted: true,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        destroyed: false,
        defaultEncoding: 'utf8',
        awaitDrain: 0,
        readingMore: false,
        decoder: [StringDecoder],
        encoding: 'utf8' },
     readable: false,
     domain: null,
     _events: 
      { end: [Array],
        data: [Array],
        error: [Array],
        close: [Function: bound emit] },
     _eventsCount: 4,
     _maxListeners: undefined,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2245,
        [Symbol(bytesRead)]: 700 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2245,
        [Symbol(bytesRead)]: 700 },
     httpVersionMajor: 1,
     httpVersionMinor: 1,
     httpVersion: '1.1',
     complete: true,
     headers: 
      { 'access-control-allow-origin': '*',
        'x-dns-prefetch-control': 'off',
        'x-frame-options': 'SAMEORIGIN',
        'strict-transport-security': 'max-age=15552000; includeSubDomains',
        'x-download-options': 'noopen',
        'x-content-type-options': 'nosniff',
        'x-xss-protection': '1; mode=block',
        'content-type': 'application/json; charset=utf-8',
        'content-length': '266',
        etag: 'W/"10a-PmHOvVlyqo0amrdHQ2XYDPOTcGM"',
        date: 'Wed, 30 Oct 2019 07:55:59 GMT',
        connection: 'close' },
     rawHeaders: 
      [ 'Access-Control-Allow-Origin',
        '*',
        'X-DNS-Prefetch-Control',
        'off',
        'X-Frame-Options',
        'SAMEORIGIN',
        'Strict-Transport-Security',
        'max-age=15552000; includeSubDomains',
        'X-Download-Options',
        'noopen',
        'X-Content-Type-Options',
        'nosniff',
        'X-XSS-Protection',
        '1; mode=block',
        'Content-Type',
        'application/json; charset=utf-8',
        'Content-Length',
        '266',
        'ETag',
        'W/"10a-PmHOvVlyqo0amrdHQ2XYDPOTcGM"',
        'Date',
        'Wed, 30 Oct 2019 07:55:59 GMT',
        'Connection',
        'close' ],
     trailers: {},
     rawTrailers: [],
     upgrade: false,
     url: '',
     method: null,
     statusCode: 200,
     statusMessage: 'OK',
     client: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2245,
        [Symbol(bytesRead)]: 700 },
     _consuming: true,
     _dumped: false,
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: false,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 0,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:54614\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTh9.izuzehC_M-xzZM5vosNhwdMnz2xIXtBJ2KlUMtiPdR8\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'GET',
        path: '/v2/email_templates/search?admin=true',
        _ended: true,
        res: [Circular],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     text: '[{"_id":"5db9420e8780a117ec00375b","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db9420e8780a117ec003758","updated_date":"2019-10-30T07:55:58.945Z","__v":0}]',
     read: [Function] },
  request: 
   Test {
     domain: null,
     _events: { end: [Function] },
     _eventsCount: 1,
     _maxListeners: undefined,
     _agent: false,
     _formData: null,
     method: 'get',
     url: 'http://127.0.0.1:54614/v2/email_templates/search?admin=true',
     _header: 
      { 'user-agent': 'node-superagent/3.8.3',
        authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTh9.izuzehC_M-xzZM5vosNhwdMnz2xIXtBJ2KlUMtiPdR8' },
     header: 
      { 'User-Agent': 'node-superagent/3.8.3',
        Authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTh9.izuzehC_M-xzZM5vosNhwdMnz2xIXtBJ2KlUMtiPdR8' },
     writable: true,
     _redirects: 0,
     _maxRedirects: 5,
     cookies: '',
     qs: {},
     _query: [],
     qsRaw: [],
     _redirectList: [],
     _streamRequest: false,
     app: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        _connections: 0,
        _handle: null,
        _usingWorkers: false,
        _workers: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        keepAliveTimeout: 5000,
        _pendingResponseData: 0,
        maxHeadersCount: null,
        _connectionKey: '6::::0',
        [Symbol(asyncId)]: 2243 },
     _okCallback: [Function],
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: false,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 0,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:54614\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTh9.izuzehC_M-xzZM5vosNhwdMnz2xIXtBJ2KlUMtiPdR8\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'GET',
        path: '/v2/email_templates/search?admin=true',
        _ended: true,
        res: [IncomingMessage],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     protocol: 'http:',
     host: '127.0.0.1:54614',
     _endCalled: true,
     _callback: [Function],
     _fullfilledPromise: Promise { [Circular] },
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [ClientRequest],
        text: '[{"_id":"5db9420e8780a117ec00375b","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db9420e8780a117ec003758","updated_date":"2019-10-30T07:55:58.945Z","__v":0}]',
        read: [Function] },
     response: [Circular],
     called: true },
  req: 
   ClientRequest {
     domain: null,
     _events: 
      { drain: [Function],
        error: [Function],
        prefinish: [Function: requestOnPrefinish] },
     _eventsCount: 3,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: true,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: false,
     sendDate: false,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: 0,
     _hasBody: true,
     _trailer: '',
     finished: true,
     _headerSent: true,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2245,
        [Symbol(bytesRead)]: 700 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2245,
        [Symbol(bytesRead)]: 700 },
     _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:54614\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBlODc4MGExMTdlYzAwMzc1OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNTh9.izuzehC_M-xzZM5vosNhwdMnz2xIXtBJ2KlUMtiPdR8\r\nConnection: close\r\n\r\n',
     _onPendingData: [Function: noopPendingOutput],
     agent: 
      Agent {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        defaultPort: 80,
        protocol: 'http:',
        options: [Object],
        requests: {},
        sockets: [Object],
        freeSockets: {},
        keepAliveMsecs: 1000,
        keepAlive: false,
        maxSockets: Infinity,
        maxFreeSockets: 256 },
     socketPath: undefined,
     timeout: undefined,
     method: 'GET',
     path: '/v2/email_templates/search?admin=true',
     _ended: true,
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [Circular],
        text: '[{"_id":"5db9420e8780a117ec00375b","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db9420e8780a117ec003758","updated_date":"2019-10-30T07:55:58.945Z","__v":0}]',
        read: [Function] },
     aborted: undefined,
     timeoutCb: null,
     upgradeOrConnect: false,
     parser: null,
     maxHeadersCount: null,
     [Symbol(outHeadersKey)]: 
      { host: [Array],
        'accept-encoding': [Array],
        'user-agent': [Array],
        authorization: [Array] } },
  text: '[{"_id":"5db9420e8780a117ec00375b","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db9420e8780a117ec003758","updated_date":"2019-10-30T07:55:58.945Z","__v":0}]',
  body: 
   [ { _id: '5db9420e8780a117ec00375b',
       name: 'Template 1',
       subject: 'Template subject',
       body: '<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>',
       updated_by: '5db9420e8780a117ec003758',
       updated_date: '2019-10-30T07:55:58.945Z',
       __v: 0 } ],
  files: undefined,
  buffered: true,
  headers: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '266',
     etag: 'W/"10a-PmHOvVlyqo0amrdHQ2XYDPOTcGM"',
     date: 'Wed, 30 Oct 2019 07:55:59 GMT',
     connection: 'close' },
  header: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '266',
     etag: 'W/"10a-PmHOvVlyqo0amrdHQ2XYDPOTcGM"',
     date: 'Wed, 30 Oct 2019 07:55:59 GMT',
     connection: 'close' },
  statusCode: 200,
  status: 200,
  statusType: 2,
  info: false,
  ok: true,
  redirect: false,
  clientError: false,
  serverError: false,
  error: false,
  created: false,
  accepted: false,
  noContent: false,
  badRequest: false,
  unauthorized: false,
  notAcceptable: false,
  forbidden: false,
  notFound: false,
  unprocessableEntity: false,
  type: 'application/json',
  charset: 'utf-8',
  links: {},
  setEncoding: [Function: bound ],
  redirects: [] }
      √ it should return email template doc (900ms)
dropping database

  Patch /email_templates
    update email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"33272c7ab7@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjBmODc4MGExMTdlYzAwMzc1ZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNjAsImV4cCI6MTU3MjQyNTc2MH0.4f1rywsZm2BN3JH2hnxhLtENv8hvnBcreXdogT7WDF8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update email template doc (512ms)
dropping database

  Post /email_templates
    add new email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"15171a85bf@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjEwODc4MGExMTdlYzAwMzc2NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNjEsImV4cCI6MTU3MjQyNTc2MX0.lcjgCmEtcEFWp6RpFCvMfYLPhnp-sU-exuWEZf3YmJA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should add new email template doc (855ms)
dropping database

  healthCheck
    GET /v2/healthCheck
      √ it should get a successful page
dropping database
{"stack":"ApplicationError: I am an application error\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\health\\get.controller.js:1:3351)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:2720\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3232\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/health?error=true","method":"GET","code":400,"requestID":"b78b9420-faea-11e9-915a-07bba0f11457","request":{"params":{"error":"true"},"body":{}},"level":"warn","message":"I am an application error"}
      √ it should throw an Application error
dropping database
{"stack":"Error: I am a normal error\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\health\\get.controller.js:1:3257)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:2720\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3232\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/health?error=true&raw=true","method":"GET","requestID":"b78ca590-faea-11e9-915a-07bba0f11457","request":{"params":{"error":"true","raw":"true"},"body":{}},"level":"error","message":"I am a normal error"}
      √ it should throw a normal error
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e21a5cc8f5@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjEyODc4MGExMTdlYzAwMzc2YyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowMi4wNDRaIiwiaWF0IjoxNTcyNDIyMTYyLCJleHAiOjE1NzI0MjU3NjJ9.32y2CHWRUo8BboslywPfOdElTKleuwhPxyTY4ArtXaA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"306f6ddfc7@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjEzODc4MGExMTdlYzAwMzc3MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowMy43MjZaIiwiaWF0IjoxNTcyNDIyMTYzLCJleHAiOjE1NzI0MjU3NjN9.uZFE_R73EKRjLyicHpGF9FXqFtFkS1XJTniamus4_V0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as company (303ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"dba3cf2a6d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE0ODc4MGExMTdlYzAwMzc4MCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNC40OTlaIiwiaWF0IjoxNTcyNDIyMTY1LCJleHAiOjE1NzI0MjU3NjV9.z-L7nsGB7N9F7gkRVeAhLtKn82gVHr9egn_U3qxBqns"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ee7bbbb408@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE1ODc4MGExMTdlYzAwMzc4NiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNS42ODdaIiwiaWF0IjoxNTcyNDIyMTY1LCJleHAiOjE1NzI0MjU3NjV9.AsLF723gK6Sud7Pf-9NGDhjL5Z6RSOAsHnLrIbzoPAc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"65bf21a56c@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE1ODc4MGExMTdlYzAwMzc5MyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNS45NDVaIiwiaWF0IjoxNTcyNDIyMTY1LCJleHAiOjE1NzI0MjU3NjV9.qwXyLvpfL4crroXsQa_Rp2SNb9i4jrOJXuipjBOPfWQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as an admin (289ms)
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f017cdba0b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE2ODc4MGExMTdlYzAwMzc5NyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNi40NDRaIiwiaWF0IjoxNTcyNDIyMTY2LCJleHAiOjE1NzI0MjU3NjZ9.JLhT1XT1d6s6Gak2xthpBcZsLxrYUQV1C6B9RdMMHAc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"d475b11f30@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE3ODc4MGExMTdlYzAwMzc5ZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNy4zNzZaIiwiaWF0IjoxNTcyNDIyMTY3LCJleHAiOjE1NzI0MjU3Njd9.8A0qhvvsYgj06fDd1tycpCtlFiRI_fbg3wX4ef5o9-c"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"541551c3f2@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE3ODc4MGExMTdlYzAwMzdhMyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowNy40MDlaIiwiaWF0IjoxNTcyNDIyMTY3LCJleHAiOjE1NzI0MjU3Njd9.Osy3HCvBDAK2oqOu9wzXtwKOWE1V313AWKcxTu_1RP4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as company (297ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0be4a73394@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE4ODc4MGExMTdlYzAwMzdiYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowOC4yNzFaIiwiaWF0IjoxNTcyNDIyMTY4LCJleHAiOjE1NzI0MjU3Njh9.8ODtxanV1JivGsdYJwxoq0fWUrTRgtxV50OIztyxfe4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9087669aa5@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE5ODc4MGExMTdlYzAwMzdjMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowOS4zMjNaIiwiaWF0IjoxNTcyNDIyMTY5LCJleHAiOjE1NzI0MjU3Njl9.5esiGAq9WIaH518kSihyoqQENLq4aD0Io9oARwR3SUg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"36dfe41b38@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE5ODc4MGExMTdlYzAwMzdjOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowOS4zNjFaIiwiaWF0IjoxNTcyNDIyMTY5LCJleHAiOjE1NzI0MjU3Njl9.TSp0tNIUOV-lSMwpgxQaHDstS5zMq3Oj9dAbkalxj5I"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4ee79795db@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjE5ODc4MGExMTdlYzAwMzdkNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjowOS42ODlaIiwiaWF0IjoxNTcyNDIyMTY5LCJleHAiOjE1NzI0MjU3Njl9.EF-PGOJ1qixd4xa1QSK14kUdeerwBfKZ6c1H59nFdCs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as an admin (368ms)
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9e723c6563@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFhODc4MGExMTdlYzAwMzdlMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxMC4yNTJaIiwiaWF0IjoxNTcyNDIyMTcwLCJleHAiOjE1NzI0MjU3NzB9.BPnJ2k_qXD5aoIAO2v4ttqe3wpfqJum5lNnZO3VQPTo"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"53d072cea8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFiODc4MGExMTdlYzAwMzdlOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxMS4zNzlaIiwiaWF0IjoxNTcyNDIyMTcxLCJleHAiOjE1NzI0MjU3NzF9.FD-jjeWbSNBPM2YtHbcjw515-4IAtEYMaT3CYhs0eFk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create a job for a company (382ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5fef747adc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFjODc4MGExMTdlYzAwMzdmNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxMi4yODFaIiwiaWF0IjoxNTcyNDIyMTcyLCJleHAiOjE1NzI0MjU3NzJ9.zWosm_og-oHziig--nPrC7tnBwBjJ6JDbKW-3zWX8Ls"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4f9500573c@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFkODc4MGExMTdlYzAwMzdmYiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxMy4zMjVaIiwiaWF0IjoxNTcyNDIyMTczLCJleHAiOjE1NzI0MjU3NzN9.IfrAbJH_LCKiGc_TS5P9yfdnLyd_9nB9bIPeTQY4_D4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0772ccc06b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFkODc4MGExMTdlYzAwMzdmZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxMy4zNjlaIiwiaWF0IjoxNTcyNDIyMTczLCJleHAiOjE1NzI0MjU3NzN9.hpNQqz0Sdicjlz81w3caN2kNsqCYaiTR2PMmpB0h0W4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create a job for an admin (271ms)
dropping database

  Auto suggest cities options
    getting locations
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8fe8522ac9@example.com","name":"614c7"}}],"templateData":{"firstName":"614c7","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFlODc4MGExMTdlYzAwMzgwYyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNzQsImV4cCI6MTU3MjQyNTc3NH0.VexUiuJ8h1W28zvEahIJWvJDKo7iRuGadlCSc2TBaVs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ locations: [ { remote: true } ] }
      √ it should get match options (253ms)
dropping database

  GET /messages
    getting messages
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"321753d8fc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFlODc4MGExMTdlYzAwMzgwZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNC40NTlaIiwiaWF0IjoxNTcyNDIyMTc1LCJleHAiOjE1NzI0MjU3NzV9.jPOxMBcrH3vVSXF--shGeKZn-rvcWuT9wDzZCB1eTkM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"fbd8fcb622@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFmODc4MGExMTdlYzAwMzgxMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNzUsImV4cCI6MTU3MjQyNTc3NX0.KgUPsgBvoSMPlaAJOwEuVoXFpZ3LsSa08dcOy8sNaWs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get messages (1146ms)
dropping database

  POST /messages
    authorization and control
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b21d7ac001@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjFmODc4MGExMTdlYzAwMzgxOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNS45NTFaIiwiaWF0IjoxNTcyNDIyMTc2LCJleHAiOjE1NzI0MjU3NzZ9.jaQcwPYa_kDIQoS5ENWSfjdA6bCRl8AY6-0b8GkQh1g"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"de37fc371b@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgxYyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNzYsImV4cCI6MTU3MjQyNTc3Nn0.T_5qH4kDDvhTBYvFSwDkf7SzRyUr7iEyrLn-XNqaThE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Afghan' ],
  candidate: 
   { base_country: 'Syria',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 66009,
     current_currency: '£ GBP',
     why_work: '56d4448f28',
     description: '15551eb73a',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 73590,
        currency: '$ USD',
        employment_availability: '3 weeks' },
     interest_areas: 
      [ 'Enterprise blockchain',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f971e8b88b',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"Error: ValidationError: receiver_id: Path `receiver_id` is required.\n    at validateObject (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:3:204)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:413\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3062\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at middleware (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\sanitizer.js:1:2911)\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","requestID":"c03e9950-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"not_a_field":"my id","msg_tag":"approach"}},"level":"error","message":"ValidationError: receiver_id: Path `receiver_id` is required."}
      √ it should should fail with wrong body schema (685ms)
dropping database
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","requestID":"c0661e80-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"receiver_id":"my id","msg_tag":"approach"}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
      √ it should should fail with invalid jwtToken
dropping database
    { msg_tag:"approach" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ae7f085f31@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3LCJleHAiOjE1NzI0MjU3Nzd9.JcfBTNH23CRNg5RWRRFSq0K7w4JnwAu6jj6zCGud-Q0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"31e02cd3bf@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIxODc4MGExMTdlYzAwMzgyYyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNzcsImV4cCI6MTU3MjQyNTc3N30.c905OPdInk4230VEJ6uYWv2cFC34u71v3iWqWVKtKtk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Australian' ],
  candidate: 
   { base_country: 'Lesotho',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 21682,
     current_currency: '€ EUR',
     why_work: '76b007f3a0',
     description: 'f0949cdb1e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 32723,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'Enterprise blockchain', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3840237069',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
Response {
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  res: 
   IncomingMessage {
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [BufferList],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: true,
        endEmitted: true,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        destroyed: false,
        defaultEncoding: 'utf8',
        awaitDrain: 0,
        readingMore: false,
        decoder: [StringDecoder],
        encoding: 'utf8' },
     readable: false,
     domain: null,
     _events: 
      { end: [Array],
        data: [Array],
        error: [Array],
        close: [Function: bound emit] },
     _eventsCount: 4,
     _maxListeners: undefined,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 788,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10110,
        [Symbol(bytesRead)]: 941 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 788,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10110,
        [Symbol(bytesRead)]: 941 },
     httpVersionMajor: 1,
     httpVersionMinor: 1,
     httpVersion: '1.1',
     complete: true,
     headers: 
      { 'access-control-allow-origin': '*',
        'x-dns-prefetch-control': 'off',
        'x-frame-options': 'SAMEORIGIN',
        'strict-transport-security': 'max-age=15552000; includeSubDomains',
        'x-download-options': 'noopen',
        'x-content-type-options': 'nosniff',
        'x-xss-protection': '1; mode=block',
        'content-type': 'application/json; charset=utf-8',
        'content-length': '507',
        etag: 'W/"1fb-AvC6qFLQPHZ+WJvd2GjG1DIj7Bc"',
        date: 'Wed, 30 Oct 2019 07:56:17 GMT',
        connection: 'close' },
     rawHeaders: 
      [ 'Access-Control-Allow-Origin',
        '*',
        'X-DNS-Prefetch-Control',
        'off',
        'X-Frame-Options',
        'SAMEORIGIN',
        'Strict-Transport-Security',
        'max-age=15552000; includeSubDomains',
        'X-Download-Options',
        'noopen',
        'X-Content-Type-Options',
        'nosniff',
        'X-XSS-Protection',
        '1; mode=block',
        'Content-Type',
        'application/json; charset=utf-8',
        'Content-Length',
        '507',
        'ETag',
        'W/"1fb-AvC6qFLQPHZ+WJvd2GjG1DIj7Bc"',
        'Date',
        'Wed, 30 Oct 2019 07:56:17 GMT',
        'Connection',
        'close' ],
     trailers: {},
     rawTrailers: [],
     upgrade: false,
     url: '',
     method: null,
     statusCode: 200,
     statusMessage: 'OK',
     client: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 788,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10110,
        [Symbol(bytesRead)]: 941 },
     _consuming: true,
     _dumped: false,
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: true,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 352,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:54721\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3fQ.N41LBcha4kHvir4NbJrDRByBKivxZ03GaOU3TP4_m8g\r\nContent-Type: application/json\r\nContent-Length: 352\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'POST',
        path: '/v2/messages',
        _ended: true,
        res: [Circular],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     text: '{"_id":"5db942218780a117ec003837","sender_id":"5db942208780a117ec003829","receiver_id":"5db942218780a117ec00382c","msg_tag":"approach","date_created":"2019-10-30T07:56:17.579Z","message":{"approach":{"_id":"5db942218780a117ec003838","employee":{"job_title":"1a536fcb3f","annual_salary":1609,"currency":"£ GBP","employment_type":"Part time","location":"PWD Islamabad","employment_description":"74fcf42d5e834e5c100897feb651b031e14b24373b9b255189fb462eb58f11391f45efdb904b9388c273fc229ccb5838b616"}}},"__v":0}',
     read: [Function] },
  request: 
   Test {
     domain: null,
     _events: { end: [Function] },
     _eventsCount: 1,
     _maxListeners: undefined,
     _agent: false,
     _formData: null,
     method: 'post',
     url: 'http://127.0.0.1:54721/v2/messages',
     _header: 
      { 'user-agent': 'node-superagent/3.8.3',
        authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3fQ.N41LBcha4kHvir4NbJrDRByBKivxZ03GaOU3TP4_m8g',
        'content-type': 'application/json' },
     header: 
      { 'User-Agent': 'node-superagent/3.8.3',
        Authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3fQ.N41LBcha4kHvir4NbJrDRByBKivxZ03GaOU3TP4_m8g',
        'Content-Type': 'application/json' },
     writable: true,
     _redirects: 0,
     _maxRedirects: 5,
     cookies: '',
     qs: {},
     _query: [],
     qsRaw: [],
     _redirectList: [],
     _streamRequest: false,
     app: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        _connections: 0,
        _handle: null,
        _usingWorkers: false,
        _workers: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        keepAliveTimeout: 5000,
        _pendingResponseData: 0,
        maxHeadersCount: null,
        _connectionKey: '6::::0',
        [Symbol(asyncId)]: 10108 },
     _okCallback: [Function],
     _data: 
      { receiver_id: 5db942218780a117ec00382c,
        msg_tag: 'approach',
        message: [Object] },
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: true,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 352,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:54721\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3fQ.N41LBcha4kHvir4NbJrDRByBKivxZ03GaOU3TP4_m8g\r\nContent-Type: application/json\r\nContent-Length: 352\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'POST',
        path: '/v2/messages',
        _ended: true,
        res: [IncomingMessage],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     protocol: 'http:',
     host: '127.0.0.1:54721',
     _endCalled: true,
     _callback: [Function],
     _fullfilledPromise: Promise { [Circular] },
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [ClientRequest],
        text: '{"_id":"5db942218780a117ec003837","sender_id":"5db942208780a117ec003829","receiver_id":"5db942218780a117ec00382c","msg_tag":"approach","date_created":"2019-10-30T07:56:17.579Z","message":{"approach":{"_id":"5db942218780a117ec003838","employee":{"job_title":"1a536fcb3f","annual_salary":1609,"currency":"£ GBP","employment_type":"Part time","location":"PWD Islamabad","employment_description":"74fcf42d5e834e5c100897feb651b031e14b24373b9b255189fb462eb58f11391f45efdb904b9388c273fc229ccb5838b616"}}},"__v":0}',
        read: [Function] },
     response: [Circular],
     called: true },
  req: 
   ClientRequest {
     domain: null,
     _events: 
      { drain: [Function],
        error: [Function],
        prefinish: [Function: requestOnPrefinish] },
     _eventsCount: 3,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: true,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: true,
     sendDate: false,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: 352,
     _hasBody: true,
     _trailer: '',
     finished: true,
     _headerSent: true,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 788,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10110,
        [Symbol(bytesRead)]: 941 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 788,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10110,
        [Symbol(bytesRead)]: 941 },
     _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:54721\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIwODc4MGExMTdlYzAwMzgyOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxNi44ODBaIiwiaWF0IjoxNTcyNDIyMTc3fQ.N41LBcha4kHvir4NbJrDRByBKivxZ03GaOU3TP4_m8g\r\nContent-Type: application/json\r\nContent-Length: 352\r\nConnection: close\r\n\r\n',
     _onPendingData: [Function: noopPendingOutput],
     agent: 
      Agent {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        defaultPort: 80,
        protocol: 'http:',
        options: [Object],
        requests: {},
        sockets: [Object],
        freeSockets: {},
        keepAliveMsecs: 1000,
        keepAlive: false,
        maxSockets: Infinity,
        maxFreeSockets: 256 },
     socketPath: undefined,
     timeout: undefined,
     method: 'POST',
     path: '/v2/messages',
     _ended: true,
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [Circular],
        text: '{"_id":"5db942218780a117ec003837","sender_id":"5db942208780a117ec003829","receiver_id":"5db942218780a117ec00382c","msg_tag":"approach","date_created":"2019-10-30T07:56:17.579Z","message":{"approach":{"_id":"5db942218780a117ec003838","employee":{"job_title":"1a536fcb3f","annual_salary":1609,"currency":"£ GBP","employment_type":"Part time","location":"PWD Islamabad","employment_description":"74fcf42d5e834e5c100897feb651b031e14b24373b9b255189fb462eb58f11391f45efdb904b9388c273fc229ccb5838b616"}}},"__v":0}',
        read: [Function] },
     aborted: undefined,
     timeoutCb: null,
     upgradeOrConnect: false,
     parser: null,
     maxHeadersCount: null,
     [Symbol(outHeadersKey)]: 
      { host: [Array],
        'accept-encoding': [Array],
        'user-agent': [Array],
        authorization: [Array],
        'content-type': [Array],
        'content-length': [Array] } },
  text: '{"_id":"5db942218780a117ec003837","sender_id":"5db942208780a117ec003829","receiver_id":"5db942218780a117ec00382c","msg_tag":"approach","date_created":"2019-10-30T07:56:17.579Z","message":{"approach":{"_id":"5db942218780a117ec003838","employee":{"job_title":"1a536fcb3f","annual_salary":1609,"currency":"£ GBP","employment_type":"Part time","location":"PWD Islamabad","employment_description":"74fcf42d5e834e5c100897feb651b031e14b24373b9b255189fb462eb58f11391f45efdb904b9388c273fc229ccb5838b616"}}},"__v":0}',
  body: 
   { _id: '5db942218780a117ec003837',
     sender_id: '5db942208780a117ec003829',
     receiver_id: '5db942218780a117ec00382c',
     msg_tag: 'approach',
     date_created: '2019-10-30T07:56:17.579Z',
     message: { approach: [Object] },
     __v: 0 },
  files: undefined,
  buffered: true,
  headers: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '507',
     etag: 'W/"1fb-AvC6qFLQPHZ+WJvd2GjG1DIj7Bc"',
     date: 'Wed, 30 Oct 2019 07:56:17 GMT',
     connection: 'close' },
  header: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '507',
     etag: 'W/"1fb-AvC6qFLQPHZ+WJvd2GjG1DIj7Bc"',
     date: 'Wed, 30 Oct 2019 07:56:17 GMT',
     connection: 'close' },
  statusCode: 200,
  status: 200,
  statusType: 2,
  info: false,
  ok: true,
  redirect: false,
  clientError: false,
  serverError: false,
  error: false,
  created: false,
  accepted: false,
  noContent: false,
  badRequest: false,
  unauthorized: false,
  notAcceptable: false,
  forbidden: false,
  notFound: false,
  unprocessableEntity: false,
  type: 'application/json',
  charset: 'utf-8',
  links: {},
  setEncoding: [Function: bound ],
  redirects: [] }
      √ it should send job approach (1012ms)
dropping database
    { msg_tag:"approach_offer_accepted" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a8559e7b93@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIyODc4MGExMTdlYzAwMzgzYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxOC4yMTFaIiwiaWF0IjoxNTcyNDIyMTc4LCJleHAiOjE1NzI0MjU3Nzh9._P4csXj1itH3OIrUy9WyHaRWHg0Ojdd7gblXwAgOZZ8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"c5eb049dea@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIyODc4MGExMTdlYzAwMzgzZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxNzgsImV4cCI6MTU3MjQyNTc3OH0.3n8vYHAPzfU4d3GvktNCgk1fsDPSnW40IU5Z5j_Gpbk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Armenian' ],
  candidate: 
   { base_country: 'Kiribati',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 30939,
     current_currency: '€ EUR',
     why_work: '9c627bf0df',
     description: 'b61abb1154',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 71745,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: [ 'Smart contract development', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '5564793f61',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should accept approach offer (833ms)
dropping database
    { msg_tag:"approach_rejected" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6070af4fd0@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjIzODc4MGExMTdlYzAwMzg0ZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoxOS4zNzJaIiwiaWF0IjoxNTcyNDIyMTgwLCJleHAiOjE1NzI0MjU3ODB9.XfzBMe76-zhny0OIrnqVEUZO6w1aX_zZydEsmMXWOHY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"94decf9c52@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI0ODc4MGExMTdlYzAwMzg1MiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODAsImV4cCI6MTU3MjQyNTc4MH0.VO2RVTw8VwMAlNEZhE9e8xeJRWegOqVCvUp834SXfTc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Surinamer' ],
  candidate: 
   { base_country: 'Sierra Leone',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 46988,
     current_currency: '€ EUR',
     why_work: '58c46e736d',
     description: '17c83b47be',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 55903,
        currency: '$ USD',
        employment_availability: 'Now' },
     interest_areas: [ 'Enterprise blockchain', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'b2c5ff41b2',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should reject approach offer (1280ms)
dropping database
    { msg_tag:"normal" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9b96c4543c@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI1ODc4MGExMTdlYzAwMzg2MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyMS4wMzRaIiwiaWF0IjoxNTcyNDIyMTgxLCJleHAiOjE1NzI0MjU3ODF9.bNPLoiKedn_W4edFnWI5asg0HlWSQLw0tWiWBp2sm3s"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"237ca4826c@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI1ODc4MGExMTdlYzAwMzg2NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODEsImV4cCI6MTU3MjQyNTc4MX0.z3ybwwP3zYkjv7ZTjRqQAilRHaJOraBI6eqqjdxwpu4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Italian' ],
  candidate: 
   { base_country: 'Portugal',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 74434,
     current_currency: '$ USD',
     why_work: '9824108ee6',
     description: 'f9ca23c5f2',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 73580,
        currency: '$ USD',
        employment_availability: '3 weeks' },
     interest_areas: [ 'Enterprise blockchain', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'eec7df7330',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send a message (1679ms)
dropping database
    { msg_tag:"interview_offer" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"57f126d80f@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI3ODc4MGExMTdlYzAwMzg3YiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyMy4yMjRaIiwiaWF0IjoxNTcyNDIyMTgzLCJleHAiOjE1NzI0MjU3ODN9.5Mw3yJDvTpneKh64bbBUHbn3zbmtU4U-fl_yGqwl1m8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"cd7d3fd900@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI3ODc4MGExMTdlYzAwMzg3ZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODMsImV4cCI6MTU3MjQyNTc4M30.23aIY7JXqQzm2TFLitQRa3L7Ga0GzP9F4nrkCMn8aKM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Estonian' ],
  candidate: 
   { base_country: 'Cambodia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 12541,
     current_currency: '€ EUR',
     why_work: 'db10670d04',
     description: '518e638559',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 15695,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: [ 'Public blockchain', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '64c377ca04',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"ApplicationError: Message can only be sent by a candidate\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at checkMessageSenderType (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:22648)\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:26695)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:2720\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","code":400,"requestID":"c4867c30-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"receiver_id":"5db942278780a117ec00387e","msg_tag":"approach_accepted","message":{"approach_accepted":{"message":"I am interested, lets chat!"}}}},"level":"warn","message":"Message can only be sent by a candidate"}
      √ it should send interview offer (834ms)
dropping database
    { msg_tag:"employment_offer" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5ad249240f@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI4ODc4MGExMTdlYzAwMzg5MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyNC4zNDBaIiwiaWF0IjoxNTcyNDIyMTg0LCJleHAiOjE1NzI0MjU3ODR9.efmSvNBSUSwyUNNfN5vh5wx_4lO_hAbgw_RwkHxTLZ4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1fd5d8a4ce@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI4ODc4MGExMTdlYzAwMzg5NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODQsImV4cCI6MTU3MjQyNTc4NH0.4yDKGMpcOeLPE52dC5VVTVHd1yjVPiLNEdR-sGT_ozA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Mauritanian' ],
  candidate: 
   { base_country: 'Haiti',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 21533,
     current_currency: '€ EUR',
     why_work: '764585516c',
     description: 'de3d923f15',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 14688,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'I don\'t know', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f3f8ce5cb5',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send employment offer (1158ms)
dropping database
    { msg_tag:"employment_offer_accepted" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"7c05ca3aef@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjI5ODc4MGExMTdlYzAwMzhhYiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyNS43OTdaIiwiaWF0IjoxNTcyNDIyMTg2LCJleHAiOjE1NzI0MjU3ODZ9.bAcG6SAdvBgzZMZ7PxoLFQP4-JvAFLnJGq0066FdYkk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2dfe692559@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJhODc4MGExMTdlYzAwMzhhZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODYsImV4cCI6MTU3MjQyNTc4Nn0.aTEDru32ckh33KCAS4plMCdgZaSTmhMZdK6XDJeg01w"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Maldivan' ],
  candidate: 
   { base_country: 'Slovakia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 74161,
     current_currency: '€ EUR',
     why_work: '5d5f0ce25b',
     description: 'baab9078ee',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 76555,
        currency: '€ EUR',
        employment_availability: '1 month' },
     interest_areas: [ 'Smart contract development', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e2ba3a7250',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should accept employment offer (1180ms)
dropping database
    { msg_tag:"employment_offer_rejected" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6a7e428a0d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJiODc4MGExMTdlYzAwMzhjNyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyNy40MzJaIiwiaWF0IjoxNTcyNDIyMTg4LCJleHAiOjE1NzI0MjU3ODh9.UCtjq4jop5i5JcUBdOcHj5LQXMLJZvJqk713GO_QZSE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"c585d8e1e7@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJjODc4MGExMTdlYzAwMzhjYSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODgsImV4cCI6MTU3MjQyNTc4OH0.zi3dfgwnC-nVIFrokoVF-_TTS3iweKOLhSpwlZ-Wh0Y"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Finnish' ],
  candidate: 
   { base_country: 'Slovakia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 50378,
     current_currency: '£ GBP',
     why_work: '1265013cc9',
     description: '9489b6a6e5',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 36479,
        currency: '£ GBP',
        employment_availability: '2 months' },
     interest_areas: 
      [ 'Enterprise blockchain',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '15cf8afb29',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should reject employment offer (1381ms)
dropping database
    { msg_tag:"file" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a83fab8647@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJkODc4MGExMTdlYzAwMzhlMyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjoyOS4xMzNaIiwiaWF0IjoxNTcyNDIyMTg5LCJleHAiOjE1NzI0MjU3ODl9.X7s-FfZ3XlIoJpEQBbz4T-Ck4NcNafLLNiQIPpwKbwA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f66490839d@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJkODc4MGExMTdlYzAwMzhlNiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxODksImV4cCI6MTU3MjQyNTc4OX0.zE0PZLwi_Ak7FRXi71clZSZRzyTN9v-h6aOh_8lDl8w"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Solomon Islander' ],
  candidate: 
   { base_country: 'Moldova',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 146,
     current_currency: '$ USD',
     why_work: 'abe8feb1d8',
     description: '369c005e5a',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 56390,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: [ 'Decentralized applications (dapps)', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '05c1a2dcdd',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send a file (1150ms)
dropping database

  get page content
    GET /v2/pages
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5cb3bf960d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjJlODc4MGExMTdlYzAwMzhmYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozMC42NTJaIiwiaWF0IjoxNTcyNDIyMTkxLCJleHAiOjE1NzI0MjU3OTF9.ASJuSd-e4A8JxuJCZER4y0CDrE78DHBV_MULpRu0dhE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should get page content (1072ms)
dropping database

  POST /pages
    authorization and control
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f3c9ae24af@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMwODc4MGExMTdlYzAwMzkwMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozMi4wNzRaIiwiaWF0IjoxNTcyNDIyMTkyLCJleHAiOjE1NzI0MjU3OTJ9.8MYoPxoXfYc3aU-oymktqUik6keO2IZtVukGkBUi1pw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should insert html data in db (1115ms)
dropping database

  send referral email to a person
    POST /v2/referral/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9d96b8679b@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMxODc4MGExMTdlYzAwMzkwNyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTMsImV4cCI6MTU3MjQyNTc5M30.DCdQsBtp9HvwshgxYqvQ-o6jGO06NdBKKEDYgmIxinQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-39586637ba424da091b47dcb0e0bc8b5","subject":"Come join WOB","personalizations":[{"to":{"email":"tayyab4793@gmail.com"}}],"templateData":{"messageBody":"This email is for test case"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should send referral email to a person (256ms)
dropping database

  create ref code for a user
    GET /v2/referral?ref_code
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"856a00c0bf@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMyODc4MGExMTdlYzAwMzkwYSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTQsImV4cCI6MTU3MjQyNTc5NH0.Z2Tey69rd_ANT0OfyBWNDId1iSIBUyJAJBGR7xhrK3k"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get info of user who refereed a person (574ms)
dropping database

  admin get metrics
    GET /statistics
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"eb1f2b1eb5@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMyODc4MGExMTdlYzAwMzkwZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTUsImV4cCI6MTU3MjQyNTc5NX0.9NF4mXumcj4K0UoiYBD97M1L_pRcxHNhgtMtxGsciGs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Barbadian' ],
  candidate: 
   { base_country: 'Liechtenstein',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 25344,
     current_currency: '$ USD',
     why_work: '68f19a4374',
     description: 'eba883d181',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 47212,
        currency: '£ GBP',
        employment_availability: 'Now' },
     interest_areas: [ 'I don\'t know', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '28fef5581b',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
aggregatedData
{ nationality: { Barbadian: 1 },
  employmentAvailability: { Now: 1 },
  baseCountry: { Liechtenstein: 1 },
  expectedSalaryUSD: {},
  employee: 
   { location: {},
     roles: { 'Blockchain Developer': 1, Architect: 1 } },
  contractor: { location: {}, roles: {} },
  volunteer: { location: {}, roles: {} },
  interestAreas: { 'Smart contract development': 1, 'I don\'t know': 1 },
  commercial_skills: {} }
blockchain
{ Barbadian: 1 }
Barbadian
{ nationality: { Barbadian: 1 },
  employmentAvailability: { Now: 1 },
  baseCountry: { Liechtenstein: 1 },
  expectedSalaryUSD: 
   { min: 60431.36,
     max: 60431.36,
     average: 60431.36,
     median: 60431.36 },
  employee: 
   { location: { Afghanistan: [Object] },
     roles: { 'Blockchain Developer': 1, Architect: 1 } },
  contractor: { location: {}, roles: {} },
  volunteer: { location: {}, roles: {} },
  interestAreas: { 'Smart contract development': 1, 'I don\'t know': 1 },
  commercial_skills: 
   { Bitcoin: { count: 1, aggregate: [Object] },
     Cardano: { count: 1, aggregate: [Object] } } }
      √ it should get the application metrics (453ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b2405ac4ef@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMzODc4MGExMTdlYzAwMzkxYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTUsImV4cCI6MTU3MjQyNTc5NX0.txiicMZcAFzpUuFV9IVkZOFPpfXd56_tqBgmxYKIi0E"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
0
      √ it should return statistics of active users (326ms)
dropping database

  POST /subscribers
    testing endpoint
      √ it should should test endpoint
dropping database

  destroy token
    POST /users/destroy_token
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"876038b90a@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjMzODc4MGExMTdlYzAwMzkxZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozNS44NDhaIiwiaWF0IjoxNTcyNDIyMTk2LCJleHAiOjE1NzI0MjU3OTZ9.UhVM1G0q520_wyfGQ1mKEkktMWTNTJckSxQqKfbKpms"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should destroy token on logout (512ms)
dropping database

  change password of candidate or company
    PUT /users/change_password
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f22236352a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM0ODc4MGExMTdlYzAwMzkyMSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTYsImV4cCI6MTU3MjQyNTc5Nn0.x9LSv52MjH0hrg_Q7bqejVtgpkvUCpijWGkhgZQo9OM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should change password of candidate (264ms)
dropping database

  forgot password email of candidate or company
    POST /v2/users/auth/password/reset
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"d0dff6b0d8@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM0ODc4MGExMTdlYzAwMzkyNCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.1jkvk8dzIRepFyRcIrVe-ND2Iif941WhgLn9IUJBqjk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"level":"debug","message":"reset url: "}
{"0":{"name":"FNAME","content":"Tayyab"},"1":{"name":"RESET_PASSWORD_URL","content":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM0ODc4MGExMTdlYzAwMzkyNCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.1jkvk8dzIRepFyRcIrVe-ND2Iif941WhgLn9IUJBqjk"},"level":"debug","message":"forgot passowrd feature: "}
{"sendGridOptions":{"templateId":"d-84d5a0028f1141e68433cd97d14a876d","subject":"Forgot password on Work on Blockchain","personalizations":[{"to":{"email":"d0dff6b0d8@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","resetPasswordUrl":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM0ODc4MGExMTdlYzAwMzkyNCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.1jkvk8dzIRepFyRcIrVe-ND2Iif941WhgLn9IUJBqjk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should sent forgot password email to candidate (266ms)
dropping database

  reset password of candidate or company
    PUT /users/reset_password/:hash
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"aa10a23b26@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM1ODc4MGExMTdlYzAwMzkyNyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.IfGrsEobDePoBB0gSXRkraSBw8gt3_i-q_dPItwr6V4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"level":"debug","message":"reset url: "}
{"0":{"name":"FNAME","content":"Tayyab"},"1":{"name":"RESET_PASSWORD_URL","content":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM1ODc4MGExMTdlYzAwMzkyNyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.IfGrsEobDePoBB0gSXRkraSBw8gt3_i-q_dPItwr6V4"},"level":"debug","message":"forgot passowrd feature: "}
{"sendGridOptions":{"templateId":"d-84d5a0028f1141e68433cd97d14a876d","subject":"Forgot password on Work on Blockchain","personalizations":[{"to":{"email":"aa10a23b26@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","resetPasswordUrl":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM1ODc4MGExMTdlYzAwMzkyNyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.IfGrsEobDePoBB0gSXRkraSBw8gt3_i-q_dPItwr6V4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should reset candidate password (221ms)
dropping database

  login as company or candidate
    post /users/auth
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"03d13f9bf2@example.com","name":"e9696"}}],"templateData":{"firstName":"e9696","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM1ODc4MGExMTdlYzAwMzkyYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTcsImV4cCI6MTU3MjQyNTc5N30.-5WIOWIkw1G8RR6oSpU8P4JxEfCej_n3QUeWnxIGw4g"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should login candidate (361ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1dc99be99e@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM2ODc4MGExMTdlYzAwMzkyZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozOC4xMDVaIiwiaWF0IjoxNTcyNDIyMTk4LCJleHAiOjE1NzI0MjU3OTh9.cr_WIBgfH_N_iZOjuPv9mLnDhFFEVYMJ0R_UkyShi5Q"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should login company (570ms)
dropping database

  get verified candidate detail as company
    GET /v2/users/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"59844707c8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM3ODc4MGExMTdlYzAwMzkzMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozOS4xODFaIiwiaWF0IjoxNTcyNDIyMTk5LCJleHAiOjE1NzI0MjU3OTl9.I7ip0DktEfwxAzP50RCuKmzDN47-jmoC3hea7ph1T7U"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b4be40760e@example.com","name":"ee632"}}],"templateData":{"firstName":"ee632","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM3ODc4MGExMTdlYzAwMzkzNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIxOTksImV4cCI6MTU3MjQyNTc5OX0.XiVJ9yhDB_VQi8D8vIwztRD1Hzu-PoVrVb3c2MsqoGI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Seychellois' ],
  candidate: 
   { base_country: 'Nigeria',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 28794,
     current_currency: '£ GBP',
     why_work: 'f01125b98e',
     description: '5a818b4972',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 39821,
        currency: '£ GBP',
        employment_availability: 'Now' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '6b6e93348c',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
[ { status: { status: 'approved' },
    timestamp: 2019-10-30T07:56:39.701Z },
  { status: { status: 'approved' },
    timestamp: 2019-10-30T07:56:39.699Z },
  { timestamp: 2019-10-30T07:56:39.693Z,
    status: { status: 'wizard' } },
  { status: { status: 'created' },
    timestamp: 2019-10-30T07:56:39.674Z } ]
      √ it should return verified candidate detail of first chat offer unaccepted (544ms)
dropping database

  admin changes status of a candidate
    POST /users/user_id/candidates/status
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2268f47407@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM3ODc4MGExMTdlYzAwMzk0MSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NjozOS45NDNaIiwiaWF0IjoxNTcyNDIyMjAwLCJleHAiOjE1NzI0MjU4MDB9._lZ1UqVYG4i_LFYi6uZU4xaGuIatnl4GlmcAdVwjZdw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f38e35ddac@example.com","name":"9d6db"}}],"templateData":{"firstName":"9d6db","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM4ODc4MGExMTdlYzAwMzk0NCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDAsImV4cCI6MTU3MjQyNTgwMH0.0E-T8kgoDn94AZqm21yfx4h87QGJjkNdLalARbftqow"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Gabonese' ],
  candidate: 
   { base_country: 'St Lucia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 16836,
     current_currency: '€ EUR',
     why_work: '554e8058a5',
     description: 'dce1ab6923',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 95418,
        currency: '€ EUR',
        employment_availability: '3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ecff499124',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"sendGridOptions":{"templateId":"d-d8830894f2ac46d6af1b57abdf8d4ac5","subject":"Welcome to workonblockchain.com!","from":{"name":"Antonio Sabado","email":"antonio@workonblockchain.com"},"personalizations":[{"to":{"email":"f38e35ddac@example.com","name":"9d6db"}}],"templateData":{"body":"<p>Hi, i have just approved your profile</p>"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should changes status of a candidate (785ms)
dropping database

  update candidate profile
    Patch /users/user_id/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8e9960051f@example.com","name":"0c31d"}}],"templateData":{"firstName":"0c31d","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM4ODc4MGExMTdlYzAwMzk1MSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDEsImV4cCI6MTU3MjQyNTgwMX0.6doh9qaQ-sYJXtDXI6feCUYv8TfF2ExilCaXbuxy6qw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Laotian' ],
  candidate: 
   { base_country: 'Georgia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 44831,
     current_currency: '£ GBP',
     why_work: '968e380caa',
     description: 'aacf5d6b16',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 87042,
        currency: '£ GBP',
        employment_availability: '1 week' },
     interest_areas: [ 'Enterprise blockchain', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '9d5c984e99',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Malian' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '46b5ae1d45',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ _id: 5db942388780a117ec003951,
  marketing_emails: false,
  nationality: [ 'Malian' ],
  is_verify: 1,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  type: 'candidate',
  email: '8e9960051f@example.com',
  first_name: '0c31d',
  last_name: '7eabb',
  salt: 'QogT7cWkFlntroqSS0CyQ==',
  password_hash: '8b7a7ac1a1c186d26f8438b36a0adeb8d018e196c3660cde232851e720ea80fa2ec827438aa6c71b3076e022d974b0da6c9bfd41e8e20e62a4295a795a885474',
  candidate: 
   { history: [ [Object], [Object], [Object] ],
     latest_status: { status: 'wizard', timestamp: 2019-10-30T07:56:41.342Z },
     base_city: 'Islamabad',
     base_country: 'Georgia',
     commercial_skills: [ [Object], [Object] ],
     description: 'aacf5d6b16',
     description_commercial_skills: '46b5ae1d45',
     education_history: [ [Object] ],
     employee: { location: [Array], roles: [Array] },
     github_account: 'https://fb12.com',
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Enterprise blockchain' ],
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     stackexchange_account: 'stackexchange.com',
     why_work: '968e380caa',
     work_history: [ [Object] ] },
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM4ODc4MGExMTdlYzAwMzk1MSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDF9.SfFsmV7zb_VQDVIShDFxfwuEz7nS-qXrIMT4zTTT_gQ',
  session_started: 2019-10-30T07:56:40.930Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM4ODc4MGExMTdlYzAwMzk1MSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDEsImV4cCI6MTU3MjQyNTgwMX0.6doh9qaQ-sYJXtDXI6feCUYv8TfF2ExilCaXbuxy6qw',
  contact_number: '+926246524' }
      √ it should update candidate profile (428ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6a596e9190@example.com","name":"d2b7c"}}],"templateData":{"firstName":"d2b7c","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM5ODc4MGExMTdlYzAwMzk2NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDEsImV4cCI6MTU3MjQyNTgwMX0.9FeLuy-UQWafW4lEA8TNVzh7Bcm-RbC4nIkYPyVdH2U"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Armenian' ],
  candidate: 
   { base_country: 'Jordan',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 5235,
     current_currency: '€ EUR',
     why_work: 'da573915b3',
     description: '13fcde4ddd',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 19447,
        currency: '€ EUR',
        employment_availability: '1 month' },
     interest_areas: [ 'Enterprise blockchain', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ab3c548682',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Japanese' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'Enterprise blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'c704e4dc13',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ unset_github_account: true, unset_linkedin_account: true }
      √ it should update link sites (339ms)
dropping database

  create new candidate
    post /users/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4ed3b4a4a3@example.com","name":"b59a1"}}],"templateData":{"firstName":"b59a1","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjM5ODc4MGExMTdlYzAwMzk3YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDIsImV4cCI6MTU3MjQyNTgwMn0.c0oQnK-oxB8BsBT8shJCZjIafgZiGhGhdpLuHwquKBI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create candidate profile (310ms)
dropping database
      √ it should add new candidate to the sync queue
dropping database

  POST /v2/users/candidates/search
    admin search
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2899ebf049@example.com","name":"3ee51"}}],"templateData":{"firstName":"3ee51","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNhODc4MGExMTdlYzAwMzk3ZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDIsImV4cCI6MTU3MjQyNTgwMn0.qz3dM0XMnT38IQvWjDRhkPCvB4etDohdjGG7271RzR0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Mozambican' ],
  candidate: 
   { base_country: 'El Salvador',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 11376,
     current_currency: '$ USD',
     why_work: '24089f0958',
     description: '945339ff1d',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 95845,
        currency: '€ EUR',
        employment_availability: 'Longer than 3 months' },
     interest_areas: [ 'Enterprise blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'bfff87e4d0',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Argentinean' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'Public blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3ce4c033bd',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should get all users for admin (253ms)
dropping database
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"39c33ecd32@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNhODc4MGExMTdlYzAwMzk5MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0Mi43MDhaIiwiaWF0IjoxNTcyNDIyMjAzLCJleHAiOjE1NzI0MjU4MDN9.YxIRc6CQxzfuz2AplYwerk3WC9LyB48gkLB7zrN1TWg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"137ec41f6e@example.com","name":"d86b2"}}],"templateData":{"firstName":"d86b2","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNiODc4MGExMTdlYzAwMzk5NyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDMsImV4cCI6MTU3MjQyNTgwM30.EQNxQ_nNi6ohIuWeU2MW0sWPueN50HIt0j8SuOQZNh0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Liberian' ],
  candidate: 
   { base_country: 'Ethiopia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 9542,
     current_currency: '$ USD',
     why_work: '74820e0351',
     description: '365aae9395',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 46903,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'I don\'t know', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '4b754fcf2f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Guinea-Bissauan' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'Enterprise blockchain', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '0795cf89f1',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ _id: 5db9423b8780a117ec0039ab,
  sender_id: 5db9423a8780a117ec003992,
  receiver_id: 5db9423b8780a117ec003997,
  msg_tag: 'approach',
  date_created: 2019-10-30T07:56:43.280Z,
  message: 
   { approach: { _id: 5db9423b8780a117ec0039ac, employee: [Object] } },
  __v: 0 }
{"filters":{"status":"approved","msg_tags":["approach"]},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"candidate.latest_status.status":"approved"},{"_id":{"$in":["5db9423a8780a117ec003992","5db9423b8780a117ec003997"]}}],"level":"debug","message":"query"}
      √ it should search candidate by filter (926ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"66257fb793@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNjODc4MGExMTdlYzAwMzliMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0NC4xNTNaIiwiaWF0IjoxNTcyNDIyMjA1LCJleHAiOjE1NzI0MjU4MDV9.I_Do-IqutyiFT_8VaEwbd7-_4E8Toz9ZB8S0UIuZt8Y"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"775ebbcdc8@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNkODc4MGExMTdlYzAwMzliNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDUsImV4cCI6MTU3MjQyNTgwNX0.LwHQqB0Fc4eLNn-AE26_Q1onFk96wI2pWESaqO_AK-A"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Liberian' ],
  candidate: 
   { base_country: 'Poland',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 20604,
     current_currency: '€ EUR',
     why_work: '9414858719',
     description: '47bc868020',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 95242,
        currency: '€ EUR',
        employment_availability: 'Now' },
     interest_areas: [ 'Enterprise blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f6d68f3216',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false}],"level":"debug","message":"query"}
      √ it should return verified candidate (1405ms)
dropping database
    company search
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"faaaadc55b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNkODc4MGExMTdlYzAwMzljMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0NS43NDlaIiwiaWF0IjoxNTcyNDIyMjA2LCJleHAiOjE1NzI0MjU4MDZ9.VMBQPhJyOEv4SQp2GCrZs8UjOYszTzpAEbpwP1frwhE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"97a84d5339@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNlODc4MGExMTdlYzAwMzljMyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDYsImV4cCI6MTU3MjQyNTgwNn0.9NOgRuHS1rKOaIonSNDkBJabd8T3AeS5LLBi9o5Wphk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Nauruan' ],
  candidate: 
   { base_country: 'Sao Tome & Principe',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 1442,
     current_currency: '$ USD',
     why_work: 'abbb43fdd2',
     description: 'dfbb1c2bda',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 71678,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'I don\'t know', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e8968b25cb',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ history: 
   [ { status: [Object], timestamp: 2019-10-30T07:56:46.292Z },
     { status: [Object], timestamp: 2019-10-30T07:56:46.290Z },
     { timestamp: 2019-10-30T07:56:46.284Z, status: [Object] },
     { status: [Object], timestamp: 2019-10-30T07:56:46.259Z } ],
  latest_status: { status: 'approved', timestamp: 2019-10-30T07:56:46.292Z },
  base_city: 'Islamabad',
  base_country: 'Sao Tome & Principe',
  commercial_skills: 
   [ { skills_id: '5d9b0ad8e70a001d20f21688',
       name: 'Cardano',
       type: 'blockchain',
       exp_year: 2 },
     { skills_id: '5d9b0ad8e70a001d20f21679',
       name: 'Bitcoin',
       type: 'blockchain',
       exp_year: 1 } ],
  current_currency: '$ USD',
  current_salary: 1442,
  description: 'dfbb1c2bda',
  description_commercial_skills: 'e8968b25cb',
  education_history: 
   [ { uniname: 'CUST',
       degreename: 'BSCS',
       fieldname: 'CS',
       eduyear: 2016 } ],
  employee: 
   { location: [ [Object], [Object], [Object] ],
     roles: [ 'Architect', 'Technical Lead' ],
     expected_annual_salary: 71678,
     currency: '£ GBP',
     employment_availability: '1 month' },
  github_account: 'https://www.fb.com',
  interest_areas: [ 'I don\'t know', 'Enterprise blockchain' ],
  linkedin_account: 'https://linkedin.com/in/sadia_abbas',
  medium_account: 'https://medium.com/sadiaAbbas',
  stackexchange_account: 'https://www.exchange.com',
  why_work: 'abbb43fdd2',
  work_history: 
   [ { companyname: 'MWAN',
       positionname: 'Team Lead',
       locationname: 'Tokyo Japan',
       description: 'I am in this org. I am in this org. I am in this org. I am this org. I am in this org. I am in this org. I am in this org. I am in this orgg. ',
       startdate: '2016-02-29T19:00:00.000Z',
       enddate: '2018-10-09T07:32:38.732Z',
       currentwork: true } ] }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"locations":[{"remote":true},{"city":"5c4aa17468cc293450c14c04"}]},"level":"debug","message":"Doing new candidate search"}
{"0":{"remote":true},"1":{"city":"5c4aa17468cc293450c14c04"},"level":"debug","message":"locations: "}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$or":[{"candidate.employee.location.remote":true},{"candidate.contractor.location.remote":true},{"candidate.volunteer.location.remote":true}]}]}],"level":"debug","message":"query"}
      √ it should return the candidate with position and location  (571ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"effb7335b9@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNlODc4MGExMTdlYzAwMzljZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0Ni41MjdaIiwiaWF0IjoxNTcyNDIyMjA2LCJleHAiOjE1NzI0MjU4MDZ9.-OCEZtmaOj7SCHwS1Tqb6D5Qr4bQyXfAv_nwathc7rs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1dae162ff3@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNlODc4MGExMTdlYzAwMzlkMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDYsImV4cCI6MTU3MjQyNTgwNn0.Fml7yM4dN14tcWd6fR0E_rQ1J6SvZYLssNr_rzA0ADQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Djibouti' ],
  candidate: 
   { base_country: 'Zambia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 50731,
     current_currency: '$ USD',
     why_work: 'bbcfc85db2',
     description: '9c237a92a4',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 77090,
        currency: '$ USD',
        employment_availability: '3 weeks' },
     interest_areas: [ 'Decentralized applications (dapps)', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '6150e5c82c',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false}],"level":"debug","message":"query"}
      √ it should return the candidate with currency search (441ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"02864007cb@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNmODc4MGExMTdlYzAwMzlkZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0Ny4yMTZaIiwiaWF0IjoxNTcyNDIyMjA3LCJleHAiOjE1NzI0MjU4MDd9.gwCn8LimI8syxTGLkQRyqzgVRxX5iUn8sb_nyf92kko"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9eede9be9a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNmODc4MGExMTdlYzAwMzllMSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDcsImV4cCI6MTU3MjQyNTgwN30.EovI8WfyH2m2d9VQsp2n2rp6X9X8S8oT-04jkjB-JsU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Ugandan' ],
  candidate: 
   { base_country: 'Iran',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 38416,
     current_currency: '€ EUR',
     why_work: '4440d0fe29',
     description: 'cb1e6e9528',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 32340,
        currency: '$ USD',
        employment_availability: '1 month' },
     interest_areas: [ 'Blockchain infrastructure', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'fde81d9cd3',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"$ USD","expected_salary_min":16170},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":17787}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":13896.093750000002}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":15602.63157894737}}]}]}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"d2c974a0-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"current_currency":"$ USD","current_salary":16170}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should not return the candidate with half currency search (523ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"489bfda303@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjNmODc4MGExMTdlYzAwMzllZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0Ny45MzVaIiwiaWF0IjoxNTcyNDIyMjA4LCJleHAiOjE1NzI0MjU4MDh9.P_g1AQ16pEQew4la_OnZOt7nVyj-c43FU8hu6iVf-AU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"22297f8ccb@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQwODc4MGExMTdlYzAwMzlmMCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDgsImV4cCI6MTU3MjQyNTgwOH0.r1CyluT3LNCn_ln7N0gjWVx36FloFHHRu-Pv5PD-P6s"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Seychellois' ],
  candidate: 
   { base_country: 'Norway',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 3451,
     current_currency: '£ GBP',
     why_work: 'da90f873cf',
     description: '7d2b6de148',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 62962,
        currency: '€ EUR',
        employment_availability: '1 month' },
     interest_areas: [ 'Public blockchain', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '2ed56b7b19',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
56075.53124999999
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"£ GBP","expected_salary_min":50518.49662162161},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":71130.04324324324}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":55570.34628378378}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":62394.77477477478}}]}]}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"d35b5460-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"current_currency":"£ GBP","current_salary":50518.49662162161}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should return the candidate with half different-currency search (750ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f32a1abac9@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQwODc4MGExMTdlYzAwMzlmYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0OC44NTlaIiwiaWF0IjoxNTcyNDIyMjA5LCJleHAiOjE1NzI0MjU4MDl9.gS9Pjn5xQgvSHoSZiNwsyD2WBfUAd6TsIAGNb1rQJTY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"27bcce3699@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQxODc4MGExMTdlYzAwMzlmZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMDksImV4cCI6MTU3MjQyNTgwOX0.YMuXXuWgxgrkA0pXxe3PLSQo8vIg75EhMWWAk-IQ-CE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Angolan' ],
  candidate: 
   { base_country: 'Batswana',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 69748,
     current_currency: '€ EUR',
     why_work: '3b0e0be854',
     description: '8c43be8455',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 84901,
        currency: '$ USD',
        employment_availability: '1 week' },
     interest_areas: [ 'Enterprise blockchain', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3531c4bdf3',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
66328.90625
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"£ GBP","expected_salary_min":60852.20756880734},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":85679.90825688075}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":66937.42832568807}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":75157.81426042171}}]}]}],"level":"debug","message":"query"}
      √ it should not return the candidate with half different-currency search (764ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4327eaee3a@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQxODc4MGExMTdlYzAwM2EwYiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo0OS44NDFaIiwiaWF0IjoxNTcyNDIyMjEwLCJleHAiOjE1NzI0MjU4MTB9.Pi9E-7ZxN-zWLCBdLoIyLxFBBaIjSDNi-NxGdBXW5R8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"04b7aa53ed@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQyODc4MGExMTdlYzAwM2EwZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMTAsImV4cCI6MTU3MjQyNTgxMH0.G4MqBszV-pysL5Oj3uhuV__06hECVqJy8L7E9zp17X4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Ecuadorean' ],
  candidate: 
   { base_country: 'United States',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 8548,
     current_currency: '€ EUR',
     why_work: 'eb3ea5e38a',
     description: '2b10ca622a',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 90761,
        currency: '£ GBP',
        employment_availability: '3 weeks' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e0b531e0ab',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano","exp_year":1}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":1}}}}],"level":"debug","message":"query"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano","exp_year":3}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":3}}}}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"d4826f40-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"required_skills":[{"name":"Cardano","exp_year":3}]}},"level":"warn","message":"No candidates matched this search criteria"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano"}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano"}}}],"level":"debug","message":"query"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"not a skill name","exp_year":1}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"not a skill name","exp_year":{"$gte":1}}}}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"d4855570-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"required_skills":[{"name":"not a skill name","exp_year":1}]}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should return the candidate with required skills (797ms)
dropping database

  get current company detail
    GET /v2/users/companies
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"730f177a0a@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQyODc4MGExMTdlYzAwM2EyMSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1MC45MjdaIiwiaWF0IjoxNTcyNDIyMjExLCJleHAiOjE1NzI0MjU4MTF9.PzsSXYPVtP9xlqX_PhjdtMlSkL4BHBWyeseSoOu5uIc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get current company profile detail (553ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ffa6ece130@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQzODc4MGExMTdlYzAwM2EyNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1MS43ODZaIiwiaWF0IjoxNTcyNDIyMjEyLCJleHAiOjE1NzI0MjU4MTJ9.gs6Shuut5Cumyqc9N5ztR0gRkYI_BGahl9KsYkc-PrI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6ecd947b91@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ0ODc4MGExMTdlYzAwM2EyOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1Mi4zMDFaIiwiaWF0IjoxNTcyNDIyMjEyLCJleHAiOjE1NzI0MjU4MTJ9.5lXicDpl_ILfwOd-ViiQ-8rng0lerv4Ufwx91zHz5TU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get current company profile detail including jobs (1246ms)
dropping database

  update profile as company
    PUT /users/update_company_profile
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"680e35bf98@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ1ODc4MGExMTdlYzAwM2EzOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1My40NzJaIiwiaWF0IjoxNTcyNDIyMjEzLCJleHAiOjE1NzI0MjU4MTN9.WdzHMoDZRNUKQdKrSsxbugCnx5g8Y0zM9gGf_7pL7vA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update company profile (478ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"3c4c4e13f8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ2ODc4MGExMTdlYzAwM2EzZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1NC4yMjZaIiwiaWF0IjoxNTcyNDIyMjE1LCJleHAiOjE1NzI0MjU4MTV9.kBi7Gq8EOCV221f6x2dIbezXn9mCt3XwmUqXCHT29pU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-c7eec23fe534423d9e4282e179559863","subject":"DTA document from WOB","personalizations":[{"to":{"email":"privacy@workonblockchain.com"}}],"templateData":{"companyName":"c61d776862","companyCountry":"Pakistan","dtaUrl":"http://localhost/workonblockchain.com/server/uploads/1572422215036doc.pdf","companyAdminUrl":"http://localhost:4200/admins/company/5db942468780a117ec003a3e","environment":"test"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update/add gdpr compliance of a company (836ms)
dropping database

  create new company
    Post /users/companies
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"29d3035fe9@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ3ODc4MGExMTdlYzAwM2E0MyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1NS4zNDlaIiwiaWF0IjoxNTcyNDIyMjE2LCJleHAiOjE1NzI0MjU4MTZ9.9FdSEZipV8RuCpmWclwj13baeYe_u0yBAVzAohEjFSs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create new company profile (743ms)
dropping database

  admin search company by filter
    POST /v2/users/companies/search
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2f343794e6@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ4ODc4MGExMTdlYzAwM2E0NiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1Ni4yODJaIiwiaWF0IjoxNTcyNDIyMjE2LCJleHAiOjE1NzI0MjU4MTZ9.JnMfEWCCVNbKGjs3mdwx2lalckDb9cC_IYp3BpzLSBk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b1af87dbf6@example.com","name":"cef48"}}],"templateData":{"firstName":"cef48","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ4ODc4MGExMTdlYzAwM2E0YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMTYsImV4cCI6MTU3MjQyNTgxNn0.HA0JQtnJQygAPfaM7s4DR4l7-3Tp47ZNvHpPBDbZZfU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Djibouti' ],
  candidate: 
   { base_country: 'Kuwait',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 23228,
     current_currency: '£ GBP',
     why_work: 'd49e320d20',
     description: '4dfea4fd4b',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 67372,
        currency: '€ EUR',
        employment_availability: '2 weeks' },
     interest_areas: 
      [ 'Blockchain infrastructure',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '73bb174db9',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should search company by filter (878ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e49c773a72@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ5ODc4MGExMTdlYzAwM2E1ZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1Ny40NjJaIiwiaWF0IjoxNTcyNDIyMjE3LCJleHAiOjE1NzI0MjU4MTd9.QM6tJeFmkDM28fP4MZOLiEipmt6d59srotWrvcCINE0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get all companies (484ms)
dropping database

  update company status
    POST /users/:user_id/companies/status
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e7e2743a69@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjQ5ODc4MGExMTdlYzAwM2E2MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1Njo1Ny45NDVaIiwiaWF0IjoxNTcyNDIyMjE5LCJleHAiOjE1NzI0MjU4MTl9.FL_ietDxNnOkBGs9tcfhqIvA1wnDyDClHU1J4Bm36bw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
5db942498780a117ec003a62
{"sendGridOptions":{"templateId":"d-02056a2f353b4493894597caeda49ba6","subject":"Your account has been approved!","personalizations":[{"to":{"email":"e7e2743a69@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should change company account status (1334ms)
dropping database

  verify email of candidate or company
    PATCH /v2/users/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"68cb625055@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRiODc4MGExMTdlYzAwM2E2OSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMjAsImV4cCI6MTU3MjQyNTgyMH0.Iz8jGPp8dhhMnWtJj67o5K-ToH4qQWERV05-QT3qgG4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should verify user email (549ms)
dropping database

  verify client email
    POST /v2/users/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6e0a0e91a6@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRjODc4MGExMTdlYzAwM2E2YyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowMC4yMjdaIiwiaWF0IjoxNTcyNDIyMjIwLCJleHAiOjE1NzI0MjU4MjB9.9bRVMoYBTeT9-aix4xStXuO21_7pWE-CNCnQhND253o"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6e0a0e91a6@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRjODc4MGExMTdlYzAwM2E2YyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowMC4yMjdaIiwiaWF0IjoxNTcyNDIyMjIwLCJleHAiOjE1NzI0MjU4MjB9.9bRVMoYBTeT9-aix4xStXuO21_7pWE-CNCnQhND253o"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should send verify email to candidate or company (727ms)
dropping database

  POST /messages
    add terms & privacy of candidate
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"d856c1770c@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRkODc4MGExMTdlYzAwM2E3MCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowMS4xMzJaIiwiaWF0IjoxNTcyNDIyMjIxLCJleHAiOjE1NzI0MjU4MjF9.JIqTlnRH3J3vo3hQ-rypiwaJx9AcKsXUOePgVz1CaMQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Candidate","content":"<p>These are Terms and Conditions for candidates. We will not tolerate anything.</p>\n","name":"Terms and Condition for candidate"},"level":"info"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"58254317d7@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRlODc4MGExMTdlYzAwM2E3NyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMjIsImV4cCI6MTU3MjQyNTgyMn0.artWcOM_Z36B68GHf5dFXa3nv2lSCqJSIfyOso-LP5M"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should add terms & privacy of candidate (917ms)
dropping database
    company terms and conditions
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0bb0d43eaa@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRlODc4MGExMTdlYzAwM2E3YiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowMi4zMzlaIiwiaWF0IjoxNTcyNDIyMjIyLCJleHAiOjE1NzI0MjU4MjJ9.auC7fjmE_wzYbyMiU14SR9IhByoGD-8FA1cwwY0VodI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Company","content":"<p>These are Terms and Conditions for companies. We will not tolerate anything.</p>\n","name":"Terms and Condition for company"},"level":"info"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should insert the TnC and marketing email (718ms)
dropping database

  account setting
    Patch /users/account_settings
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"375055611f@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjRmODc4MGExMTdlYzAwM2E4NCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowMy4zNzBaIiwiaWF0IjoxNTcyNDIyMjI0LCJleHAiOjE1NzI0MjU4MjR9.agqSReG5X3vtgu_axzmXeKeBGg9qUCPlpAnO_LXA72I"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should enable or disbale the account setting (690ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b317f57088@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUwODc4MGExMTdlYzAwM2E4OCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNC4yNTlaIiwiaWF0IjoxNTcyNDIyMjI1LCJleHAiOjE1NzI0MjU4MjV9.phtknir0uto1L8_fKXfg3JWnxPm0PpMOoxlN5ophDeg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Company","content":"<p>These are Terms and Conditions for companies. We will not tolerate anything.</p>\n","name":"Terms and Condition for company"},"level":"info"}
{ _id: 5db942508780a117ec003a89,
  marketing_emails: false,
  job_ids: [],
  _creator: 
   { _id: 5db942508780a117ec003a88,
     marketing_emails: false,
     nationality: [],
     is_verify: 1,
     is_approved: 0,
     is_admin: 1,
     is_unread_msgs_to_send: true,
     disable_account: false,
     viewed_explanation_popup: false,
     email: 'b317f57088@example.com',
     password_hash: '13eca546daaed6c0a5aea5e6085fa2e3dced001946b3debe79e44ed8462f8a5ecde3a640cc29aa9e90b87fa906ecde6548a9fcbe339f3fa57aed167b62847bb5',
     salt: 'dXYyTD5m9Ry/aGCL4HrXQ==',
     type: 'company',
     created_date: 2019-10-30T07:57:04.259Z,
     conversations: [],
     __v: 0,
     jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUwODc4MGExMTdlYzAwM2E4OCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNC4yNTlaIiwiaWF0IjoxNTcyNDIyMjI1fQ.7CBeCOH8gJ6heOgbILpX-j24gvy09HZbbMMHu7iRwMk',
     session_started: 2019-10-30T07:57:05.300Z,
     verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUwODc4MGExMTdlYzAwM2E4OCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNC4yNTlaIiwiaWF0IjoxNTcyNDIyMjI1LCJleHAiOjE1NzI0MjU4MjV9.phtknir0uto1L8_fKXfg3JWnxPm0PpMOoxlN5ophDeg' },
  first_name: 'Salman',
  last_name: 'Safdar',
  job_title: 'Designer',
  company_name: 'c3aa778a22',
  company_website: 'my-web.com',
  company_phone: 'undefined 926546456',
  company_country: 'Pakistan',
  company_city: 'RWP',
  company_postcode: '25000',
  history: [],
  saved_searches: [],
  candidates_sent_by_email: [],
  __v: 0,
  terms_id: 5db942518780a117ec003a8b }
      √ it should update company terms id (1339ms)
dropping database

  cron
    send candidates to companies
5db942518780a117ec003a8e
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f55440b618@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUxODc4MGExMTdlYzAwM2E4ZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNS45NDZaIiwiaWF0IjoxNTcyNDIyMjI2LCJleHAiOjE1NzI0MjU4MjZ9.C4Y6rKoeHjgvT0brj7nUlY_rgNSLGIKR3Zu-Ok6WEsA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1bb1b5a179@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUyODc4MGExMTdlYzAwM2E5MyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNi40NDdaIiwiaWF0IjoxNTcyNDIyMjI2LCJleHAiOjE1NzI0MjU4MjZ9.f19nCDDMqXx7Yl1QQj5stBIHYmNDsNM4GkutcRYbEHk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"273aa0b0a7@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUzODc4MGExMTdlYzAwM2E5ZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMjcsImV4cCI6MTU3MjQyNTgyN30.20xy5mFKgfURdXkyj4JB27kkJ7VbYhaaV9J1nDeJSBE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Ivorian' ],
  candidate: 
   { base_country: 'Zimbabwe',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 14260,
     current_currency: '£ GBP',
     why_work: 'b7b34acac2',
     description: '736d203073',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 75788,
        currency: '€ EUR',
        employment_availability: '2 weeks' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '07512ebfac',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942518780a117ec003a8e","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"f55440b618@example.com","password_hash":"3adb72e0d30ff9c11c85598cf6568f0ca13cb3b285f51ab3525c97b7e7a1494e109fbebe7e72a38cf78e0cdf90bd9b793480f2b144537bc296f3f158966e1b21","salt":"cxT8TCdnOHKg9k9T2uMNg==","type":"company","created_date":"2019-10-30T07:57:05.946Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUxODc4MGExMTdlYzAwM2E4ZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNS45NDZaIiwiaWF0IjoxNTcyNDIyMjI2fQ.dhXQ5A0sFuQMZ93lTBz5DI0GvYwz-CjwZMEHLH3zARg","session_started":"2019-10-30T07:57:06.422Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUxODc4MGExMTdlYzAwM2E4ZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowNS45NDZaIiwiaWF0IjoxNTcyNDIyMjI2LCJleHAiOjE1NzI0MjU4MjZ9.C4Y6rKoeHjgvT0brj7nUlY_rgNSLGIKR3Zu-Ok6WEsA"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 14768666fd with user_id 5db942518780a117ec003a8e","level":"debug"}
{"0":"5db942538780a117ec003a9a","level":"debug","message":"Company preferences"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false,"blacklist":[],"updatedAfter":"2019-10-30T07:57:07.041Z"},"search":{"visa_needed":false,"required_skills":[{"_id":"5db942538780a117ec003a9b","skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2}],"expected_salary_min":75788,"currency":"€ EUR","work_type":"employee"},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"_id":{"$nin":[]}},{"candidate.employee":{"$exists":true}},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":95038.152}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":74248.55625}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":83366.8}}]}]},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":2}}}}],"level":"debug","message":"query"}
{"0":"5db942538780a117ec003a9d","level":"debug","message":"Candidate ids in search"}
{"0":"5db942538780a117ec003a9d","level":"debug","message":"All candidate ids found in search"}
{"templateDetails":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"f55440b618@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"14768666fd","candidates":{"count":1,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942538780a117ec003a9d","why_work":"b7b34acac2","initials":"TH"}]}}},"level":"debug","message":"Sending email with sendGrid"}
{"sendGridOptions":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"f55440b618@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"14768666fd","candidates":{"count":1,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942538780a117ec003a9d","why_work":"b7b34acac2","initials":"TH"}]}}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ _id: 5db942538780a117ec003a9d,
  marketing_emails: false,
  nationality: [ 'Ivorian' ],
  is_verify: 1,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  type: 'candidate',
  email: '273aa0b0a7@example.com',
  first_name: 'Tayyab',
  last_name: 'Hussain',
  salt: 'pL/kQY40gAvdjh2jNSvhg==',
  password_hash: '38dcf0e2858a5aec719f09b64da9219b4108349761669ab48d03fce81699ebcb74af1d60f5870239db2a2d1ddce0c474e83e9914e69c77e2ed836fda6c030bf4',
  candidate: 
   { history: [ [Object], [Object], [Object], [Object] ],
     latest_status: { status: 'approved', timestamp: 2019-10-30T07:57:07.522Z },
     base_city: 'Islamabad',
     base_country: 'Zimbabwe',
     commercial_skills: [ [Object], [Object] ],
     current_currency: '£ GBP',
     current_salary: 14260,
     description: '736d203073',
     description_commercial_skills: '07512ebfac',
     education_history: [ [Object] ],
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 75788,
        currency: '€ EUR',
        employment_availability: '2 weeks' },
     github_account: 'https://www.fb.com',
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Decentralized applications (dapps)' ],
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     stackexchange_account: 'https://www.exchange.com',
     why_work: 'b7b34acac2',
     work_history: [ [Object] ] },
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUzODc4MGExMTdlYzAwM2E5ZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMjd9.sKxC3XkAoGfac47Vd34Otvtagl64o62WrUCx5PPuOZQ',
  session_started: 2019-10-30T07:57:07.491Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjUzODc4MGExMTdlYzAwM2E5ZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMjcsImV4cCI6MTU3MjQyNTgyN30.20xy5mFKgfURdXkyj4JB27kkJ7VbYhaaV9J1nDeJSBE',
  contact_number: '+92654654654',
  first_approved_date: 2019-10-30T07:57:07.522Z }
      √ should send one candidate (1607ms)
dropping database
5db942548780a117ec003aa9
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"60b94141b7@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU0ODc4MGExMTdlYzAwM2FhOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOC40NDhaIiwiaWF0IjoxNTcyNDIyMjI5LCJleHAiOjE1NzI0MjU4Mjl9.ifE0gdPdkeQOdE729IhUqbzR7oT6l_UrXQpyF5icGRk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6d78fee256@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU1ODc4MGExMTdlYzAwM2FhZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOS4wMjhaIiwiaWF0IjoxNTcyNDIyMjI5LCJleHAiOjE1NzI0MjU4Mjl9.FMEWvsnrrzDgravlB91nD4S6wzVtiyP370fMbZh9fjM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"c1a4e2d9a4@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FiOCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzAsImV4cCI6MTU3MjQyNTgzMH0.shrglJe91_bLbpSjePBCCFtZDkZwcYj_O4vqMdToSOs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Antiguans' ],
  candidate: 
   { base_country: 'Congo',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 47901,
     current_currency: '€ EUR',
     why_work: 'd0d7eafbc6',
     description: '21644378f0',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 91623,
        currency: '£ GBP',
        employment_availability: '2 months' },
     interest_areas: [ 'Blockchain infrastructure', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '64192777ad',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942548780a117ec003aa9","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"60b94141b7@example.com","password_hash":"056798c575317b88d82f26cd1ee57cd87c1821c5e567d688f4803baf58898073c407d7bc2141e4218c6c0a7e19b87c5b562acb50ad10c25e6ee6832f89f7ffe3","salt":"TE+wi7QFtoeF84uwlx/fA==","type":"company","created_date":"2019-10-30T07:57:08.448Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU0ODc4MGExMTdlYzAwM2FhOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOC40NDhaIiwiaWF0IjoxNTcyNDIyMjI5fQ.nlitwA5Oo4M-wFfZl7kniVYui1HzgLFPyKGj6ZZqlbE","session_started":"2019-10-30T07:57:09.000Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU0ODc4MGExMTdlYzAwM2FhOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOC40NDhaIiwiaWF0IjoxNTcyNDIyMjI5LCJleHAiOjE1NzI0MjU4Mjl9.ifE0gdPdkeQOdE729IhUqbzR7oT6l_UrXQpyF5icGRk"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 7cffbbcac9 with user_id 5db942548780a117ec003aa9","level":"debug"}
{"0":"5db942558780a117ec003ab5","level":"debug","message":"Company preferences"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false,"blacklist":[],"updatedAfter":"2019-10-30T07:57:09.698Z"},"search":{"visa_needed":false,"required_skills":[{"_id":"5db942558780a117ec003ab6","skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2}],"expected_salary_min":91623,"currency":"£ GBP","work_type":"employee"},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"_id":{"$nin":[]}},{"candidate.employee":{"$exists":true}},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":129005.18400000001}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":100785.3}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":113162.44210526318}}]}]},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":2}}}}],"level":"debug","message":"query"}
{"0":"5db942568780a117ec003ab8","level":"debug","message":"Candidate ids in search"}
{"0":"5db942568780a117ec003ab8","level":"debug","message":"All candidate ids found in search"}
{"templateDetails":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"60b94141b7@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"7cffbbcac9","candidates":{"count":1,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942568780a117ec003ab8","why_work":"d0d7eafbc6","initials":"TH"}]}}},"level":"debug","message":"Sending email with sendGrid"}
{"sendGridOptions":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"60b94141b7@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"7cffbbcac9","candidates":{"count":1,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942568780a117ec003ab8","why_work":"d0d7eafbc6","initials":"TH"}]}}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ _id: 5db942568780a117ec003ab8,
  marketing_emails: false,
  nationality: [ 'Antiguans' ],
  is_verify: 1,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  type: 'candidate',
  email: 'c1a4e2d9a4@example.com',
  first_name: 'Tayyab',
  last_name: 'Hussain',
  salt: 'C8EdONSvCQz3+gmNLphoQ==',
  password_hash: '1ef751a766bc76daf8627889e4fc21404f70edfc7a03be9d44c3299e37fcd51e0b07d7bb88857c4dc59c2b3908beec531a8b36f0df0e271a3ba58b32a1f83648',
  candidate: 
   { history: [ [Object], [Object], [Object], [Object] ],
     latest_status: { status: 'approved', timestamp: 2019-10-30T07:57:10.139Z },
     base_city: 'Islamabad',
     base_country: 'Congo',
     commercial_skills: [ [Object], [Object] ],
     current_currency: '€ EUR',
     current_salary: 47901,
     description: '21644378f0',
     description_commercial_skills: '64192777ad',
     education_history: [ [Object] ],
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 91623,
        currency: '£ GBP',
        employment_availability: '2 months' },
     github_account: 'https://www.fb.com',
     interest_areas: [ 'Blockchain infrastructure', 'Enterprise blockchain' ],
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     stackexchange_account: 'https://www.exchange.com',
     why_work: 'd0d7eafbc6',
     work_history: [ [Object] ] },
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FiOCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzB9.pbSafZs2T1IIQVNr9Trj8vRRBqeM5EZy-diLtpgqkKw',
  session_started: 2019-10-30T07:57:10.109Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FiOCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzAsImV4cCI6MTU3MjQyNTgzMH0.shrglJe91_bLbpSjePBCCFtZDkZwcYj_O4vqMdToSOs',
  contact_number: '+92654654654',
  first_approved_date: 2019-10-30T07:57:10.139Z }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942548780a117ec003aa9","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"60b94141b7@example.com","password_hash":"056798c575317b88d82f26cd1ee57cd87c1821c5e567d688f4803baf58898073c407d7bc2141e4218c6c0a7e19b87c5b562acb50ad10c25e6ee6832f89f7ffe3","salt":"TE+wi7QFtoeF84uwlx/fA==","type":"company","created_date":"2019-10-30T07:57:08.448Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU0ODc4MGExMTdlYzAwM2FhOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOC40NDhaIiwiaWF0IjoxNTcyNDIyMjI5fQ.nlitwA5Oo4M-wFfZl7kniVYui1HzgLFPyKGj6ZZqlbE","session_started":"2019-10-30T07:57:09.000Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU0ODc4MGExMTdlYzAwM2FhOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzowOC40NDhaIiwiaWF0IjoxNTcyNDIyMjI5LCJleHAiOjE1NzI0MjU4Mjl9.ifE0gdPdkeQOdE729IhUqbzR7oT6l_UrXQpyF5icGRk"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 7cffbbcac9 with user_id 5db942548780a117ec003aa9","level":"debug"}
{"message":"Company has recently been sent an email","level":"debug"}
      √ should not send a candidate if they have already been sent (1723ms)
dropping database
5db942568780a117ec003ac4
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2f8b8de5ff@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxLCJleHAiOjE1NzI0MjU4MzF9.oT7j0AarlDG9vx4zz5CnW9gRbNK5-jdj78c-Xs28AOc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4d111402f8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU3ODc4MGExMTdlYzAwM2FjOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMS40MTFaIiwiaWF0IjoxNTcyNDIyMjMxLCJleHAiOjE1NzI0MjU4MzF9.F0_S5VuDkr-EepFR0ETgYksKGRuwA1dly9XSetBr9EA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"3799c5e997@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU4ODc4MGExMTdlYzAwM2FkMyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzIsImV4cCI6MTU3MjQyNTgzMn0.QL_ExUfI5db86EpTrYIIHTz3MCulTCLJJl5ObDNfWhI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Senegalese' ],
  candidate: 
   { base_country: 'Mali',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 13275,
     current_currency: '£ GBP',
     why_work: 'ad4b9a45b7',
     description: 'f0948ccf8e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 32777,
        currency: '$ USD',
        employment_availability: 'Longer than 3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e03511b7be',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a010e7b139@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU4ODc4MGExMTdlYzAwM2FkZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzIsImV4cCI6MTU3MjQyNTgzMn0.JEYCuQt8P_ci34apKruycbgbDhvWG0rVGPkYiKykcVQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Senegalese' ],
  candidate: 
   { base_country: 'Mali',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 13275,
     current_currency: '£ GBP',
     why_work: 'ad4b9a45b7',
     description: 'f0948ccf8e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 32777,
        currency: '$ USD',
        employment_availability: 'Longer than 3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e03511b7be',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942568780a117ec003ac4","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"2f8b8de5ff@example.com","password_hash":"542e634c656c61705373d4eea856110ef5db1e55aff6ed74b0713ecc3f3edb7bf2809b4015773f9c944ddb60ec259ee17e57cc6e200448a4d859e60b5e5f44b9","salt":"kuwKXGYPlWhrTmp76NpiA==","type":"company","created_date":"2019-10-30T07:57:10.763Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxfQ.7CDFFuvf-DXwapmR-iicIC9V63WUfDAKzdDNUGskKCk","session_started":"2019-10-30T07:57:11.379Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxLCJleHAiOjE1NzI0MjU4MzF9.oT7j0AarlDG9vx4zz5CnW9gRbNK5-jdj78c-Xs28AOc"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 849d21a815 with user_id 5db942568780a117ec003ac4","level":"debug"}
{"0":"5db942588780a117ec003ad0","level":"debug","message":"Company preferences"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false,"blacklist":[],"updatedAfter":"2019-10-30T07:57:12.063Z"},"search":{"visa_needed":false,"required_skills":[{"_id":"5db942588780a117ec003ad1","skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2}],"expected_salary_min":32777,"currency":"$ USD","work_type":"employee"},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"_id":{"$nin":[]}},{"candidate.employee":{"$exists":true}},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":36054.700000000004}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":28167.734375000004}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":31626.92982456141}}]}]},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":2}}}}],"level":"debug","message":"query"}
{"0":"5db942588780a117ec003ade","1":"5db942588780a117ec003ad3","level":"debug","message":"Candidate ids in search"}
{"0":"5db942588780a117ec003ade","1":"5db942588780a117ec003ad3","level":"debug","message":"All candidate ids found in search"}
{"templateDetails":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"2f8b8de5ff@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"849d21a815","candidates":{"count":2,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942588780a117ec003ade","why_work":"ad4b9a45b7","initials":"TH"},{"url":"http://localhost:4200/candidate-detail?user=5db942588780a117ec003ad3","why_work":"ad4b9a45b7","initials":"TH"}]}}},"level":"debug","message":"Sending email with sendGrid"}
{"sendGridOptions":{"templateId":"d-951e44e917e340798954c638f151bf76","subject":"New candidates that match your search!","personalizations":[{"to":{"email":"2f8b8de5ff@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara","company_name":"849d21a815","candidates":{"count":2,"list":[{"url":"http://localhost:4200/candidate-detail?user=5db942588780a117ec003ade","why_work":"ad4b9a45b7","initials":"TH"},{"url":"http://localhost:4200/candidate-detail?user=5db942588780a117ec003ad3","why_work":"ad4b9a45b7","initials":"TH"}]}}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"48a2c16527@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU4ODc4MGExMTdlYzAwM2FlYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzIsImV4cCI6MTU3MjQyNTgzMn0.H4O_28fZ3ddUz9UOumxFd4Wstab6In10FtUmHE6mGHg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Senegalese' ],
  candidate: 
   { base_country: 'Mali',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 13275,
     current_currency: '£ GBP',
     why_work: 'ad4b9a45b7',
     description: 'f0948ccf8e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 32777,
        currency: '$ USD',
        employment_availability: 'Longer than 3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e03511b7be',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942568780a117ec003ac4","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"2f8b8de5ff@example.com","password_hash":"542e634c656c61705373d4eea856110ef5db1e55aff6ed74b0713ecc3f3edb7bf2809b4015773f9c944ddb60ec259ee17e57cc6e200448a4d859e60b5e5f44b9","salt":"kuwKXGYPlWhrTmp76NpiA==","type":"company","created_date":"2019-10-30T07:57:10.763Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxfQ.7CDFFuvf-DXwapmR-iicIC9V63WUfDAKzdDNUGskKCk","session_started":"2019-10-30T07:57:11.379Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxLCJleHAiOjE1NzI0MjU4MzF9.oT7j0AarlDG9vx4zz5CnW9gRbNK5-jdj78c-Xs28AOc"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 849d21a815 with user_id 5db942568780a117ec003ac4","level":"debug"}
{"message":"Company has recently been sent an email","level":"debug"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"54063cb77a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU4ODc4MGExMTdlYzAwM2FmNiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzIsImV4cCI6MTU3MjQyNTgzMn0.Ubiqw28N4EHGqwmMrzcnd4msAMWDCFYojUTaCeZSI54"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Latvian' ],
  candidate: 
   { base_country: 'Morocco',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 39510,
     current_currency: '€ EUR',
     why_work: '09759fab13',
     description: '5c2bac3a4b',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 97044,
        currency: '$ USD',
        employment_availability: '1 month' },
     interest_areas: [ 'Enterprise blockchain', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ec0517ddb0',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"49f43bc0d1@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU4ODc4MGExMTdlYzAwM2IwNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzIsImV4cCI6MTU3MjQyNTgzMn0.Bmjrt1dFyc9-YOeL9kOYoLA_GCvRCCXKPPvbeMBuW5Y"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Latvian' ],
  candidate: 
   { base_country: 'Morocco',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 39510,
     current_currency: '€ EUR',
     why_work: '09759fab13',
     description: '5c2bac3a4b',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 97044,
        currency: '$ USD',
        employment_availability: '1 month' },
     interest_areas: [ 'Enterprise blockchain', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ec0517ddb0',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db942568780a117ec003ac4","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"2f8b8de5ff@example.com","password_hash":"542e634c656c61705373d4eea856110ef5db1e55aff6ed74b0713ecc3f3edb7bf2809b4015773f9c944ddb60ec259ee17e57cc6e200448a4d859e60b5e5f44b9","salt":"kuwKXGYPlWhrTmp76NpiA==","type":"company","created_date":"2019-10-30T07:57:10.763Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxfQ.7CDFFuvf-DXwapmR-iicIC9V63WUfDAKzdDNUGskKCk","session_started":"2019-10-30T07:57:11.379Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU2ODc4MGExMTdlYzAwM2FjNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMC43NjNaIiwiaWF0IjoxNTcyNDIyMjMxLCJleHAiOjE1NzI0MjU4MzF9.oT7j0AarlDG9vx4zz5CnW9gRbNK5-jdj78c-Xs28AOc"}]},"job_ids":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{"message":"Checking company 849d21a815 with user_id 5db942568780a117ec003ac4","level":"debug"}
{"message":"Company has recently been sent an email","level":"debug"}
      √ should only sent new approved candidates that are approved after the saved search is updated (1820ms)
dropping database

  cron
    send email to user on new message
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"df8e0d74e9@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjU5ODc4MGExMTdlYzAwM2IxMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxMy4xODNaIiwiaWF0IjoxNTcyNDIyMjMzLCJleHAiOjE1NzI0MjU4MzN9.IylBG_keFQmIdHopUANi9kNQ4K5WxhcWOtRurVc86u0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0c496ca311@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjVhODc4MGExMTdlYzAwM2IxMyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzQsImV4cCI6MTU3MjQyNTgzNH0.kEmgt1uWs__j6zHCyAv8U_w1BlrufSM50gXyROlATmY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Nigerian' ],
  candidate: 
   { base_country: 'Thailand',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 2913,
     current_currency: '£ GBP',
     why_work: 'b4759fc3df',
     description: '59cf9cb9ea',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 39848,
        currency: '£ GBP',
        employment_availability: '2 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '64b3bb47f3',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"0c496ca311@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422234465,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"df8e0d74e9@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422234495,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send email to the user right after they have been sent (1319ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"fbc5a0c930@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjViODc4MGExMTdlYzAwM2IyNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxNS4xNDZaIiwiaWF0IjoxNTcyNDIyMjM2LCJleHAiOjE1NzI0MjU4MzZ9.YevEt2Ch6tSz2irlurt06LVXDTb-u9FJfXElBYhkpaE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"7dd499bd28@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjVjODc4MGExMTdlYzAwM2IyOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzYsImV4cCI6MTU3MjQyNTgzNn0.dkx-90HejMkaCrndyI6WP_5sleaduF97MhWJ5QfuwDg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Senegalese' ],
  candidate: 
   { base_country: 'Romania',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 16477,
     current_currency: '£ GBP',
     why_work: '71e12f27da',
     description: '22387354be',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 78754,
        currency: '£ GBP',
        employment_availability: '2 weeks' },
     interest_areas: [ 'Smart contract development', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '67fb9bdc5d',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"fbc5a0c930@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422236475,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572422236499,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572422236543,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572422236583,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"fbc5a0c930@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422236634,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send only send one email if messages are sent after 20s (1498ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"406ab54e61@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjVjODc4MGExMTdlYzAwM2I1MSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNzo1NzoxNi45MDJaIiwiaWF0IjoxNTcyNDIyMjM3LCJleHAiOjE1NzI0MjU4Mzd9.XKUdkwOPzyIKwb7zdIpYxGUZOKykV4qworVeyom_8VE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"c0afe3d636@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjVkODc4MGExMTdlYzAwM2I1NCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzcsImV4cCI6MTU3MjQyNTgzN30.Fh5BBqat1WO5aPUvLJlWqQ494RwQ7QOaaZiSAAbr6NQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'French' ],
  candidate: 
   { base_country: 'Taiwan',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 20187,
     current_currency: '£ GBP',
     why_work: '58bb36bc56',
     description: 'f5add40f3e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 60680,
        currency: '$ USD',
        employment_availability: '1 month' },
     interest_areas: [ 'Smart contract development', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3cc82262af',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"406ab54e61@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422237709,"level":"info","message":"Unread chat messages email script was executed"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"bdbe07d70b@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjk0MjVkODc4MGExMTdlYzAwM2I2NyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MjIyMzcsImV4cCI6MTU3MjQyNTgzN30.X1kqAINp_9ptbxFImR48BJQdsTIM_O3ZApKTsNA3Y8E"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Eritrean' ],
  candidate: 
   { base_country: 'Laos',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 41528,
     current_currency: '€ EUR',
     why_work: '2c5569d804',
     description: '9afbfce799',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 24652,
        currency: '$ USD',
        employment_availability: '3 months' },
     interest_areas: [ 'Enterprise blockchain', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ac057af718',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"ApplicationError: Approach already accepted\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:26970)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","code":400,"requestID":"e4b10b10-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"receiver_id":"5db9425c8780a117ec003b51","msg_tag":"approach_accepted","message":{"approach_accepted":{"message":"I am interested, lets chat!"}}}},"level":"warn","message":"Approach already accepted"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"bdbe07d70b@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572422237765,"level":"info","message":"Unread chat messages email script was executed"}
{"stack":"ApplicationError: Approach has not been accepted\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at checkJobOfferAccepted (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:22359)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","code":400,"requestID":"e4b529c0-faea-11e9-915a-07bba0f11457","request":{"params":{},"body":{"receiver_id":"5db9425c8780a117ec003b51","msg_tag":"normal","message":{"normal":{"message":"hi man...."}}}},"level":"warn","message":"Approach has not been accepted"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572422237790,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send only send one email if messages are sent from two users (893ms)
dropping database

  email transformations
    √ it should add environment to regular email
    √ it should add environment to email with +
    √ it should remove environment to regular email
    √ it should remove environment to email with +

  zoho tokens
    using Zoho CRM API
      √ should get a new auth token and call the API
      √ should get new auth token


  82 passing (2m)

----------------------------------------------------|----------|----------|----------|----------|-------------------|
File                                                |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------------------------------------|----------|----------|----------|----------|-------------------|
All files                                           |    68.81 |    49.87 |    61.44 |     71.4 |                   |
 server                                             |    68.72 |    55.26 |    55.56 |    70.05 |                   |
  cron.js                                           |    56.52 |       50 |       20 |    56.52 |... 25,37,46,47,48 |
  routes-v2.js                                      |    71.05 |    57.69 |    66.67 |       75 |... 37,138,140,141 |
  server.js                                         |    88.37 |       25 |    66.67 |    88.37 |    40,53,54,55,65 |
  settings.js                                       |    54.72 |    55.56 |      100 |    54.72 |... 8,73,75,78,112 |
 server/controller/api-v2/conversations             |       75 |       50 |    66.67 |       75 |                   |
  get.controller.js                                 |       75 |       50 |    66.67 |       75 |... 66,75,79,80,91 |
 server/controller/api-v2/conversations/messages    |       80 |    44.44 |       80 |       80 |                   |
  get.controller.js                                 |    82.14 |       50 |      100 |    82.14 |    30,37,53,56,58 |
  patch.controller.js                               |    76.47 |        0 |    66.67 |    76.47 |       23,24,25,27 |
 server/controller/api-v2/crons                     |    46.43 |        0 |        0 |    46.43 |                   |
  get.controller.js                                 |    46.43 |        0 |        0 |    46.43 |... 53,55,56,58,61 |
 server/controller/api-v2/email_template            |    90.57 |       50 |      100 |    94.12 |                   |
  patch.controller.js                               |    89.66 |       50 |      100 |    92.86 |             54,68 |
  post.controller.js                                |    91.67 |       50 |      100 |    95.65 |                50 |
 server/controller/api-v2/email_template/search     |    92.86 |       50 |      100 |      100 |                   |
  get.controller.js                                 |    92.86 |       50 |      100 |      100 |                21 |
 server/controller/api-v2/health                    |      100 |      100 |      100 |      100 |                   |
  get.controller.js                                 |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/jobs                      |    95.56 |    91.43 |      100 |    98.13 |                   |
  get.controller.js                                 |    95.65 |    83.33 |      100 |    95.45 |                41 |
  patch.controller.js                               |    94.05 |    91.07 |      100 |    98.28 |               144 |
  post.controller.js                                |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/locations                 |     87.1 |       50 |      100 |     87.1 |                   |
  get.controller.js                                 |     87.1 |       50 |      100 |     87.1 |       40,45,55,56 |
 server/controller/api-v2/messages                  |    90.06 |    71.79 |      100 |    93.96 |                   |
  get.controller.js                                 |    94.74 |       50 |      100 |      100 |                25 |
  post.controller.js                                |    89.44 |    72.37 |      100 |    93.13 |... 80,381,409,410 |
 server/controller/api-v2/pages                     |    83.72 |       50 |      100 |    83.72 |                   |
  get.controller.js                                 |    86.67 |    42.86 |      100 |    86.67 |             24,30 |
  post.controller.js                                |    82.14 |    57.14 |      100 |    82.14 |    58,59,60,67,69 |
 server/controller/api-v2/referral                  |    78.85 |       45 |      100 |    83.33 |                   |
  get.controller.js                                 |    81.48 |    42.86 |      100 |     87.5 |          42,43,49 |
  post.controller.js                                |       76 |       50 |      100 |    79.17 |    29,39,40,41,42 |
 server/controller/api-v2/referral/email            |      100 |      100 |      100 |      100 |                   |
  post.controller.js                                |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/skills                    |    47.62 |        0 |        0 |    47.62 |                   |
  get.controller.js                                 |    47.62 |        0 |        0 |    47.62 |... 31,32,33,34,38 |
 server/controller/api-v2/statistics                |       88 |    66.13 |    92.31 |    87.13 |                   |
  get.controller.js                                 |       88 |    66.13 |    92.31 |    87.13 |... 86,202,233,237 |
 server/controller/api-v2/subscribers               |       50 |       25 |      100 |       50 |                   |
  post.controller.js                                |       50 |       25 |      100 |       50 |... 41,42,48,49,50 |
 server/controller/api-v2/users                     |    82.47 |    52.08 |    88.89 |    82.95 |                   |
  filterReturnData.js                               |    93.18 |    59.09 |    85.71 |     92.5 |          52,53,75 |
  patch.controller.js                               |    73.58 |    46.15 |      100 |       75 |... 75,76,77,87,88 |
 server/controller/api-v2/users/auth                |    64.86 |    31.48 |      100 |    66.06 |                   |
  delete.controller.js                              |      100 |      100 |      100 |      100 |                   |
  post.controller.js                                |    53.62 |    28.57 |      100 |    55.22 |... 05,107,112,135 |
  verify_send_email.js                              |    68.18 |    41.67 |      100 |    68.18 |... 14,15,28,29,34 |
 server/controller/api-v2/users/auth/password       |    95.24 |       50 |      100 |    95.24 |                   |
  put.controller.js                                 |    95.24 |       50 |      100 |    95.24 |                40 |
 server/controller/api-v2/users/auth/password/reset |     87.5 |       50 |      100 |     87.5 |                   |
  post.controller.js                                |    85.19 |       50 |      100 |    85.19 |       39,40,41,50 |
  put.controller.js                                 |    90.48 |       50 |      100 |    90.48 |             39,43 |
 server/controller/api-v2/users/candidates          |    61.54 |    46.36 |       80 |    67.91 |                   |
  get.controller.js                                 |       46 |    20.83 |      100 |    48.89 |... 67,68,78,79,82 |
  patch.controller.js                               |    66.33 |    56.25 |    71.43 |    75.84 |... 89,495,528,541 |
  post.controller.js                                |    59.49 |    19.44 |      100 |    63.51 |... 01,117,149,150 |
 server/controller/api-v2/users/candidates/history  |    90.57 |    57.69 |      100 |    93.88 |                   |
  post.controller.js                                |    90.57 |    57.69 |      100 |    93.88 |         59,67,104 |
 server/controller/api-v2/users/candidates/search   |    58.71 |    62.09 |    43.75 |    61.02 |                   |
  post.controller.js                                |    84.52 |    73.08 |      100 |    92.75 |... 40,167,168,186 |
  searchCandidates.js                               |    46.67 |    56.44 |       25 |     47.9 |... 72,373,375,376 |
 server/controller/api-v2/users/companies           |    72.12 |    51.97 |    77.78 |    76.14 |                   |
  get.controller.js                                 |    52.94 |    27.59 |       50 |    57.45 |... 74,78,80,82,84 |
  patch.controller.js                               |       75 |    60.95 |      100 |       80 |... 44,249,250,266 |
  post.controller.js                                |    84.31 |    38.89 |      100 |       86 |... 51,153,163,171 |
 server/controller/api-v2/users/companies/search    |    82.26 |    67.65 |      100 |    83.33 |                   |
  post.controller.js                                |    82.26 |    67.65 |      100 |    83.33 |... 99,106,109,133 |
 server/controller/api-v2/users/companies/status    |    95.24 |       50 |      100 |      100 |                   |
  post.controller.js                                |    95.24 |       50 |      100 |      100 |                33 |
 server/controller/api-v2/users/email               |    91.43 |       50 |      100 |    91.43 |                   |
  patch.controller.js                               |    88.24 |       50 |      100 |    88.24 |             34,38 |
  post.controller.js                                |    94.44 |       50 |      100 |    94.44 |                35 |
 server/controller/api-v2/users/settings            |    92.86 |    84.62 |      100 |       95 |                   |
  patch.controller.js                               |    92.86 |    84.62 |      100 |       95 |             57,58 |
 server/controller/middleware                       |    72.11 |    51.28 |    86.36 |    81.25 |                   |
  asyncMiddleware.js                                |      100 |       75 |      100 |      100 |                 2 |
  auth-v2.js                                        |    64.41 |    47.22 |     87.5 |    82.61 |... 54,55,56,64,73 |
  errorHandler.js                                   |    95.45 |    71.43 |      100 |      100 |       16,17,18,19 |
  multer.js                                         |     69.7 |       70 |    83.33 |    71.88 |... 24,25,26,55,60 |
  requestLogger.js                                  |       25 |        0 |        0 |       30 | 6,7,8,10,17,18,21 |
  sanitizer.js                                      |      100 |       50 |      100 |      100 |           6,10,13 |
 server/controller/services                         |    38.05 |    16.55 |    31.58 |    41.93 |                   |
  amplitude.js                                      |    31.58 |     12.5 |        0 |    31.58 |... 21,22,24,25,28 |
  crypto.js                                         |       90 |       50 |      100 |      100 |                 4 |
  currency.js                                       |      100 |      100 |      100 |      100 |                   |
  errors.js                                         |    84.62 |       50 |    66.67 |    84.62 |             26,34 |
  google.js                                         |    26.32 |        0 |        0 |    26.32 |... 26,27,35,36,38 |
  jwtToken.js                                       |    70.59 |    33.33 |      100 |    70.59 |    24,25,26,27,29 |
  linkedin.js                                       |     18.6 |        0 |        0 |    20.51 |... 91,102,103,104 |
  logger.js                                         |    69.23 |       50 |      100 |    69.23 |        9,18,29,41 |
  objects.js                                        |    62.16 |    16.67 |       50 |    62.16 |... 49,54,56,57,61 |
  sanitize.js                                       |      100 |      100 |      100 |      100 |                   |
  serviceSync.js                                    |    19.35 |     4.26 |    18.75 |    23.23 |... 37,338,340,343 |
  time.js                                           |    57.14 |      100 |       25 |    57.14 |             2,6,7 |
 server/controller/services/cron                    |     48.7 |    33.96 |       50 |    48.92 |                   |
  companyAutomaticEmailOfNewCandidate.js            |    77.78 |    55.56 |      100 |    76.81 |... 47,150,152,153 |
  newMessagesReminderEmail.js                       |    95.45 |       75 |      100 |    95.45 |                42 |
  serviceQueue.js                                   |    66.67 |      100 |        0 |    66.67 |                 4 |
  synchronizeSendGrid.js                            |    11.69 |        0 |        0 |    12.33 |... 58,160,161,166 |
  unreadChatMessagesReminder.js                     |    31.58 |        0 |        0 |    31.58 |... 31,32,33,34,38 |
 server/controller/services/email                   |    32.43 |       15 |     7.14 |    32.43 |                   |
  emails.js                                         |    85.71 |       50 |      100 |    85.71 |                11 |
  sendGrid.js                                       |    26.87 |     6.25 |        0 |    26.87 |... 60,164,165,167 |
 server/controller/services/email/emails            |    75.73 |       25 |    72.73 |    75.73 |                   |
  candidateHistory.js                               |      100 |      100 |      100 |      100 |                   |
  chatReminder.js                                   |    28.57 |      100 |        0 |    28.57 |       4,7,9,11,25 |
  companyApproved.js                                |      100 |      100 |      100 |      100 |                   |
  companyAutoNotification.js                        |      100 |      100 |      100 |      100 |                   |
  dtaDocEmail.js                                    |      100 |      100 |      100 |      100 |                   |
  forgotPassword.js                                 |    93.33 |       50 |      100 |    93.33 |                30 |
  newMessagesReminder.js                            |      100 |      100 |      100 |      100 |                   |
  referUser.js                                      |      100 |      100 |      100 |      100 |                   |
  verifyEmail.js                                    |      100 |      100 |      100 |      100 |                   |
  welcomeEmail.js                                   |    33.33 |      100 |        0 |    33.33 |    5,8,9,10,12,26 |
  youReferredACompany.js                            |    18.75 |        0 |        0 |    18.75 |... 37,47,52,58,67 |
 server/controller/services/zoho                    |    25.86 |        0 |     6.67 |       30 |                   |
  zoho.js                                           |    25.86 |        0 |     6.67 |       30 |... 10,111,116,125 |
 server/model                                       |    92.45 |       50 |    91.67 |    94.23 |                   |
  defaultMongoose.js                                |     87.5 |       50 |    91.67 |     91.3 |             50,61 |
  enumerations.js                                   |      100 |      100 |      100 |      100 |                   |
  regexes.js                                        |    83.33 |       50 |      100 |    83.33 |                 4 |
 server/model/mongoose                              |    82.17 |    41.18 |    56.25 |    83.12 |                   |
  cities.js                                         |       90 |      100 |       50 |       90 |                15 |
  companies.js                                      |    83.87 |    66.67 |    57.14 |    83.87 |    16,20,30,31,48 |
  email_templates.js                                |    91.67 |      100 |    66.67 |    91.67 |                14 |
  jobs.js                                           |      100 |      100 |      100 |      100 |                   |
  messages.js                                       |    91.67 |      100 |    66.67 |    91.67 |                19 |
  pages.js                                          |    91.67 |      100 |    66.67 |    91.67 |                19 |
  referrals.js                                      |       90 |      100 |       50 |       90 |                11 |
  skills.js                                         |       80 |      100 |        0 |       80 |             10,15 |
  sync_queue.js                                     |       80 |      100 |        0 |       80 |             10,14 |
  users.js                                          |    68.18 |    35.71 |       75 |    70.73 |... 48,49,50,51,52 |
 server/model/schemas                               |      100 |      100 |      100 |      100 |                   |
  candidates.js                                     |      100 |      100 |      100 |      100 |                   |
  cities.js                                         |      100 |      100 |      100 |      100 |                   |
  companies.js                                      |      100 |      100 |      100 |      100 |                   |
  email_templates.js                                |      100 |      100 |      100 |      100 |                   |
  jobs.js                                           |      100 |      100 |      100 |      100 |                   |
  messages.js                                       |      100 |      100 |      100 |      100 |                   |
  pages.js                                          |      100 |      100 |      100 |      100 |                   |
  referrals.js                                      |      100 |      100 |      100 |      100 |                   |
  skills.js                                         |      100 |      100 |      100 |      100 |                   |
  sync_queue.js                                     |      100 |      100 |      100 |      100 |                   |
  users.js                                          |      100 |      100 |      100 |      100 |                   |
----------------------------------------------------|----------|----------|----------|----------|-------------------|
