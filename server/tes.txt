
> authentication@1.0.0 test-windows D:\wamp64\www\workonblockchain.com\server
> set NODE_ENV=default && nyc mocha ./test --recursive --exit --timeout 7000

{"message":"Configuring local multer to /uploads folder","level":"info"}


{"message":"Server listening on port 4000","level":"info"}
  GET /conversations
    getting conversations
{"message":"Connected to mongodb database","level":"info"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2ea82cb3e1@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDA5NDExNTM3MWYzY2ViYzNhYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoxNy4xNjdaIiwiaWF0IjoxNTcyNDE2Nzc4LCJleHAiOjE1NzI0MjAzNzh9.320t1MElEY2vTDYTZ9pEsIQl8WI-YJYYWVX2o7cZNhs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1f843613ee@example.com","name":"5f884"}}],"templateData":{"firstName":"5f884","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBiNDExNTM3MWYzY2ViYzNhZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3NzksImV4cCI6MTU3MjQyMDM3OX0._cimfbZuiWvQa3AIJzzW8PIpT72TtZWn3CWDLK3DI00"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Egyptian' ],
  candidate: 
   { base_country: 'Serbia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 54270,
     current_currency: '$ USD',
     why_work: '27be35082b',
     description: '010d420515',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 54027,
        currency: '€ EUR',
        employment_availability: '2 months' },
     interest_areas: [ 'Smart contract development', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '8cd8d66a2c',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"conversations":[{"count":1,"unread_count":0,"_id":"5db92d0b4115371f3cebc3bc","user_id":"5db92d0b4115371f3cebc3af","last_message":"2019-10-30T06:26:19.309Z"}],"userID":"5db92d094115371f3cebc3ac","level":"debug","message":"converstaions"}
{"length":1,"level":"debug","message":"length"}
      √ it should get conversations (3434ms)
dropping database

  GET /conversations/:sender_id/messages/
    getting messages of a company or candidate
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0caaa13e31@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBiNDExNTM3MWYzY2ViYzNiZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoxOS42MjNaIiwiaWF0IjoxNTcyNDE2Nzc5LCJleHAiOjE1NzI0MjAzNzl9.hfmML_6dmPfcyLRjiU-FF3PazLhpOMaTV5QoYpVLcBk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2890e04426@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBiNDExNTM3MWYzY2ViYzNjMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3NzksImV4cCI6MTU3MjQyMDM3OX0.n9TgR7bxqQOv0K1wrQIZL97Ei0WFmg1XzKApap0ps1I"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get messages of a company or candidate (568ms)
dropping database

  PATCH /conversations/:sender_id/messages/
    updating conversations
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ede1881257@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBjNDExNTM3MWYzY2ViYzNjYSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyMC4zNTFaIiwiaWF0IjoxNTcyNDE2NzgwLCJleHAiOjE1NzI0MjAzODB9.l6n0IndkXN253yrLf5V3aEh2h5B-Z0BQxfefpsrfVos"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a060fcc221@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBjNDExNTM3MWYzY2ViYzNjZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODAsImV4cCI6MTU3MjQyMDM4MH0.HcrjQj9RtlpV5yIbSHESHWgSge8oKc-Ybg3j-lPNbgc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update unread count (605ms)
dropping database

  Get /email_templates
    get email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a35220baf7@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODEsImV4cCI6MTU3MjQyMDM4MX0.sALAd9wbQbqrpZE1ieczpox-AGRclgJV-EQ8vatd1hg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
Response {
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  res: 
   IncomingMessage {
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [BufferList],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: true,
        endEmitted: true,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        destroyed: false,
        defaultEncoding: 'utf8',
        awaitDrain: 0,
        readingMore: false,
        decoder: [StringDecoder],
        encoding: 'utf8' },
     readable: false,
     domain: null,
     _events: 
      { end: [Array],
        data: [Array],
        error: [Array],
        close: [Function: bound emit] },
     _eventsCount: 4,
     _maxListeners: undefined,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2231,
        [Symbol(bytesRead)]: 700 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2231,
        [Symbol(bytesRead)]: 700 },
     httpVersionMajor: 1,
     httpVersionMinor: 1,
     httpVersion: '1.1',
     complete: true,
     headers: 
      { 'access-control-allow-origin': '*',
        'x-dns-prefetch-control': 'off',
        'x-frame-options': 'SAMEORIGIN',
        'strict-transport-security': 'max-age=15552000; includeSubDomains',
        'x-download-options': 'noopen',
        'x-content-type-options': 'nosniff',
        'x-xss-protection': '1; mode=block',
        'content-type': 'application/json; charset=utf-8',
        'content-length': '266',
        etag: 'W/"10a-4GCBthjjBhdY1scvWhRAq1bv17M"',
        date: 'Wed, 30 Oct 2019 06:26:21 GMT',
        connection: 'close' },
     rawHeaders: 
      [ 'Access-Control-Allow-Origin',
        '*',
        'X-DNS-Prefetch-Control',
        'off',
        'X-Frame-Options',
        'SAMEORIGIN',
        'Strict-Transport-Security',
        'max-age=15552000; includeSubDomains',
        'X-Download-Options',
        'noopen',
        'X-Content-Type-Options',
        'nosniff',
        'X-XSS-Protection',
        '1; mode=block',
        'Content-Type',
        'application/json; charset=utf-8',
        'Content-Length',
        '266',
        'ETag',
        'W/"10a-4GCBthjjBhdY1scvWhRAq1bv17M"',
        'Date',
        'Wed, 30 Oct 2019 06:26:21 GMT',
        'Connection',
        'close' ],
     trailers: {},
     rawTrailers: [],
     upgrade: false,
     url: '',
     method: null,
     statusCode: 200,
     statusMessage: 'OK',
     client: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2231,
        [Symbol(bytesRead)]: 700 },
     _consuming: true,
     _dumped: false,
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: false,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 0,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:51089\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODF9.vUXx6hJMpqHlHvrGEl05U-N70fmBqwR8OZnY4su7BGY\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'GET',
        path: '/v2/email_templates/search?admin=true',
        _ended: true,
        res: [Circular],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     text: '[{"_id":"5db92d0d4115371f3cebc3d8","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db92d0d4115371f3cebc3d5","updated_date":"2019-10-30T06:26:21.258Z","__v":0}]',
     read: [Function] },
  request: 
   Test {
     domain: null,
     _events: { end: [Function] },
     _eventsCount: 1,
     _maxListeners: undefined,
     _agent: false,
     _formData: null,
     method: 'get',
     url: 'http://127.0.0.1:51089/v2/email_templates/search?admin=true',
     _header: 
      { 'user-agent': 'node-superagent/3.8.3',
        authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODF9.vUXx6hJMpqHlHvrGEl05U-N70fmBqwR8OZnY4su7BGY' },
     header: 
      { 'User-Agent': 'node-superagent/3.8.3',
        Authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODF9.vUXx6hJMpqHlHvrGEl05U-N70fmBqwR8OZnY4su7BGY' },
     writable: true,
     _redirects: 0,
     _maxRedirects: 5,
     cookies: '',
     qs: {},
     _query: [],
     qsRaw: [],
     _redirectList: [],
     _streamRequest: false,
     app: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        _connections: 0,
        _handle: null,
        _usingWorkers: false,
        _workers: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        keepAliveTimeout: 5000,
        _pendingResponseData: 0,
        maxHeadersCount: null,
        _connectionKey: '6::::0',
        [Symbol(asyncId)]: 2229 },
     _okCallback: [Function],
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: false,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 0,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:51089\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODF9.vUXx6hJMpqHlHvrGEl05U-N70fmBqwR8OZnY4su7BGY\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'GET',
        path: '/v2/email_templates/search?admin=true',
        _ended: true,
        res: [IncomingMessage],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     protocol: 'http:',
     host: '127.0.0.1:51089',
     _endCalled: true,
     _callback: [Function],
     _fullfilledPromise: Promise { [Circular] },
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [ClientRequest],
        text: '[{"_id":"5db92d0d4115371f3cebc3d8","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db92d0d4115371f3cebc3d5","updated_date":"2019-10-30T06:26:21.258Z","__v":0}]',
        read: [Function] },
     response: [Circular],
     called: true },
  req: 
   ClientRequest {
     domain: null,
     _events: 
      { drain: [Function],
        error: [Function],
        prefinish: [Function: requestOnPrefinish] },
     _eventsCount: 3,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: true,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: false,
     sendDate: false,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: 0,
     _hasBody: true,
     _trailer: '',
     finished: true,
     _headerSent: true,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2231,
        [Symbol(bytesRead)]: 700 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 353,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 2231,
        [Symbol(bytesRead)]: 700 },
     _header: 'GET /v2/email_templates/search?admin=true HTTP/1.1\r\nHost: 127.0.0.1:51089\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODF9.vUXx6hJMpqHlHvrGEl05U-N70fmBqwR8OZnY4su7BGY\r\nConnection: close\r\n\r\n',
     _onPendingData: [Function: noopPendingOutput],
     agent: 
      Agent {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        defaultPort: 80,
        protocol: 'http:',
        options: [Object],
        requests: {},
        sockets: [Object],
        freeSockets: {},
        keepAliveMsecs: 1000,
        keepAlive: false,
        maxSockets: Infinity,
        maxFreeSockets: 256 },
     socketPath: undefined,
     timeout: undefined,
     method: 'GET',
     path: '/v2/email_templates/search?admin=true',
     _ended: true,
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [Circular],
        text: '[{"_id":"5db92d0d4115371f3cebc3d8","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db92d0d4115371f3cebc3d5","updated_date":"2019-10-30T06:26:21.258Z","__v":0}]',
        read: [Function] },
     aborted: undefined,
     timeoutCb: null,
     upgradeOrConnect: false,
     parser: null,
     maxHeadersCount: null,
     [Symbol(outHeadersKey)]: 
      { host: [Array],
        'accept-encoding': [Array],
        'user-agent': [Array],
        authorization: [Array] } },
  text: '[{"_id":"5db92d0d4115371f3cebc3d8","name":"Template 1","subject":"Template subject","body":"<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>","updated_by":"5db92d0d4115371f3cebc3d5","updated_date":"2019-10-30T06:26:21.258Z","__v":0}]',
  body: 
   [ { _id: '5db92d0d4115371f3cebc3d8',
       name: 'Template 1',
       subject: 'Template subject',
       body: '<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>',
       updated_by: '5db92d0d4115371f3cebc3d5',
       updated_date: '2019-10-30T06:26:21.258Z',
       __v: 0 } ],
  files: undefined,
  buffered: true,
  headers: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '266',
     etag: 'W/"10a-4GCBthjjBhdY1scvWhRAq1bv17M"',
     date: 'Wed, 30 Oct 2019 06:26:21 GMT',
     connection: 'close' },
  header: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '266',
     etag: 'W/"10a-4GCBthjjBhdY1scvWhRAq1bv17M"',
     date: 'Wed, 30 Oct 2019 06:26:21 GMT',
     connection: 'close' },
  statusCode: 200,
  status: 200,
  statusType: 2,
  info: false,
  ok: true,
  redirect: false,
  clientError: false,
  serverError: false,
  error: false,
  created: false,
  accepted: false,
  noContent: false,
  badRequest: false,
  unauthorized: false,
  notAcceptable: false,
  forbidden: false,
  notFound: false,
  unprocessableEntity: false,
  type: 'application/json',
  charset: 'utf-8',
  links: {},
  setEncoding: [Function: bound ],
  redirects: [] }
      √ it should return email template doc (348ms)
dropping database

  Patch /email_templates
    update email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"082ccf0c40@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNkYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODEsImV4cCI6MTU3MjQyMDM4MX0.phjfHJJcBVTcJA23HahSy4mu-mAb1iCN5kYfh5nvsXc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update email template doc (303ms)
dropping database

  Post /email_templates
    add new email template doc
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e219c9a3df@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBkNDExNTM3MWYzY2ViYzNlMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODIsImV4cCI6MTU3MjQyMDM4Mn0.WXvM87t6lESa_SjNN9qIp1qwYqBmCr4frepeAzDPv-0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should add new email template doc (318ms)
dropping database

  healthCheck
    GET /v2/healthCheck
      √ it should get a successful page
dropping database
{"stack":"ApplicationError: I am an application error\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\health\\get.controller.js:1:3351)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:2720\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3232\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/health?error=true","method":"GET","code":400,"requestID":"31073370-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"error":"true"},"body":{}},"level":"warn","message":"I am an application error"}
      √ it should throw an Application error
dropping database
{"stack":"Error: I am a normal error\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\health\\get.controller.js:1:3257)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:2720\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3232\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/health?error=true&raw=true","method":"GET","requestID":"31086bf0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"error":"true","raw":"true"},"body":{}},"level":"error","message":"I am a normal error"}
      √ it should throw a normal error
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5b9acdb387@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBlNDExNTM3MWYzY2ViYzNlOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyMi4zOTZaIiwiaWF0IjoxNTcyNDE2NzgyLCJleHAiOjE1NzI0MjAzODJ9.Y0STuXMzAuXdxXl1y_Xg2AMtrZ1Pf_WgfPlcJtM-a7s"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"856ec7c13f@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBmNDExNTM3MWYzY2ViYzNlZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyMy4wMDRaIiwiaWF0IjoxNTcyNDE2NzgzLCJleHAiOjE1NzI0MjAzODN9.JnXbhoyXFdJUDHMhsUNmtgkjEC0cQWFgwujp-Q5_EuI"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as company (231ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"317cb7f51b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDBmNDExNTM3MWYzY2ViYzNmZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyMy41MzhaIiwiaWF0IjoxNTcyNDE2NzgzLCJleHAiOjE1NzI0MjAzODN9.DUFmACPJ11FZioMghyB2pIpR0NWSBfSuVjtMWHE10Ns"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"83387774db@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEwNDExNTM3MWYzY2ViYzQwMyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNC4zMjJaIiwiaWF0IjoxNTcyNDE2Nzg0LCJleHAiOjE1NzI0MjAzODR9.e1EnI7fii75c3xZhI3d8g7rxnKmft9fsmJMtqr5MnVU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6286749694@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEwNDExNTM3MWYzY2ViYzQxMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNC40ODlaIiwiaWF0IjoxNTcyNDE2Nzg0LCJleHAiOjE1NzI0MjAzODR9.zUN_p7_mHxCi8vLzBTpNlZd6H5oFnaDR0FN_oacb6mc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as an admin (231ms)
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"81c85ab093@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEwNDExNTM3MWYzY2ViYzQxNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNC44MTVaIiwiaWF0IjoxNTcyNDE2Nzg1LCJleHAiOjE1NzI0MjAzODV9.e7p8QdnTywsX7vznfnoHYYL-aLvG-xEIaRxpInpLwy8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"30387366d6@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDExNDExNTM3MWYzY2ViYzQxYSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNS4zNzRaIiwiaWF0IjoxNTcyNDE2Nzg1LCJleHAiOjE1NzI0MjAzODV9.30ivcZcKQB2ADX50VVksKZ0b-BiiTIQF9TKqQ9Ag0cs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"15ada07117@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDExNDExNTM3MWYzY2ViYzQyMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNS40MzFaIiwiaWF0IjoxNTcyNDE2Nzg1LCJleHAiOjE1NzI0MjAzODV9.qGxmMt_Pyh3rdCXXIGImmC9hTWRoOBdOWfhITnwqH7M"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      1) it should patch a job as company
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"13b48c06a7@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDExNDExNTM3MWYzY2ViYzQzOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNS45NDNaIiwiaWF0IjoxNTcyNDE2Nzg2LCJleHAiOjE1NzI0MjAzODZ9.nijuSoT1atWzUWbGZ9vQeHp9DQFGbhEaVDmEvgqvS5I"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5283424777@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEyNDExNTM3MWYzY2ViYzQzZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNi41OTFaIiwiaWF0IjoxNTcyNDE2Nzg2LCJleHAiOjE1NzI0MjAzODZ9.Eslt9OTQ6hUbKXrExpm9258UOEbNvoytkMEdmXBLsVg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"67fb643e8d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEyNDExNTM3MWYzY2ViYzQ0NSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNi42MjdaIiwiaWF0IjoxNTcyNDE2Nzg2LCJleHAiOjE1NzI0MjAzODZ9.F8qIN6A--Mpj2AI6t5WYRG_mGndSj_W9rUQGt49fSQ0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6bdea571ea@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEyNDExNTM3MWYzY2ViYzQ1MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNi43NzFaIiwiaWF0IjoxNTcyNDE2Nzg2LCJleHAiOjE1NzI0MjAzODZ9.6JqD8cV9OgW-cx-85ruZAX99b8RkS9KYNxHv3F5ncvU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should patch a job as an admin (196ms)
dropping database

  POST /jobs
    positive tests
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5d453f9941@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEzNDExNTM3MWYzY2ViYzQ1ZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNy4wNTlaIiwiaWF0IjoxNTcyNDE2Nzg3LCJleHAiOjE1NzI0MjAzODd9.QjEa-Y39yea1_Cmz49PEaaVU35GEIUdpKNyaZ0mDr98"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"bb6b749941@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDEzNDExNTM3MWYzY2ViYzQ2NSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyNy42MDNaIiwiaWF0IjoxNTcyNDE2Nzg3LCJleHAiOjE1NzI0MjAzODd9.Lrph9erfJhc3Ru34vW4NXdXYNmKR7J2o46PX8LogVTE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create a job for a company (192ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"afc537d74b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE0NDExNTM3MWYzY2ViYzQ3MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyOC4wMjlaIiwiaWF0IjoxNTcyNDE2Nzg4LCJleHAiOjE1NzI0MjAzODh9.AJ6tQPGGieIsGwv71AZtMmrxbieBk8OGzosWGJ8slSs"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"12f291ddf2@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE0NDExNTM3MWYzY2ViYzQ3OCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyOC44MTdaIiwiaWF0IjoxNTcyNDE2Nzg4LCJleHAiOjE1NzI0MjAzODh9.YFWLzJn-lDwLELVOX9nWPgumykoUe_ja-5FinNNljKY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b2ca42abac@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE0NDExNTM3MWYzY2ViYzQ3YiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyOC44NDhaIiwiaWF0IjoxNTcyNDE2Nzg4LCJleHAiOjE1NzI0MjAzODh9.B0xoxOo7be8a_OYOdiJtkK79oZfoZeScDU5AcS3i5GU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create a job for an admin (305ms)
dropping database

  Auto suggest cities options
    getting locations
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e634186f10@example.com","name":"6056d"}}],"templateData":{"firstName":"6056d","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE1NDExNTM3MWYzY2ViYzQ4OSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3ODksImV4cCI6MTU3MjQyMDM4OX0.acuSRimceqOrDvXMGRo_MkNY-QIK1Xnav91vIQujNpc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ locations: [ { remote: true } ] }
      √ it should get match options (338ms)
dropping database

  GET /messages
    getting messages
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"fc87b2cd03@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE1NDExNTM3MWYzY2ViYzQ4YyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjoyOS45MTZaIiwiaWF0IjoxNTcyNDE2NzkwLCJleHAiOjE1NzI0MjAzOTB9.m_DUt6S_BPfzYPKS5XEMyOlbmI2EMwBicvbXGTSpNt8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"55d05dcc1c@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE2NDExNTM3MWYzY2ViYzQ4ZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTAsImV4cCI6MTU3MjQyMDM5MH0.h75qsiUT89A2nRaiQxMjrGkt4_uAWm4ePAjcFLiJKYQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get messages (506ms)
dropping database

  POST /messages
    authorization and control
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"d93bfb0a33@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE2NDExNTM3MWYzY2ViYzQ5NiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMC41NjlaIiwiaWF0IjoxNTcyNDE2NzkwLCJleHAiOjE1NzI0MjAzOTB9.4F6o1s7VmxaJKp-fFHgBWHRFdy6axEIaE6fZ__h9scY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e02aad78b1@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE2NDExNTM3MWYzY2ViYzQ5OSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTAsImV4cCI6MTU3MjQyMDM5MH0.nza--9AhhLtiVAJwaSZ05a4hKtUMW6ieNgKk7bQbdns"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Comoran' ],
  candidate: 
   { base_country: 'Argentina',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 66309,
     current_currency: '$ USD',
     why_work: 'fdf5cf2ec1',
     description: 'f020d27f30',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 82495,
        currency: '$ USD',
        employment_availability: '3 months' },
     interest_areas: [ 'Enterprise blockchain', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '51085081ae',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"Error: ValidationError: receiver_id: Path `receiver_id` is required.\n    at validateObject (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:3:204)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:413\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3062\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at middleware (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\sanitizer.js:1:2911)\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","requestID":"36215a70-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"not_a_field":"my id","msg_tag":"approach"}},"level":"error","message":"ValidationError: receiver_id: Path `receiver_id` is required."}
      √ it should should fail with wrong body schema (372ms)
dropping database
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","requestID":"363c5c80-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"receiver_id":"my id","msg_tag":"approach"}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
      √ it should should fail with invalid jwtToken
dropping database
    { msg_tag:"approach" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2f4e3db3d8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxLCJleHAiOjE1NzI0MjAzOTF9.GBtAOPXpq5Qk-YqSiOCGXELtporrGrajqfPXOjemhpY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"43aadc51eb@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTEsImV4cCI6MTU3MjQyMDM5MX0.akEO-7fwMI2dwq-blwSDIjVzXcrsY3zHtN4x5IWwAkw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Peruvian' ],
  candidate: 
   { base_country: 'Sao Tome & Principe',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 23156,
     current_currency: '£ GBP',
     why_work: 'a73725d1ba',
     description: '27cef7c182',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 48906,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: [ 'I don\'t know', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '7979e5272f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
Response {
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  res: 
   IncomingMessage {
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [BufferList],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: true,
        endEmitted: true,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        destroyed: false,
        defaultEncoding: 'utf8',
        awaitDrain: 0,
        readingMore: false,
        decoder: [StringDecoder],
        encoding: 'utf8' },
     readable: false,
     domain: null,
     _events: 
      { end: [Array],
        data: [Array],
        error: [Array],
        close: [Function: bound emit] },
     _eventsCount: 4,
     _maxListeners: undefined,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 787,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10077,
        [Symbol(bytesRead)]: 940 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 787,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10077,
        [Symbol(bytesRead)]: 940 },
     httpVersionMajor: 1,
     httpVersionMinor: 1,
     httpVersion: '1.1',
     complete: true,
     headers: 
      { 'access-control-allow-origin': '*',
        'x-dns-prefetch-control': 'off',
        'x-frame-options': 'SAMEORIGIN',
        'strict-transport-security': 'max-age=15552000; includeSubDomains',
        'x-download-options': 'noopen',
        'x-content-type-options': 'nosniff',
        'x-xss-protection': '1; mode=block',
        'content-type': 'application/json; charset=utf-8',
        'content-length': '506',
        etag: 'W/"1fa-q0s/6zeer+663g0RSv+55QvJAD4"',
        date: 'Wed, 30 Oct 2019 06:26:31 GMT',
        connection: 'close' },
     rawHeaders: 
      [ 'Access-Control-Allow-Origin',
        '*',
        'X-DNS-Prefetch-Control',
        'off',
        'X-Frame-Options',
        'SAMEORIGIN',
        'Strict-Transport-Security',
        'max-age=15552000; includeSubDomains',
        'X-Download-Options',
        'noopen',
        'X-Content-Type-Options',
        'nosniff',
        'X-XSS-Protection',
        '1; mode=block',
        'Content-Type',
        'application/json; charset=utf-8',
        'Content-Length',
        '506',
        'ETag',
        'W/"1fa-q0s/6zeer+663g0RSv+55QvJAD4"',
        'Date',
        'Wed, 30 Oct 2019 06:26:31 GMT',
        'Connection',
        'close' ],
     trailers: {},
     rawTrailers: [],
     upgrade: false,
     url: '',
     method: null,
     statusCode: 200,
     statusMessage: 'OK',
     client: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 787,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [ClientRequest],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10077,
        [Symbol(bytesRead)]: 940 },
     _consuming: true,
     _dumped: false,
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: true,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 351,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:51191\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxfQ.uc54syF4sjZKLRobELQkrr_C6gcXpQRyW4g-holvB0M\r\nContent-Type: application/json\r\nContent-Length: 351\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'POST',
        path: '/v2/messages',
        _ended: true,
        res: [Circular],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     text: '{"_id":"5db92d174115371f3cebc4b4","sender_id":"5db92d174115371f3cebc4a6","receiver_id":"5db92d174115371f3cebc4a9","msg_tag":"approach","date_created":"2019-10-30T06:26:31.477Z","message":{"approach":{"_id":"5db92d174115371f3cebc4b5","employee":{"job_title":"e59499c924","annual_salary":9405,"currency":"$ USD","employment_type":"Full time","location":"PWD Islamabad","employment_description":"ef2cb781f50fce00d54b69278743b4662cb1f85f18e9bad87823a2500a29fb3cd21f5f18b83e4bd4638384f30a2034b6f124"}}},"__v":0}',
     read: [Function] },
  request: 
   Test {
     domain: null,
     _events: { end: [Function] },
     _eventsCount: 1,
     _maxListeners: undefined,
     _agent: false,
     _formData: null,
     method: 'post',
     url: 'http://127.0.0.1:51191/v2/messages',
     _header: 
      { 'user-agent': 'node-superagent/3.8.3',
        authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxfQ.uc54syF4sjZKLRobELQkrr_C6gcXpQRyW4g-holvB0M',
        'content-type': 'application/json' },
     header: 
      { 'User-Agent': 'node-superagent/3.8.3',
        Authorization: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxfQ.uc54syF4sjZKLRobELQkrr_C6gcXpQRyW4g-holvB0M',
        'Content-Type': 'application/json' },
     writable: true,
     _redirects: 0,
     _maxRedirects: 5,
     cookies: '',
     qs: {},
     _query: [],
     qsRaw: [],
     _redirectList: [],
     _streamRequest: false,
     app: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        _connections: 0,
        _handle: null,
        _usingWorkers: false,
        _workers: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        keepAliveTimeout: 5000,
        _pendingResponseData: 0,
        maxHeadersCount: null,
        _connectionKey: '6::::0',
        [Symbol(asyncId)]: 10075 },
     _okCallback: [Function],
     _data: 
      { receiver_id: 5db92d174115371f3cebc4a9,
        msg_tag: 'approach',
        message: [Object] },
     req: 
      ClientRequest {
        domain: null,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: true,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: false,
        useChunkedEncodingByDefault: true,
        sendDate: false,
        _removedConnection: false,
        _removedContLen: false,
        _removedTE: false,
        _contentLength: 351,
        _hasBody: true,
        _trailer: '',
        finished: true,
        _headerSent: true,
        socket: [Socket],
        connection: [Socket],
        _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:51191\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxfQ.uc54syF4sjZKLRobELQkrr_C6gcXpQRyW4g-holvB0M\r\nContent-Type: application/json\r\nContent-Length: 351\r\nConnection: close\r\n\r\n',
        _onPendingData: [Function: noopPendingOutput],
        agent: [Agent],
        socketPath: undefined,
        timeout: undefined,
        method: 'POST',
        path: '/v2/messages',
        _ended: true,
        res: [IncomingMessage],
        aborted: undefined,
        timeoutCb: null,
        upgradeOrConnect: false,
        parser: null,
        maxHeadersCount: null,
        [Symbol(outHeadersKey)]: [Object] },
     protocol: 'http:',
     host: '127.0.0.1:51191',
     _endCalled: true,
     _callback: [Function],
     _fullfilledPromise: Promise { [Circular] },
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [ClientRequest],
        text: '{"_id":"5db92d174115371f3cebc4b4","sender_id":"5db92d174115371f3cebc4a6","receiver_id":"5db92d174115371f3cebc4a9","msg_tag":"approach","date_created":"2019-10-30T06:26:31.477Z","message":{"approach":{"_id":"5db92d174115371f3cebc4b5","employee":{"job_title":"e59499c924","annual_salary":9405,"currency":"$ USD","employment_type":"Full time","location":"PWD Islamabad","employment_description":"ef2cb781f50fce00d54b69278743b4662cb1f85f18e9bad87823a2500a29fb3cd21f5f18b83e4bd4638384f30a2034b6f124"}}},"__v":0}',
        read: [Function] },
     response: [Circular],
     called: true },
  req: 
   ClientRequest {
     domain: null,
     _events: 
      { drain: [Function],
        error: [Function],
        prefinish: [Function: requestOnPrefinish] },
     _eventsCount: 3,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: true,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: true,
     sendDate: false,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: 351,
     _hasBody: true,
     _trailer: '',
     finished: true,
     _headerSent: true,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 787,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10077,
        [Symbol(bytesRead)]: 940 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: null,
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 8,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _bytesDispatched: 787,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        read: [Function],
        _consuming: true,
        _idleNext: null,
        _idlePrev: null,
        _idleTimeout: -1,
        [Symbol(asyncId)]: 10077,
        [Symbol(bytesRead)]: 940 },
     _header: 'POST /v2/messages HTTP/1.1\r\nHost: 127.0.0.1:51191\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: node-superagent/3.8.3\r\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS4xMzNaIiwiaWF0IjoxNTcyNDE2NzkxfQ.uc54syF4sjZKLRobELQkrr_C6gcXpQRyW4g-holvB0M\r\nContent-Type: application/json\r\nContent-Length: 351\r\nConnection: close\r\n\r\n',
     _onPendingData: [Function: noopPendingOutput],
     agent: 
      Agent {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        defaultPort: 80,
        protocol: 'http:',
        options: [Object],
        requests: {},
        sockets: [Object],
        freeSockets: {},
        keepAliveMsecs: 1000,
        keepAlive: false,
        maxSockets: Infinity,
        maxFreeSockets: 256 },
     socketPath: undefined,
     timeout: undefined,
     method: 'POST',
     path: '/v2/messages',
     _ended: true,
     res: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: true,
        _dumped: false,
        req: [Circular],
        text: '{"_id":"5db92d174115371f3cebc4b4","sender_id":"5db92d174115371f3cebc4a6","receiver_id":"5db92d174115371f3cebc4a9","msg_tag":"approach","date_created":"2019-10-30T06:26:31.477Z","message":{"approach":{"_id":"5db92d174115371f3cebc4b5","employee":{"job_title":"e59499c924","annual_salary":9405,"currency":"$ USD","employment_type":"Full time","location":"PWD Islamabad","employment_description":"ef2cb781f50fce00d54b69278743b4662cb1f85f18e9bad87823a2500a29fb3cd21f5f18b83e4bd4638384f30a2034b6f124"}}},"__v":0}',
        read: [Function] },
     aborted: undefined,
     timeoutCb: null,
     upgradeOrConnect: false,
     parser: null,
     maxHeadersCount: null,
     [Symbol(outHeadersKey)]: 
      { host: [Array],
        'accept-encoding': [Array],
        'user-agent': [Array],
        authorization: [Array],
        'content-type': [Array],
        'content-length': [Array] } },
  text: '{"_id":"5db92d174115371f3cebc4b4","sender_id":"5db92d174115371f3cebc4a6","receiver_id":"5db92d174115371f3cebc4a9","msg_tag":"approach","date_created":"2019-10-30T06:26:31.477Z","message":{"approach":{"_id":"5db92d174115371f3cebc4b5","employee":{"job_title":"e59499c924","annual_salary":9405,"currency":"$ USD","employment_type":"Full time","location":"PWD Islamabad","employment_description":"ef2cb781f50fce00d54b69278743b4662cb1f85f18e9bad87823a2500a29fb3cd21f5f18b83e4bd4638384f30a2034b6f124"}}},"__v":0}',
  body: 
   { _id: '5db92d174115371f3cebc4b4',
     sender_id: '5db92d174115371f3cebc4a6',
     receiver_id: '5db92d174115371f3cebc4a9',
     msg_tag: 'approach',
     date_created: '2019-10-30T06:26:31.477Z',
     message: { approach: [Object] },
     __v: 0 },
  files: undefined,
  buffered: true,
  headers: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '506',
     etag: 'W/"1fa-q0s/6zeer+663g0RSv+55QvJAD4"',
     date: 'Wed, 30 Oct 2019 06:26:31 GMT',
     connection: 'close' },
  header: 
   { 'access-control-allow-origin': '*',
     'x-dns-prefetch-control': 'off',
     'x-frame-options': 'SAMEORIGIN',
     'strict-transport-security': 'max-age=15552000; includeSubDomains',
     'x-download-options': 'noopen',
     'x-content-type-options': 'nosniff',
     'x-xss-protection': '1; mode=block',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '506',
     etag: 'W/"1fa-q0s/6zeer+663g0RSv+55QvJAD4"',
     date: 'Wed, 30 Oct 2019 06:26:31 GMT',
     connection: 'close' },
  statusCode: 200,
  status: 200,
  statusType: 2,
  info: false,
  ok: true,
  redirect: false,
  clientError: false,
  serverError: false,
  error: false,
  created: false,
  accepted: false,
  noContent: false,
  badRequest: false,
  unauthorized: false,
  notAcceptable: false,
  forbidden: false,
  notFound: false,
  unprocessableEntity: false,
  type: 'application/json',
  charset: 'utf-8',
  links: {},
  setEncoding: [Function: bound ],
  redirects: [] }
      √ it should send job approach (672ms)
dropping database
    { msg_tag:"approach_offer_accepted" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a5718bd6a8@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE3NDExNTM3MWYzY2ViYzRiOSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMS45NTFaIiwiaWF0IjoxNTcyNDE2NzkyLCJleHAiOjE1NzI0MjAzOTJ9.8JuO5eav4_NQXxexv6Ld1FYdp9mjTS2VTPoGh09hObM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"042b06651e@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE4NDExNTM3MWYzY2ViYzRiYyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTIsImV4cCI6MTU3MjQyMDM5Mn0.MZTNfCs2VHxweQvjlqjd0BgT3VfiScW_RlDfdCSKNdQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Brazilian' ],
  candidate: 
   { base_country: 'Seychelles',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 77287,
     current_currency: '$ USD',
     why_work: '1626c363f7',
     description: '4eee9f8bea',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 52255,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'Blockchain infrastructure', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '24e05db03f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should accept approach offer (596ms)
dropping database
    { msg_tag:"approach_rejected" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"60c0a99de2@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE4NDExNTM3MWYzY2ViYzRjYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMi42NzlaIiwiaWF0IjoxNTcyNDE2NzkyLCJleHAiOjE1NzI0MjAzOTJ9.R0-w7uTfO-TNJ_WoM2U4oq5cxMR6KusMs1U6tq9aI-c"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"51de2591f9@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE4NDExNTM3MWYzY2ViYzRjZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTIsImV4cCI6MTU3MjQyMDM5Mn0.iEjHeoVCirzuXwTP6BgAwy2Zqi-Il5N_fVQcrzXhBJM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Czech' ],
  candidate: 
   { base_country: 'Uganda',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 46975,
     current_currency: '£ GBP',
     why_work: '333051bfe4',
     description: '77d8d36714',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 15617,
        currency: '€ EUR',
        employment_availability: '1 month' },
     interest_areas: [ 'Public blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '694677e008',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should reject approach offer (639ms)
dropping database
    { msg_tag:"normal" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"446db18688@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDE5NDExNTM3MWYzY2ViYzRkZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozMy40MDJaIiwiaWF0IjoxNTcyNDE2Nzk0LCJleHAiOjE1NzI0MjAzOTR9.s7EDLvdNkcNCY06B-7N32EmcDLixx_tXk3I-AE1raes"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1c1f504efd@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFhNDExNTM3MWYzY2ViYzRlMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTQsImV4cCI6MTU3MjQyMDM5NH0.4vWC8ssgUhTLajaRSSq3LUaUJ277hqSbL8Su6-nQeW8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Emirian' ],
  candidate: 
   { base_country: 'Norway',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 64907,
     current_currency: '£ GBP',
     why_work: '587b36abb1',
     description: '1c6c28a49d',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 37413,
        currency: '£ GBP',
        employment_availability: '2 months' },
     interest_areas: [ 'I don\'t know', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '69a0b55b40',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send a message (960ms)
dropping database
    { msg_tag:"interview_offer" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8c3b8fca1e@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFhNDExNTM3MWYzY2ViYzRmOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNC41MTRaIiwiaWF0IjoxNTcyNDE2Nzk0LCJleHAiOjE1NzI0MjAzOTR9.ZF9iFKL1TY2PjqrGgSukbcV4mOC6yiDIXZ2YApu3Fm8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9ca7e22088@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFhNDExNTM3MWYzY2ViYzRmYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTQsImV4cCI6MTU3MjQyMDM5NH0.4y7hvbZpc1l1XdKHixmWX1bsP5q5DlpBQTZss8608Lo"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Guatemalan' ],
  candidate: 
   { base_country: 'Mali',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: -789,
     current_currency: '$ USD',
     why_work: '59f2a602ec',
     description: 'babd8d8d17',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 58940,
        currency: '€ EUR',
        employment_availability: '3 weeks' },
     interest_areas: [ 'Public blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'd588320ce9',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"Error: ValidationError: candidate.current_salary: Path `candidate.current_salary` (-789) is less than minimum allowed value (0).\n    at validateObject (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:3:204)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:413\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3062\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at middleware (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\sanitizer.js:1:2911)\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates?user_id=5db92d1a4115371f3cebc4fb","method":"PATCH","requestID":"387eab60-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5db92d1a4115371f3cebc4fb"},"body":{"contact_number":"+92654654654","nationality":["Guatemalan"],"candidate":{"base_country":"Mali","base_city":"Islamabad","stackexchange_account":"https://www.exchange.com","github_account":"https://www.fb.com","linkedin_account":"https://linkedin.com/in/sadia_abbas","medium_account":"https://medium.com/sadiaAbbas","current_salary":-789,"current_currency":"$ USD","why_work":"59f2a602ec","description":"babd8d8d17","employee":{"location":[{"remote":true,"visa_needed":false},{"country":"Afghanistan","visa_needed":false},{"city":"5c4aa17468cc293450c14c04","visa_needed":true}],"roles":["CTO","Solutions architect"],"expected_annual_salary":58940,"currency":"€ EUR","employment_availability":"3 weeks"},"interest_areas":["Public blockchain","Enterprise blockchain"],"commercial_skills":[{"skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2},{"skills_id":"5d9b0ad8e70a001d20f21679","name":"Bitcoin","type":"blockchain","exp_year":1}],"description_commercial_skills":"d588320ce9","education_history":[{"uniname":"CUST","degreename":"BSCS","fieldname":"CS","eduyear":2016}],"work_history":[{"companyname":"MWAN","positionname":"Team Lead","locationname":"Tokyo Japan","description":"I am in this org. I am in this org. I am in this org. I am this org. I am in this org. I am in this org. I am in this org. I am in this orgg. ","startdate":"2016-02-29T19:00:00.000Z","enddate":"2018-10-09T07:32:38.732Z","currentwork":true}]}}},"level":"error","message":"ValidationError: candidate.current_salary: Path `candidate.current_salary` (-789) is less than minimum allowed value (0)."}
      2) it should send interview offer
dropping database
    { msg_tag:"employment_offer" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"706aa09423@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFiNDExNTM3MWYzY2ViYzUwNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNS4wNDVaIiwiaWF0IjoxNTcyNDE2Nzk1LCJleHAiOjE1NzI0MjAzOTV9.f67l8xKCZWWtRo12mb061RLONEv3I01IlwcnW0WwfMM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"881f9127c5@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFiNDExNTM3MWYzY2ViYzUwOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTUsImV4cCI6MTU3MjQyMDM5NX0.9_Yt_U5TLPgq5_yGkUlnrRgE8rvqK1waMWSqSwkxkEw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Ukrainian' ],
  candidate: 
   { base_country: 'Sweden',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 25149,
     current_currency: '€ EUR',
     why_work: '6c92c7edd2',
     description: '017aaa96a5',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 24401,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: [ 'Blockchain infrastructure', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '6081006e9c',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send employment offer (505ms)
dropping database
    { msg_tag:"employment_offer_accepted" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"20d39c4a14@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFiNDExNTM3MWYzY2ViYzUxZiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNS42NzlaIiwiaWF0IjoxNTcyNDE2Nzk1LCJleHAiOjE1NzI0MjAzOTV9.hXe6K3lv8WAM3TALtDk_NZFij1yaN34PUh6zHn-M9bw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"411f0e671b@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFiNDExNTM3MWYzY2ViYzUyMiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTUsImV4cCI6MTU3MjQyMDM5NX0.Urs3R-M2N-JR-RlErxV2izL6b8I_h5Wo5wJ6oDl0KvQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Kenyan' ],
  candidate: 
   { base_country: 'Ukraine',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 32418,
     current_currency: '€ EUR',
     why_work: '32cea19e82',
     description: 'c4270804d5',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 19048,
        currency: '£ GBP',
        employment_availability: 'Longer than 3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'e5734fa25c',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should accept employment offer (559ms)
dropping database
    { msg_tag:"employment_offer_rejected" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"84324c02b1@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFjNDExNTM3MWYzY2ViYzUzYiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNi4zOTNaIiwiaWF0IjoxNTcyNDE2Nzk2LCJleHAiOjE1NzI0MjAzOTZ9.1yV7fFPmkqApIPLGv6zeM3PD4O8bvgOhNAB9nkOdHiw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"34cf9a41eb@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFjNDExNTM3MWYzY2ViYzUzZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTYsImV4cCI6MTU3MjQyMDM5Nn0.N9zivgjcelbLFk-qrTuxmeV84F26wb3TMC7XPjlYBC4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Slovenian' ],
  candidate: 
   { base_country: 'Dominican Republic',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 60700,
     current_currency: '€ EUR',
     why_work: 'da273485bd',
     description: 'bdee37dcae',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 61857,
        currency: '€ EUR',
        employment_availability: '3 weeks' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f8338ac990',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should reject employment offer (557ms)
dropping database
    { msg_tag:"file" }
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"822070474b@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFkNDExNTM3MWYzY2ViYzU1NyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNy4wODhaIiwiaWF0IjoxNTcyNDE2Nzk3LCJleHAiOjE1NzI0MjAzOTd9.lfWQZFSc39DPM7kHnigw73ngRBj7E0QbjB5Z2N258w8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"6ee3df38e8@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFkNDExNTM3MWYzY2ViYzU1YSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTcsImV4cCI6MTU3MjQyMDM5N30.z6KI-Fp_5okYVEJXkPvM83zdJtmpgzYd_SxdMbzHQXQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Mozambican' ],
  candidate: 
   { base_country: 'Philippines',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 40103,
     current_currency: '€ EUR',
     why_work: '76bcc24230',
     description: 'd95c67234a',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 13473,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'Smart contract development', 'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3aa81c5e53',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should send a file (578ms)
dropping database

  get page content
    GET /v2/pages
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8cff65d87d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFkNDExNTM3MWYzY2ViYzU3MCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozNy44MDdaIiwiaWF0IjoxNTcyNDE2Nzk4LCJleHAiOjE1NzI0MjAzOTh9.T2phhTjCLXdptXqJ_FxZDKP-hTyjv0dXp7YAgkXtkjU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should get page content (406ms)
dropping database

  POST /pages
    authorization and control
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1787ca8df1@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFlNDExNTM3MWYzY2ViYzU3NiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjozOC4zNjBaIiwiaWF0IjoxNTcyNDE2Nzk4LCJleHAiOjE1NzI0MjAzOTh9.2InCk9Dgtphs2bABY-3KlthMUUnVp2TgdyB10eIkSkY"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should insert html data in db (637ms)
dropping database

  send referral email to a person
    POST /v2/referral/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0c97e2a298@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFmNDExNTM3MWYzY2ViYzU3YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTksImV4cCI6MTU3MjQyMDM5OX0.Y63cry_lbZg0o-Oh5cCUBLh2CJvVPUPrh6i6lYxnIto"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-39586637ba424da091b47dcb0e0bc8b5","subject":"Come join WOB","personalizations":[{"to":{"email":"tayyab4793@gmail.com"}}],"templateData":{"messageBody":"This email is for test case"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should send referral email to a person (147ms)
dropping database

  create ref code for a user
    GET /v2/referral?ref_code
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0b08990f3e@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFmNDExNTM3MWYzY2ViYzU3ZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY3OTksImV4cCI6MTU3MjQyMDM5OX0.8aGQ2pLGpuadGGG0KXCOvaagkg19MjKGRjfUpoJyIv0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get info of user who refereed a person (386ms)
dropping database

  admin get metrics
    GET /statistics
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"99babb4ebf@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDFmNDExNTM3MWYzY2ViYzU4MyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDAsImV4cCI6MTU3MjQyMDQwMH0.GWmCc2HOH8mwNBkwEBZUZIYrqIqp_dWV7MlJIdxFO5w"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Cambodian' ],
  candidate: 
   { base_country: 'Iceland',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 44176,
     current_currency: '£ GBP',
     why_work: '061f927ecd',
     description: 'e6a0f0a248',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 20908,
        currency: '£ GBP',
        employment_availability: '3 weeks' },
     interest_areas: [ 'Public blockchain', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f338ab9e6b',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"TypeError: aggregateOver is not iterable\n    at aggregateObjArray (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\statistics\\get.controller.js:1:26553)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\statistics\\get.controller.js:1:22910\n    at Object.findAndIterate (D:\\wamp64\\www\\workonblockchain.com\\server\\model\\defaultMongoose.js:1:5393)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/statistics?admin=true","method":"GET","requestID":"3badf250-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"admin":"true"},"body":{}},"level":"error","message":"aggregateOver is not iterable"}
      3) it should get the application metrics
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a1157a3edf@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIwNDExNTM3MWYzY2ViYzU4ZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDAsImV4cCI6MTU3MjQyMDQwMH0.ML2cQODfLMGEvY-Fngwkn4QxObE6FM7UTTegT3HijmE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
0
      √ it should return statistics of active users (181ms)
dropping database

  POST /subscribers
    testing endpoint
      √ it should should test endpoint
dropping database

  destroy token
    POST /users/destroy_token
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e2f22fb876@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIwNDExNTM3MWYzY2ViYzU5MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0MC42MDdaIiwiaWF0IjoxNTcyNDE2ODAwLCJleHAiOjE1NzI0MjA0MDB9.xpXgbWj7TF4WiP5kOzd0snuhKpW3mshH8Gb0YuXdYUE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should destroy token on logout (276ms)
dropping database

  change password of candidate or company
    PUT /users/change_password
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ffd313e733@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIwNDExNTM3MWYzY2ViYzU5NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.owQiI1RE44lUo91u8VtZEms1Ay5G1FdVd0K1Sofctec"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should change password of candidate (262ms)
dropping database

  forgot password email of candidate or company
    POST /v2/users/auth/password/reset
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ef7f8fb656@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.rIVTS1SDCGh1CQAk4eRKNGgB9I5BHZm0HwVDbL9d0VQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"level":"debug","message":"reset url: "}
{"0":{"name":"FNAME","content":"Tayyab"},"1":{"name":"RESET_PASSWORD_URL","content":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.rIVTS1SDCGh1CQAk4eRKNGgB9I5BHZm0HwVDbL9d0VQ"},"level":"debug","message":"forgot passowrd feature: "}
{"sendGridOptions":{"templateId":"d-84d5a0028f1141e68433cd97d14a876d","subject":"Forgot password on Work on Blockchain","personalizations":[{"to":{"email":"ef7f8fb656@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","resetPasswordUrl":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5OCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.rIVTS1SDCGh1CQAk4eRKNGgB9I5BHZm0HwVDbL9d0VQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should sent forgot password email to candidate (150ms)
dropping database

  reset password of candidate or company
    PUT /users/reset_password/:hash
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"61f0d0d941@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.4ds15wP8l2sbdfDtcrQD8kDZibY1gDb2vx-uqZhnND4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"level":"debug","message":"reset url: "}
{"0":{"name":"FNAME","content":"Tayyab"},"1":{"name":"RESET_PASSWORD_URL","content":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.4ds15wP8l2sbdfDtcrQD8kDZibY1gDb2vx-uqZhnND4"},"level":"debug","message":"forgot passowrd feature: "}
{"sendGridOptions":{"templateId":"d-84d5a0028f1141e68433cd97d14a876d","subject":"Forgot password on Work on Blockchain","personalizations":[{"to":{"email":"61f0d0d941@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","resetPasswordUrl":"http://localhost:4200/reset_password?hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5YiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.4ds15wP8l2sbdfDtcrQD8kDZibY1gDb2vx-uqZhnND4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should reset candidate password (138ms)
dropping database

  login as company or candidate
    post /users/auth
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0364fda578@example.com","name":"e95c5"}}],"templateData":{"firstName":"e95c5","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIxNDExNTM3MWYzY2ViYzU5ZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDEsImV4cCI6MTU3MjQyMDQwMX0.sAp1wcUQx6ipi4j3A_TrnUoRRTw2Ss7opW7V0cX3yZg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should login candidate (148ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"219f006758@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIyNDExNTM3MWYzY2ViYzVhMiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Mi4wMTdaIiwiaWF0IjoxNTcyNDE2ODAyLCJleHAiOjE1NzI0MjA0MDJ9._KhxyjOQ_wDsFraG6UqBuNkXvw7YY1NUW-bWVYCvWog"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should login company (271ms)
dropping database

  get verified candidate detail as company
    GET /v2/users/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"40cd155581@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIyNDExNTM3MWYzY2ViYzVhNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Mi4zOTNaIiwiaWF0IjoxNTcyNDE2ODAyLCJleHAiOjE1NzI0MjA0MDJ9.YDVlO2tJ7yNWnXRNvAWGPvTWyIcMyuIqVFxqQr404ps"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"49d4716877@example.com","name":"f955c"}}],"templateData":{"firstName":"f955c","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIyNDExNTM3MWYzY2ViYzVhOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDIsImV4cCI6MTU3MjQyMDQwMn0.4tsW5_-KfqMILK5lircTydmXSdy-h0wgz4WMX0OCPPc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Nepalese' ],
  candidate: 
   { base_country: 'Tuvalu',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 14853,
     current_currency: '€ EUR',
     why_work: '7168a1ed3f',
     description: 'fd17a335a8',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 96208,
        currency: '£ GBP',
        employment_availability: '3 weeks' },
     interest_areas: 
      [ 'Smart contract development',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '85c899fd92',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
[ { status: { status: 'approved' },
    timestamp: 2019-10-30T06:26:42.715Z },
  { status: { status: 'approved' },
    timestamp: 2019-10-30T06:26:42.712Z },
  { timestamp: 2019-10-30T06:26:42.707Z,
    status: { status: 'wizard' } },
  { status: { status: 'created' },
    timestamp: 2019-10-30T06:26:42.687Z } ]
      √ it should return verified candidate detail of first chat offer unaccepted (350ms)
dropping database

  admin changes status of a candidate
    POST /users/user_id/candidates/status
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b40d221c23@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIyNDExNTM3MWYzY2ViYzViNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Mi44NjFaIiwiaWF0IjoxNTcyNDE2ODAzLCJleHAiOjE1NzI0MjA0MDN9.n-54ttwlwQQQYqC49usIWv_fkVdl2fCt8rzh7XGQpQw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"abbf6f7b02@example.com","name":"5c95f"}}],"templateData":{"firstName":"5c95f","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIzNDExNTM3MWYzY2ViYzViOCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDMsImV4cCI6MTU3MjQyMDQwM30.lo6HsD73YWU2xBWjw_YmCkd43k6sJUTz1cPcuHCrjqA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Yemenite' ],
  candidate: 
   { base_country: 'Israel',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 18157,
     current_currency: '€ EUR',
     why_work: 'a6d3a2d2d8',
     description: 'd11bc871fb',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 95694,
        currency: '$ USD',
        employment_availability: '2 weeks' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '2cadfd610f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"sendGridOptions":{"templateId":"d-d8830894f2ac46d6af1b57abdf8d4ac5","subject":"Welcome to workonblockchain.com!","from":{"name":"Antonio Sabado","email":"antonio@workonblockchain.com"},"personalizations":[{"to":{"email":"abbf6f7b02@example.com","name":"5c95f"}}],"templateData":{"body":"<p>Hi, i have just approved your profile</p>"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should changes status of a candidate (299ms)
dropping database

  update candidate profile
    Patch /users/user_id/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"16b0df78f4@example.com","name":"f3257"}}],"templateData":{"firstName":"f3257","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIzNDExNTM3MWYzY2ViYzVjNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDMsImV4cCI6MTU3MjQyMDQwM30.mz4gB6D9X4mHrkoIgnJ2Zo2GJeNICZIWWdnlAP7fLQE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'German' ],
  candidate: 
   { base_country: 'Central African Rep',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 75669,
     current_currency: '£ GBP',
     why_work: 'd365b4e75f',
     description: '2a3ed151a3',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 66417,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'Public blockchain', 'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3e3cf4a7f6',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Samoan' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'Smart contract development', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '1dbdd37961',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ _id: 5db92d234115371f3cebc5c5,
  marketing_emails: false,
  nationality: [ 'Samoan' ],
  is_verify: 1,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  type: 'candidate',
  email: '16b0df78f4@example.com',
  first_name: 'f3257',
  last_name: '60d2a',
  salt: 'SvX/M8gbLA+gUKvrXh7KQ==',
  password_hash: 'eb1e53993c2b02b2e5cfa6ee9d4729cd41ccbc201c3eca867fca69f8bbd5c308dbbd8047e2c6f0b77f1a373679e23a1611472e4e8b7f34ed8a4d598e8d871ddc',
  candidate: 
   { history: [ [Object], [Object], [Object] ],
     latest_status: { status: 'wizard', timestamp: 2019-10-30T06:26:43.673Z },
     base_city: 'Islamabad',
     base_country: 'Central African Rep',
     commercial_skills: [ [Object], [Object] ],
     description: '2a3ed151a3',
     description_commercial_skills: '1dbdd37961',
     education_history: [ [Object] ],
     employee: { location: [Array], roles: [Array] },
     github_account: 'https://fb12.com',
     interest_areas: [ 'Smart contract development', 'I don\'t know' ],
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     stackexchange_account: 'stackexchange.com',
     why_work: 'd365b4e75f',
     work_history: [ [Object] ] },
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIzNDExNTM3MWYzY2ViYzVjNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDN9.iaYfid4dQmwOhXqp7KzM_dCs_2kJ0bEzGRqoTeWlO_Y',
  session_started: 2019-10-30T06:26:43.344Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIzNDExNTM3MWYzY2ViYzVjNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDMsImV4cCI6MTU3MjQyMDQwM30.mz4gB6D9X4mHrkoIgnJ2Zo2GJeNICZIWWdnlAP7fLQE',
  contact_number: '+926246524' }
      √ it should update candidate profile (348ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"731d92f41d@example.com","name":"6866d"}}],"templateData":{"firstName":"6866d","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDIzNDExNTM3MWYzY2ViYzVkOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDMsImV4cCI6MTU3MjQyMDQwM30.UCXfmltL0daC9b0b5yztHpY8XsT5a_H2zDGYbKa58Ro"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Bangladeshi' ],
  candidate: 
   { base_country: 'Colombia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 17531,
     current_currency: '€ EUR',
     why_work: 'ea6d1ee653',
     description: 'c8af0f939c',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 12163,
        currency: '€ EUR',
        employment_availability: 'Longer than 3 months' },
     interest_areas: [ 'Smart contract development', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '61f32f910d',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'British' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Smart contract development' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f25663f2b6',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ unset_github_account: true, unset_linkedin_account: true }
      √ it should update link sites (210ms)
dropping database

  create new candidate
    post /users/candidates
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f2f2122ed4@example.com","name":"c21b7"}}],"templateData":{"firstName":"c21b7","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI0NDExNTM3MWYzY2ViYzVlZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDQsImV4cCI6MTU3MjQyMDQwNH0.rr6PdanTNWIgfmjg4buJ_dh-P8zu8QU-TGVedgQATE4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create candidate profile (145ms)
dropping database
      √ it should add new candidate to the sync queue
dropping database

  POST /v2/users/candidates/search
    admin search
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2f131dc5c8@example.com","name":"fc8ac"}}],"templateData":{"firstName":"fc8ac","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI0NDExNTM3MWYzY2ViYzVmMSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDQsImV4cCI6MTU3MjQyMDQwNH0.Rz2y1S1iCLbnLjs0u5CY5UhDi8wh3lfvMRjbaZJh2-M"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Northern Irish' ],
  candidate: 
   { base_country: 'St Kitts & Nevis',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 3202,
     current_currency: '£ GBP',
     why_work: 'c396a1591d',
     description: '5c0b1f0c5e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 53742,
        currency: '£ GBP',
        employment_availability: '1 week' },
     interest_areas: [ 'Decentralized applications (dapps)', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'ad403ccba4',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Salvadoran' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'I don\'t know', 'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '26e6054406',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should get all users for admin (152ms)
dropping database
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"445b3560cf@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI0NDExNTM3MWYzY2ViYzYwNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0NC40NjFaIiwiaWF0IjoxNTcyNDE2ODA0LCJleHAiOjE1NzI0MjA0MDR9.RZ26gP8iN-zm840Rqbx5PqeeiYNv0gxPIIaCc2mrfUQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"50f06483bc@example.com","name":"baf43"}}],"templateData":{"firstName":"baf43","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI0NDExNTM3MWYzY2ViYzYwYiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDQsImV4cCI6MTU3MjQyMDQwNH0.Cg-RE1VxByioAJOXI41_ORWwzTj5yooojGaKWbrtDtc"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Portuguese' ],
  candidate: 
   { base_country: 'Myanmar (Burma)',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 40739,
     current_currency: '€ EUR',
     why_work: '7feca3956c',
     description: 'b83336cc4c',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 56542,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'Decentralized applications (dapps)', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '435be3f7a0',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ contact_number: '+926246524',
  nationality: [ 'Congolese' ],
  candidate: 
   { stackexchange_account: 'stackexchange.com',
     github_account: 'https://fb12.com',
     base_city: 'Islamabad',
     employee: { location: [Array], roles: [Array] },
     interest_areas: [ 'I don\'t know', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '0aee5a2c2f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ _id: 5db92d244115371f3cebc61f,
  sender_id: 5db92d244115371f3cebc606,
  receiver_id: 5db92d244115371f3cebc60b,
  msg_tag: 'approach',
  date_created: 2019-10-30T06:26:44.799Z,
  message: 
   { approach: { _id: 5db92d244115371f3cebc620, employee: [Object] } },
  __v: 0 }
{"filters":{"status":"approved","msg_tags":["approach"]},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"candidate.latest_status.status":"approved"},{"_id":{"$in":["5db92d244115371f3cebc606","5db92d244115371f3cebc60b"]}}],"level":"debug","message":"query"}
      √ it should search candidate by filter (713ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1b133ff55e@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI1NDExNTM3MWYzY2ViYzYyNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0NS4zMTRaIiwiaWF0IjoxNTcyNDE2ODA1LCJleHAiOjE1NzI0MjA0MDV9.nNOsgmnsfsuVQ41iHJx85PMCAT91dWBbLSrwo3PH37c"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"ca2342f64e@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI1NDExNTM3MWYzY2ViYzYyOSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDUsImV4cCI6MTU3MjQyMDQwNX0.h8vLxr3PLXUT80iUd9XC3McK1Psd9PvYlHf4cSVu22o"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Zimbabwean' ],
  candidate: 
   { base_country: 'Brunei',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 35314,
     current_currency: '€ EUR',
     why_work: 'be64f6024c',
     description: 'cfc97cb927',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 40688,
        currency: '€ EUR',
        employment_availability: '2 weeks' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '65580bf9cf',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false}],"level":"debug","message":"query"}
      √ it should return verified candidate (265ms)
dropping database
    company search
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"3cc828f577@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI1NDExNTM3MWYzY2ViYzYzNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0NS43MjRaIiwiaWF0IjoxNTcyNDE2ODA1LCJleHAiOjE1NzI0MjA0MDV9.BNyszeUFzlugmr--OBx-GM73hSSl68XNghen1qF20U4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"938ed47e24@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI1NDExNTM3MWYzY2ViYzYzNyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDUsImV4cCI6MTU3MjQyMDQwNX0.mSY4--N2Q_qXbMJT6eOxsP0c6zXaz4yGLhzzh7xNdDw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Paraguayan' ],
  candidate: 
   { base_country: 'Guyana',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 38409,
     current_currency: '€ EUR',
     why_work: '3fa777742a',
     description: 'f792f9b956',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 41292,
        currency: '€ EUR',
        employment_availability: 'Now' },
     interest_areas: [ 'Smart contract development', 'Blockchain infrastructure' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '35961ad05f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ history: 
   [ { status: [Object], timestamp: 2019-10-30T06:26:45.981Z },
     { status: [Object], timestamp: 2019-10-30T06:26:45.979Z },
     { timestamp: 2019-10-30T06:26:45.971Z, status: [Object] },
     { status: [Object], timestamp: 2019-10-30T06:26:45.952Z } ],
  latest_status: { status: 'approved', timestamp: 2019-10-30T06:26:45.981Z },
  base_city: 'Islamabad',
  base_country: 'Guyana',
  commercial_skills: 
   [ { skills_id: '5d9b0ad8e70a001d20f21688',
       name: 'Cardano',
       type: 'blockchain',
       exp_year: 2 },
     { skills_id: '5d9b0ad8e70a001d20f21679',
       name: 'Bitcoin',
       type: 'blockchain',
       exp_year: 1 } ],
  current_currency: '€ EUR',
  current_salary: 38409,
  description: 'f792f9b956',
  description_commercial_skills: '35961ad05f',
  education_history: 
   [ { uniname: 'CUST',
       degreename: 'BSCS',
       fieldname: 'CS',
       eduyear: 2016 } ],
  employee: 
   { location: [ [Object], [Object], [Object] ],
     roles: [ 'Architect', 'Architect' ],
     expected_annual_salary: 41292,
     currency: '€ EUR',
     employment_availability: 'Now' },
  github_account: 'https://www.fb.com',
  interest_areas: [ 'Smart contract development', 'Blockchain infrastructure' ],
  linkedin_account: 'https://linkedin.com/in/sadia_abbas',
  medium_account: 'https://medium.com/sadiaAbbas',
  stackexchange_account: 'https://www.exchange.com',
  why_work: '3fa777742a',
  work_history: 
   [ { companyname: 'MWAN',
       positionname: 'Team Lead',
       locationname: 'Tokyo Japan',
       description: 'I am in this org. I am in this org. I am in this org. I am this org. I am in this org. I am in this org. I am in this org. I am in this orgg. ',
       startdate: '2016-02-29T19:00:00.000Z',
       enddate: '2018-10-09T07:32:38.732Z',
       currentwork: true } ] }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"locations":[{"remote":true},{"city":"5c4aa17468cc293450c14c04"}]},"level":"debug","message":"Doing new candidate search"}
{"0":{"remote":true},"1":{"city":"5c4aa17468cc293450c14c04"},"level":"debug","message":"locations: "}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$or":[{"candidate.employee.location.remote":true},{"candidate.contractor.location.remote":true},{"candidate.volunteer.location.remote":true}]}]}],"level":"debug","message":"query"}
      √ it should return the candidate with position and location  (282ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f9d56446fe@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI2NDExNTM3MWYzY2ViYzY0MyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Ni4wOTFaIiwiaWF0IjoxNTcyNDE2ODA2LCJleHAiOjE1NzI0MjA0MDZ9.GXr2Cas7d9WINKiTlpmXhEZSX_XzFuvfVITgq_0PgQA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"3576c796a4@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI2NDExNTM3MWYzY2ViYzY0NiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDYsImV4cCI6MTU3MjQyMDQwNn0.Ik9mlc2auY-VSkTtT58obFiDQSrsnpW39HGgpkE9vAw"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Venezuelan' ],
  candidate: 
   { base_country: 'Saudi Arabia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 70636,
     current_currency: '£ GBP',
     why_work: '235f6d27c2',
     description: '68796b8a89',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 72085,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'Decentralized applications (dapps)', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '3fc71d02ec',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false}],"level":"debug","message":"query"}
      √ it should return the candidate with currency search (294ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b1cbaa73c3@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI2NDExNTM3MWYzY2ViYzY1MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Ni40NzZaIiwiaWF0IjoxNTcyNDE2ODA2LCJleHAiOjE1NzI0MjA0MDZ9.LVyY2rTeM8K_8PyUPoUaYFalqygP6vx7noMDqA4GZZ8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2902703664@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI2NDExNTM3MWYzY2ViYzY1NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDYsImV4cCI6MTU3MjQyMDQwNn0.7HL6iGcGtCrkqVs51fj3bpgWNW27OTSAXnzfZTC-cBg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Palauan' ],
  candidate: 
   { base_country: 'Mauritius',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 34896,
     current_currency: '$ USD',
     why_work: '13fa9d45e3',
     description: '581ff9c5d3',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 93752,
        currency: '€ EUR',
        employment_availability: '3 weeks' },
     interest_areas: [ 'I don\'t know', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'c72e3f6386',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"€ EUR","expected_salary_min":46876},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":58782.50399999999}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":45923.831249999996}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":51563.600000000006}}]}]}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"3f90aac0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"current_currency":"€ EUR","current_salary":46876}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should not return the candidate with half currency search (295ms)
dropping database
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates?user_id=5d9aec86db262d0e284b83ed","method":"GET","requestID":"3fa28510-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5d9aec86db262d0e284b83ed"},"body":{}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"9729909517@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI2NDExNTM3MWYzY2ViYzY2MiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Ni44ODhaIiwiaWF0IjoxNTcyNDE2ODA3LCJleHAiOjE1NzI0MjA0MDd9.yXvu-1OLNBLufopl3qkKQ3zf7I95imsC7ece2QlXYkE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"226747191a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI3NDExNTM3MWYzY2ViYzY2NSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDcsImV4cCI6MTU3MjQyMDQwN30.EtShdsc5bliEUvMqDQkG_bnBpQlUo_XV9MRbvZA-Q-k"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Burkinabe' ],
  candidate: 
   { base_country: 'Libya',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 11293,
     current_currency: '$ USD',
     why_work: '5834eb6b8c',
     description: '6df3eeeead',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 66268,
        currency: '£ GBP',
        employment_availability: 'Longer than 3 months' },
     interest_areas: [ 'Public blockchain', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'fd5453a658',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
66268
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"£ GBP","expected_salary_min":59700.900900900895},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":84058.86846846847}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":65670.99099099099}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":73735.84953374429}}]}]}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"3fc687d0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"current_currency":"£ GBP","current_salary":59700.900900900895}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should return the candidate with half different-currency search (237ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8a93e4f0b3@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI3NDExNTM3MWYzY2ViYzY3MSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Ny4yMzBaIiwiaWF0IjoxNTcyNDE2ODA3LCJleHAiOjE1NzI0MjA0MDd9.SbOA_a3N0p05PB8fCRh6JjduZTWWW5cJIvuonsb_u00"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e1b39915cd@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI3NDExNTM3MWYzY2ViYzY3NCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDcsImV4cCI6MTU3MjQyMDQwN30.1SelJaI98HkAky36I2fwmEKne2-qRuvI4tGbYEGMwP8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Panamanian' ],
  candidate: 
   { base_country: 'Argentina',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 3220,
     current_currency: '$ USD',
     why_work: '3ac0c57207',
     description: '1be119ddef',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 4631,
        currency: '£ GBP',
        employment_availability: '3 weeks' },
     interest_areas: 
      [ 'Smart contract development',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f2bdbd9815',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
4631
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"currency":"£ GBP","expected_salary_min":4248.623853211009},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"$or":[{"$and":[{"candidate.employee.currency":"$ USD"},{"candidate.employee.expected_annual_salary":{"$lte":5982.062385321102}}]},{"$and":[{"candidate.employee.currency":"£ GBP"},{"candidate.employee.expected_annual_salary":{"$lte":4673.48623853211}}]},{"$and":[{"candidate.employee.currency":"€ EUR"},{"candidate.employee.expected_annual_salary":{"$lte":5247.423145018511}}]}]}],"level":"debug","message":"query"}
      √ it should not return the candidate with half different-currency search (319ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"89b9be0ea0@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI3NDExNTM3MWYzY2ViYzY4MCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0Ny42NDFaIiwiaWF0IjoxNTcyNDE2ODA3LCJleHAiOjE1NzI0MjA0MDd9.AekXUv8jNqVZJZY0ybj1OFmZwYJ0Vke8PQqFkATHFqU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b17fabac16@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI3NDExNTM3MWYzY2ViYzY4MyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MDcsImV4cCI6MTU3MjQyMDQwN30.X-uU32tuKFWMagVMPj3o_b5pf1ahj4H0CJM0cyqG2-U"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Singaporean' ],
  candidate: 
   { base_country: 'Nicaragua',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 37882,
     current_currency: '€ EUR',
     why_work: 'b4bda731c3',
     description: 'da17e2a0e1',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 51443,
        currency: '£ GBP',
        employment_availability: '1 month' },
     interest_areas: [ 'Enterprise blockchain', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '845c18440f',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano","exp_year":1}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":1}}}}],"level":"debug","message":"query"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano","exp_year":3}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano","exp_year":{"$gte":3}}}}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"403db3a0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"required_skills":[{"name":"Cardano","exp_year":3}]}},"level":"warn","message":"No candidates matched this search criteria"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"Cardano"}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"Cardano"}}}],"level":"debug","message":"query"}
{"filters":{"is_verify":1,"status":"approved","disable_account":false},"search":{"required_skills":[{"name":"not a skill name","exp_year":1}]},"level":"debug","message":"Doing new candidate search"}
{"query":[{"type":"candidate"},{"is_verify":1},{"candidate.latest_status.status":"approved"},{"disable_account":false},{"candidate.commercial_skills":{"$elemMatch":{"name":"not a skill name","exp_year":{"$gte":1}}}}],"level":"debug","message":"query"}
{"stack":"ApplicationError: No candidates matched this search criteria\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at Object.module.exports.candidateSearch (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\users\\candidates\\search\\searchCandidates.js:38:13680)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates/search","method":"POST","code":404,"requestID":"403ffd90-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"required_skills":[{"name":"not a skill name","exp_year":1}]}},"level":"warn","message":"No candidates matched this search criteria"}
      √ it should return the candidate with required skills (279ms)
dropping database

  get current company detail
    GET /v2/users/companies
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a47c5babcc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI4NDExNTM3MWYzY2ViYzY5NiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0OC4wMDRaIiwiaWF0IjoxNTcyNDE2ODA4LCJleHAiOjE1NzI0MjA0MDh9.gWQySNVCal6gjCNQIT-bgvKabah_DA7n5K3zR0pVCe8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get current company profile detail (208ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a4733a0f63@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI4NDExNTM3MWYzY2ViYzY5YSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0OC4zMjdaIiwiaWF0IjoxNTcyNDE2ODA4LCJleHAiOjE1NzI0MjA0MDh9.5plafvLxd2mdm25bnCnjoPSTtR_R0FaslMKYEHVj8I4"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"a5eeb30288@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI4NDExNTM3MWYzY2ViYzY5ZCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0OC42ODBaIiwiaWF0IjoxNTcyNDE2ODA4LCJleHAiOjE1NzI0MjA0MDh9.rHsx7lZYHAEIYv693C0ZlnO0SmfygOvljExAXnSbM_Y"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get current company profile detail including jobs (765ms)
dropping database

  update profile as company
    PUT /users/update_company_profile
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8a06c63085@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI5NDExNTM3MWYzY2ViYzZhZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0OS4zNTdaIiwiaWF0IjoxNTcyNDE2ODA5LCJleHAiOjE1NzI0MjA0MDl9.bjaiQr0a_PD799JJcfy4XpgTcr_bfJ4emiFCpc6PZM8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update company profile (279ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"3ab2f3a375@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDI5NDExNTM3MWYzY2ViYzZiMyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo0OS43NzZaIiwiaWF0IjoxNTcyNDE2ODEwLCJleHAiOjE1NzI0MjA0MTB9.q3ybzjlNeF8msDLekVYl_pPceUNWyWxx-8BybBY4o4I"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-c7eec23fe534423d9e4282e179559863","subject":"DTA document from WOB","personalizations":[{"to":{"email":"privacy@workonblockchain.com"}}],"templateData":{"companyName":"324ba920c6","companyCountry":"Pakistan","dtaUrl":"http://localhost/workonblockchain.com/server/uploads/1572416810310doc.pdf","companyAdminUrl":"http://localhost:4200/admins/company/5db92d294115371f3cebc6b3","environment":"test"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should update/add gdpr compliance of a company (558ms)
dropping database

  create new company
    Post /users/companies
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates?user_id=5d9aec86db262d0e284b83ed","method":"GET","requestID":"41e17890-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5d9aec86db262d0e284b83ed"},"body":{}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates?user_id=5d9aec86db262d0e284b83ed","method":"GET","requestID":"41e28a00-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5d9aec86db262d0e284b83ed"},"body":{}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
{"stack":"TypeError: Cannot read property 'jwt_token' of null\n    at getUserFromToken (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\auth-v2.js:1:9837)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/candidates?user_id=5d9aec86db262d0e284b83ed","method":"GET","requestID":"41e32640-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5d9aec86db262d0e284b83ed"},"body":{}},"level":"error","message":"Cannot read property 'jwt_token' of null"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"413f85f952@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJhNDExNTM3MWYzY2ViYzZiOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1MC40NDJaIiwiaWF0IjoxNTcyNDE2ODEwLCJleHAiOjE1NzI0MjA0MTB9.OOg8y_UwSm0TxnB1FNYkYofDgKSBNz6XIl9f6VrFj-o"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should create new company profile (341ms)
dropping database

  admin search company by filter
    POST /v2/users/companies/search
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b4db8968dc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJhNDExNTM3MWYzY2ViYzZiZSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1MC44NzJaIiwiaWF0IjoxNTcyNDE2ODExLCJleHAiOjE1NzI0MjA0MTF9.Xcc_EQETdmAjUrQQ4kTSYYKbOTevhBkecMaioHL47WQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"0267ff20b1@example.com","name":"275db"}}],"templateData":{"firstName":"275db","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJiNDExNTM3MWYzY2ViYzZjMyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTEsImV4cCI6MTU3MjQyMDQxMX0.N4ADoqhvqzHORP9-nlv1pf9I164cz-DqARtHIrY2HpM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Romanian' ],
  candidate: 
   { base_country: 'Ghana',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 70252,
     current_currency: '€ EUR',
     why_work: 'c19233b834',
     description: 'a8718d0fd7',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 93593,
        currency: '€ EUR',
        employment_availability: '2 months' },
     interest_areas: [ 'Blockchain infrastructure', 'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '0c94e58be4',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
      √ it should search company by filter (488ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"5a246d3ba3@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJiNDExNTM3MWYzY2ViYzZkNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1MS41MjJaIiwiaWF0IjoxNTcyNDE2ODExLCJleHAiOjE1NzI0MjA0MTF9.lhYI30j8USvqjKs-TOdQM2eTIu5Bx1njolbwfULtuwg"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should get all companies (239ms)
dropping database

  update company status
    POST /users/:user_id/companies/status
undefined
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"8cf8aaca36@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJiNDExNTM3MWYzY2ViYzZkYSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1MS44NTRaIiwiaWF0IjoxNTcyNDE2ODEyLCJleHAiOjE1NzI0MjA0MTJ9.3v8Cn16ZMaB-AzJt1nbW6kuGLLqt1HMlZiHzdZazIbE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
5db92d2b4115371f3cebc6da
{"sendGridOptions":{"templateId":"d-02056a2f353b4493894597caeda49ba6","subject":"Your account has been approved!","personalizations":[{"to":{"email":"8cf8aaca36@example.com","name":"Sara"}}],"templateData":{"firstName":"Sara"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should change company account status (344ms)
dropping database

  verify email of candidate or company
    PATCH /v2/users/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"56645c3be2@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJjNDExNTM3MWYzY2ViYzZlMSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTIsImV4cCI6MTU3MjQyMDQxMn0.GHyPUzumFe02OJLL6XB1Z7dEz5xWsDVUhUIheEDSqjU"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should verify user email (157ms)
dropping database

  verify client email
    POST /v2/users/email
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f8f6891388@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJjNDExNTM3MWYzY2ViYzZlNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Mi40ODhaIiwiaWF0IjoxNTcyNDE2ODEyLCJleHAiOjE1NzI0MjA0MTJ9.ZTpPjwSy3fFGmowTT7OBQSauQvYNVMjdJTCsFS-4oEk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f8f6891388@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJjNDExNTM3MWYzY2ViYzZlNCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Mi40ODhaIiwiaWF0IjoxNTcyNDE2ODEyLCJleHAiOjE1NzI0MjA0MTJ9.ZTpPjwSy3fFGmowTT7OBQSauQvYNVMjdJTCsFS-4oEk"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should send verify email to candidate or company (290ms)
dropping database

  POST /messages
    add terms & privacy of candidate
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"fa04ec7e9d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJjNDExNTM3MWYzY2ViYzZlOCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Mi44NzhaIiwiaWF0IjoxNTcyNDE2ODEzLCJleHAiOjE1NzI0MjA0MTN9.UTOSR1ZDlwfrn6F8lBR3hiGriQv_FEIIsLTibaX1oxA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Candidate","content":"<p>These are Terms and Conditions for candidates. We will not tolerate anything.</p>\n","name":"Terms and Condition for candidate"},"level":"info"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"2b282cb1b2@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJkNDExNTM3MWYzY2ViYzZlZiIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTMsImV4cCI6MTU3MjQyMDQxM30.2RcNOVbUuSucB7jUMae0jhnrEivvU9tEI8iI9dhMhfE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should add terms & privacy of candidate (328ms)
dropping database
    company terms and conditions
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"da9ef6d016@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJkNDExNTM3MWYzY2ViYzZmMyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1My4zNDhaIiwiaWF0IjoxNTcyNDE2ODEzLCJleHAiOjE1NzI0MjA0MTN9.3LmPLR3LwprDEiLRVEW0Hnlu_gkjQekICRbv85eyEm8"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Company","content":"<p>These are Terms and Conditions for companies. We will not tolerate anything.</p>\n","name":"Terms and Condition for company"},"level":"info"}
{"message":{"title":"Privacy Notice","content":"<p>This notice sets out the basis on which any personal data we collect from you, or that you provide to us, will be processed by us. Please read the following carefully to understand our views and practices regarding your sensitive information and how we will deal with it. For the purposes of the Data Protection Act 2018 (‘the DPA’) and the EU General Data Protection Regulation (‘the GDPR’), sensitive information includes what is defined as your ‘personal data’.</p>\n","name":"Privacy Notice"},"level":"info"}
      √ it should insert the TnC and marketing email (670ms)
dropping database

  account setting
    Patch /users/account_settings
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e79716175d@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJlNDExNTM3MWYzY2ViYzZmYyIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NC4yMDFaIiwiaWF0IjoxNTcyNDE2ODE0LCJleHAiOjE1NzI0MjA0MTR9.fHkzQC3Xys6FPMQZFdF56by6yjGOv06xn4GDcM057tA"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      √ it should enable or disbale the account setting (317ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e2a48f8064@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJlNDExNTM3MWYzY2ViYzcwMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NC42MTFaIiwiaWF0IjoxNTcyNDE2ODE0LCJleHAiOjE1NzI0MjA0MTR9.Jt_gQEUpQIchFRN_6dEj0HT6yWG23BAPpbhfNFWk8Lo"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"message":{"title":"T&C for Company","content":"<p>These are Terms and Conditions for companies. We will not tolerate anything.</p>\n","name":"Terms and Condition for company"},"level":"info"}
{ _id: 5db92d2e4115371f3cebc701,
  marketing_emails: false,
  job_ids: [],
  _creator: 
   { _id: 5db92d2e4115371f3cebc700,
     marketing_emails: false,
     nationality: [],
     is_verify: 1,
     is_approved: 0,
     is_admin: 1,
     is_unread_msgs_to_send: true,
     disable_account: false,
     viewed_explanation_popup: false,
     email: 'e2a48f8064@example.com',
     password_hash: 'd6ad5c595d5e9e5661b3b7de2d98090be7f76613b170dea3baa5505e18caf621169b849db850f5b351def7253714659497a2a269125457a6b5d9d5a208527c07',
     salt: 'aSRTsoezssEdduBHhG9WQ==',
     type: 'company',
     created_date: 2019-10-30T06:26:54.611Z,
     conversations: [],
     __v: 0,
     jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJlNDExNTM3MWYzY2ViYzcwMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NC42MTFaIiwiaWF0IjoxNTcyNDE2ODE0fQ.jq-syrQ84Qxy4ZOaz3cCi33dzFx1VR-ydgSNbrw-SsA',
     session_started: 2019-10-30T06:26:54.829Z,
     verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJlNDExNTM3MWYzY2ViYzcwMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NC42MTFaIiwiaWF0IjoxNTcyNDE2ODE0LCJleHAiOjE1NzI0MjA0MTR9.Jt_gQEUpQIchFRN_6dEj0HT6yWG23BAPpbhfNFWk8Lo' },
  first_name: 'Salman',
  last_name: 'Safdar',
  job_title: 'Designer',
  company_name: 'c1ff6375b0',
  company_website: 'my-web.com',
  company_phone: 'undefined 926546456',
  company_country: 'Pakistan',
  company_city: 'RWP',
  company_postcode: '25000',
  history: [],
  saved_searches: [],
  candidates_sent_by_email: [],
  __v: 0,
  terms_id: 5db92d2e4115371f3cebc703 }
      √ it should update company terms id (385ms)
dropping database

  cron
    send candidates to companies
5db92d2f4115371f3cebc706
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"77238b64e5@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcwNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NS4xMzFaIiwiaWF0IjoxNTcyNDE2ODE1LCJleHAiOjE1NzI0MjA0MTV9.e5MQJPe_bZj0WB9g3D9oJxflTo3nrzPfvjMxWoydmcE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"299a019a46@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcwYiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NS40NDhaIiwiaWF0IjoxNTcyNDE2ODE1LCJleHAiOjE1NzI0MjA0MTV9.9WBz8GOJMgmG3ArrdXcjugPEEw0gIZ6E5g7BX0cTxO0"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e2168a338c@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcxNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTUsImV4cCI6MTU3MjQyMDQxNX0.P6ztwoDRxcXtlkOHt69AJZRzqgO6Hq_CAywfFybfFHQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'I-Kiribati' ],
  candidate: 
   { base_country: 'Guatemala',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 76927,
     current_currency: '€ EUR',
     why_work: '20720c1111',
     description: '96da3861e1',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 4480,
        currency: '€ EUR',
        employment_availability: '1 week' },
     interest_areas: 
      [ 'Blockchain infrastructure',
        'Decentralized applications (dapps)' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '8d90d09631',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running candidate auto-notification for company cron","level":"debug"}
{"selector":{"_creator":{"$in":[{"_id":"5db92d2f4115371f3cebc706","marketing_emails":false,"nationality":[],"is_verify":1,"is_approved":1,"is_admin":0,"is_unread_msgs_to_send":true,"disable_account":false,"viewed_explanation_popup":false,"email":"77238b64e5@example.com","password_hash":"b16ccb11ad35569fe35d7b92e94fc9b5e2f22bb60c7bbe3b758fee8ec694053bdc03d65d0acb7de5db5845added5bbaf97468884a1ae929391efd5c9a6255431","salt":"GWwzKoohTIX1eOleVza2A==","type":"company","created_date":"2019-10-30T06:26:55.131Z","conversations":[],"__v":0,"jwt_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcwNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NS4xMzFaIiwiaWF0IjoxNTcyNDE2ODE1fQ.Q3_283-nGjmZaI1TQ7w049cCS-QJ0VkBNRbeByVsIiU","session_started":"2019-10-30T06:26:55.421Z","verify_email_key":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcwNiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1NS4xMzFaIiwiaWF0IjoxNTcyNDE2ODE1LCJleHAiOjE1NzI0MjA0MTV9.e5MQJPe_bZj0WB9g3D9oJxflTo3nrzPfvjMxWoydmcE"}]},"saved_searches":{"$exists":true,"$ne":[]},"when_receive_email_notitfications":{"$ne":"Never"}},"level":"debug","message":"Company selector"}
{ _id: 5db92d2f4115371f3cebc715,
  marketing_emails: false,
  nationality: [ 'I-Kiribati' ],
  is_verify: 1,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  type: 'candidate',
  email: 'e2168a338c@example.com',
  first_name: 'Tayyab',
  last_name: 'Hussain',
  salt: 'oOcAOWYeKfMZDQxPhaLdg==',
  password_hash: 'd4ab0a8488e4590ae24b22461fc43fe643d4273707ad74a75817d0ce45cc3cfeb11a56e747b5cea7b9145bd085cd5a8af90e50755090fcdf7677e03714e7b547',
  candidate: 
   { history: [ [Object], [Object], [Object], [Object] ],
     latest_status: { status: 'approved', timestamp: 2019-10-30T06:26:55.958Z },
     base_city: 'Islamabad',
     base_country: 'Guatemala',
     commercial_skills: [ [Object], [Object] ],
     current_currency: '€ EUR',
     current_salary: 76927,
     description: '96da3861e1',
     description_commercial_skills: '8d90d09631',
     education_history: [ [Object] ],
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 4480,
        currency: '€ EUR',
        employment_availability: '1 week' },
     github_account: 'https://www.fb.com',
     interest_areas: 
      [ 'Blockchain infrastructure',
        'Decentralized applications (dapps)' ],
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     stackexchange_account: 'https://www.exchange.com',
     why_work: '20720c1111',
     work_history: [ [Object] ] },
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcxNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTV9.PPVwGAfTFGc9kA7XlbaVB9Fk2ZzbTBdqAdutS1lrPN4',
  session_started: 2019-10-30T06:26:55.934Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDJmNDExNTM3MWYzY2ViYzcxNSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTUsImV4cCI6MTU3MjQyMDQxNX0.P6ztwoDRxcXtlkOHt69AJZRzqgO6Hq_CAywfFybfFHQ',
  contact_number: '+92654654654',
  first_approved_date: 2019-10-30T06:26:55.958Z }
      4) should send one candidate
dropping database
{ contact_number: '+92654654654',
  nationality: [ 'Italian' ],
  candidate: 
   { base_country: 'United Arab Emirates',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 12513,
     current_currency: '$ USD',
     why_work: 'd8e86f666d',
     description: '330601723d',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 52474,
        currency: '€ EUR',
        employment_availability: 'Longer than 3 months' },
     interest_areas: [ 'Smart contract development', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'c5be1c07a8',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{ _id: 5db92d304115371f3cebc720,
  marketing_emails: false,
  nationality: [],
  is_verify: 0,
  is_approved: 0,
  is_admin: 0,
  is_unread_msgs_to_send: true,
  disable_account: false,
  viewed_explanation_popup: false,
  email: 'd802c5094f@example.com',
  password_hash: '845ba71dcf0fce9d29a023ab64b8d6cb459c4a1072384e3c21b1f277b91d9a75a10a1d622151d878db42226dc60aa8122d4217fdea7198eb3e39eea340d1a1b3',
  salt: 'Hz7y3YgH9cww6+Fa6bonQ==',
  type: 'company',
  created_date: 2019-10-30T06:26:56.308Z,
  conversations: [],
  __v: 0,
  jwt_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMwNDExNTM3MWYzY2ViYzcyMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ni4zMDhaIiwiaWF0IjoxNTcyNDE2ODE2fQ.FLsVRPus91_8Y1YrRPGsRLLMFmDbW8s730MrxIMrC_Q',
  session_started: 2019-10-30T06:26:56.518Z,
  verify_email_key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMwNDExNTM3MWYzY2ViYzcyMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ni4zMDhaIiwiaWF0IjoxNTcyNDE2ODE2LCJleHAiOjE1NzI0MjA0MTZ9.EMVzUO08UuTVLtjvatcAX9a6hAZcCE2KICY6jDcLQ90' }
{ first_name: 'Sara',
  last_name: 'khan',
  job_title: 'Developer',
  company_website: 'www.mwanmobile.com',
  company_phone: '090078601',
  company_postcode: '44000',
  company_city: 'rawalpindi',
  company_founded: 2013,
  no_of_employees: 8,
  company_funded: 'i have no idea',
  company_description: 'Global blockchain agnostic hiring platform for developers.',
  when_receive_email_notitfications: 'Daily' }
5db92d304115371f3cebc720
{"stack":"Error: Key saved_searches could not be found in schema\n    at checkForUnwantedProperties (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:2:707)\n    at validateObject (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:24)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:413\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3062\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at middleware (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\sanitizer.js:1:2911)\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/companies?user_id=5db92d304115371f3cebc720","method":"PATCH","requestID":"456436b0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5db92d304115371f3cebc720"},"body":{"first_name":"Sara","last_name":"khan","job_title":"Developer","company_website":"www.mwanmobile.com","company_phone":"090078601","company_postcode":"44000","company_city":"rawalpindi","company_founded":2013,"no_of_employees":8,"company_funded":"i have no idea","company_description":"Global blockchain agnostic hiring platform for developers.","when_receive_email_notitfications":"Daily","saved_searches":[{"name":"update search name","location":[{"remote":true}],"job_type":["Part time"],"position":["Solutions architect"],"current_currency":"€ EUR","current_salary":52474,"required_skills":[{"skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2}]}]}},"level":"error","message":"Key saved_searches could not be found in schema"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"d802c5094f@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMwNDExNTM3MWYzY2ViYzcyMCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ni4zMDhaIiwiaWF0IjoxNTcyNDE2ODE2LCJleHAiOjE1NzI0MjA0MTZ9.EMVzUO08UuTVLtjvatcAX9a6hAZcCE2KICY6jDcLQ90"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      5) should not send a candidate if they have already been sent
dropping database
5db92d304115371f3cebc725
{"stack":"Error: Key saved_searches could not be found in schema\n    at checkForUnwantedProperties (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:2:707)\n    at validateObject (D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:24)\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\routes-v2.js:4:413\n    at D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\asyncMiddleware.js:1:3062\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at middleware (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\middleware\\sanitizer.js:1:2911)\n    at Layer.handle [as handle_request] (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\wamp64\\www\\workonblockchain.com\\server\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/users/companies?user_id=5db92d304115371f3cebc725","method":"PATCH","requestID":"45a22a10-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{"user_id":"5db92d304115371f3cebc725"},"body":{"first_name":"Sara","last_name":"khan","job_title":"Developer","company_website":"www.mwanmobile.com","company_phone":"090078601","company_postcode":"44000","company_city":"rawalpindi","company_founded":2013,"no_of_employees":8,"company_funded":"i have no idea","company_description":"Global blockchain agnostic hiring platform for developers.","when_receive_email_notitfications":"Daily","saved_searches":[{"name":"update search name","location":[{"remote":true}],"job_type":["Part time"],"position":["Technical business analyst"],"current_currency":"£ GBP","current_salary":46720,"required_skills":[{"skills_id":"5d9b0ad8e70a001d20f21688","name":"Cardano","type":"blockchain","exp_year":2}]}]}},"level":"error","message":"Key saved_searches could not be found in schema"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"f2af590de4@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMwNDExNTM3MWYzY2ViYzcyNSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ni42NjFaIiwiaWF0IjoxNTcyNDE2ODE2LCJleHAiOjE1NzI0MjA0MTZ9.2QFEA94dcsFx_oTmLvdQx4EgPNLiJvwZ-LXILXqmvJE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
      6) should only sent new approved candidates that are approved after the saved search is updated
dropping database

  cron
    send email to user on new message
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"e1818d8877@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMxNDExNTM3MWYzY2ViYzcyYSIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ny4wNzJaIiwiaWF0IjoxNTcyNDE2ODE3LCJleHAiOjE1NzI0MjA0MTd9.zvOGHLHYI5b7Cyb2UoUOwAnVpYdXjOcDm8clRdbrfNE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"06fbaf9cd5@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMxNDExNTM3MWYzY2ViYzcyZCIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTcsImV4cCI6MTU3MjQyMDQxN30.cpYty7Ywk0Uxa4r6ZNV3Ob_4w5GuuU_niYtFSUZMt6Y"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Nepalese' ],
  candidate: 
   { base_country: 'Latvia',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 77765,
     current_currency: '$ USD',
     why_work: 'cc265fc424',
     description: '4cb3583859',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 58400,
        currency: '€ EUR',
        employment_availability: '2 weeks' },
     interest_areas: [ 'Blockchain infrastructure', 'Public blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '7b23e5b26d',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"06fbaf9cd5@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416817671,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"e1818d8877@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416817713,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send email to the user right after they have been sent (648ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"1c9f720697@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMxNDExNTM3MWYzY2ViYzc0MCIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1Ny44OTZaIiwiaWF0IjoxNTcyNDE2ODE4LCJleHAiOjE1NzI0MjA0MTh9.4G_z_Zd9pR3buq-vhBkfconoPRxYRbC9IzfVRuc1qnE"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"dafad9db91@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMyNDExNTM3MWYzY2ViYzc0MyIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTgsImV4cCI6MTU3MjQyMDQxOH0.U-VzJY-S_dkCeN7sW_UvojIQTtD5B2OB6XYoBU_0U9A"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Djibouti' ],
  candidate: 
   { base_country: 'Italy',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 40869,
     current_currency: '£ GBP',
     why_work: '299ffc64c0',
     description: '5ab21f75a7',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 87194,
        currency: '£ GBP',
        employment_availability: 'Now' },
     interest_areas: [ 'Blockchain infrastructure', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '7333f84a97',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"1c9f720697@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416818445,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572416818461,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572416818491,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572416818523,"level":"info","message":"Unread chat messages email script was executed"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"1c9f720697@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416818564,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send only send one email if messages are sent after 20s (679ms)
dropping database
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"4c2d1b7efc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMyNDExNTM3MWYzY2ViYzc2YiIsInR5cGUiOiJjb21wYW55IiwiY3JlYXRlZF9kYXRlIjoiMjAxOS0xMC0zMFQwNjoyNjo1OC43NjdaIiwiaWF0IjoxNTcyNDE2ODE4LCJleHAiOjE1NzI0MjA0MTh9.B2RVMIe9Qy11W0hT-uEMYSsY-s5K6lRrNcxLtpAZJXM"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b5ea9f2d2f@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMyNDExNTM3MWYzY2ViYzc2ZSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTgsImV4cCI6MTU3MjQyMDQxOH0.oUOfjtbD2d4pBFKokLJOTcVMDG8EX2oYN4M8TQYg5gQ"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Bangladeshi' ],
  candidate: 
   { base_country: 'Nepal',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 48053,
     current_currency: '£ GBP',
     why_work: '199ed5db02',
     description: '9cabf5bf4e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 6290,
        currency: '$ USD',
        employment_availability: '2 months' },
     interest_areas: [ 'Enterprise blockchain', 'I don\'t know' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: '469e58da93',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"4c2d1b7efc@example.com","name":"Salman"}}],"templateData":{"firstName":"Salman"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416819269,"level":"info","message":"Unread chat messages email script was executed"}
{"sendGridOptions":{"templateId":"d-4564d4d9fec8469c8dfe0298511e8e17","subject":"Please verify your email on Work on Blockchain","personalizations":[{"to":{"email":"b2ea2d2b5a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab","verifyEmailUrl":"http://localhost:4200/verify_email?email_hash=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkYjkyZDMzNDExNTM3MWYzY2ViYzc4MSIsInR5cGUiOiJjYW5kaWRhdGUiLCJpYXQiOjE1NzI0MTY4MTksImV4cCI6MTU3MjQyMDQxOX0.kkGZULa0uwSdgTH9AMM_cptM_cQaxv2tln_RxzKAV20"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{ contact_number: '+92654654654',
  nationality: [ 'Ecuadorean' ],
  candidate: 
   { base_country: 'Uzbekistan',
     base_city: 'Islamabad',
     stackexchange_account: 'https://www.exchange.com',
     github_account: 'https://www.fb.com',
     linkedin_account: 'https://linkedin.com/in/sadia_abbas',
     medium_account: 'https://medium.com/sadiaAbbas',
     current_salary: 33173,
     current_currency: '€ EUR',
     why_work: '6d82c09a5f',
     description: '32fce9921e',
     employee: 
      { location: [Array],
        roles: [Array],
        expected_annual_salary: 49231,
        currency: '$ USD',
        employment_availability: 'Longer than 3 months' },
     interest_areas: 
      [ 'Decentralized applications (dapps)',
        'Enterprise blockchain' ],
     commercial_skills: [ [Object], [Object] ],
     description_commercial_skills: 'f2393d882b',
     education_history: [ [Object] ],
     work_history: [ [Object] ] } }
{"stack":"ApplicationError: Approach already accepted\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at module.exports.endpoint (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:26970)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","code":400,"requestID":"470cdda0-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"receiver_id":"5db92d324115371f3cebc76b","msg_tag":"approach_accepted","message":{"approach_accepted":{"message":"I am interested, lets chat!"}}}},"level":"warn","message":"Approach already accepted"}
{"message":"Running new messages cron","level":"debug"}
{"sendGridOptions":{"templateId":"d-f2d1ae593663458e99a369ffc1bbcaa4","subject":"You have a new message on Work on Blockchain","personalizations":[{"to":{"email":"b2ea2d2b5a@example.com","name":"Tayyab"}}],"templateData":{"firstName":"Tayyab"}},"isAccountDisabed":false,"level":"debug","message":"Sending email"}
{"timestamp":1572416819328,"level":"info","message":"Unread chat messages email script was executed"}
{"stack":"ApplicationError: Approach has not been accepted\n    at Object.throwError (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\services\\errors.js:5:275)\n    at checkJobOfferAccepted (D:\\wamp64\\www\\workonblockchain.com\\server\\controller\\api-v2\\messages\\post.controller.js:1:22359)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:160:7)","url":"/v2/messages","method":"POST","code":400,"requestID":"47117180-fade-11e9-a3e2-9f94eb98cb0b","request":{"params":{},"body":{"receiver_id":"5db92d324115371f3cebc76b","msg_tag":"normal","message":{"normal":{"message":"hi man...."}}}},"level":"warn","message":"Approach has not been accepted"}
{"message":"Running new messages cron","level":"debug"}
{"timestamp":1572416819354,"level":"info","message":"Unread chat messages email script was executed"}
      √ should send only send one email if messages are sent from two users (593ms)
dropping database

  email transformations
    √ it should add environment to regular email
    √ it should add environment to email with +
    √ it should remove environment to regular email
    √ it should remove environment to email with +

  zoho tokens
    using Zoho CRM API
      √ should get a new auth token and call the API
      √ should get new auth token


  76 passing (44s)
  6 failing

  1) POST /jobs
       positive tests
         it should patch a job as company:
     AssertionError: expected [ Array(1) ] to not exist
      at Context.<anonymous> (test\api-v2\jobs\patch.controller.spec.js:111:47)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)

  2) POST /messages
       { msg_tag:"interview_offer" }
         it should send interview offer:

      AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 500
      + expected - actual

      -500
      +200
      
      at Object.module.exports.candidateProfilePatch (test\api-v2\users\candidates\candidateHelpers.js:29:21)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)

  3) admin get metrics
       GET /statistics
         it should get the application metrics:

      AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 500
      + expected - actual

      -500
      +200
      
      at Object.getMetrics (test\api-v2\statistics\statisticsHelpers.js:21:21)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)

  4) cron
       send candidates to companies
         should send one candidate:

      AssertionError: expected 0 to equal 1
      + expected - actual

      -0
      +1
      
      at Context.<anonymous> (test\services\cron\companyAutomaticEmailOfNewCandidate.spec.js:81:63)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)

  5) cron
       send candidates to companies
         should not send a candidate if they have already been sent:

      AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 500
      + expected - actual

      -500
      +200
      
      at Object.companyProfileData (test\api-v2\users\companies\helpers.js:34:21)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)

  6) cron
       send candidates to companies
         should only sent new approved candidates that are approved after the saved search is updated:

      AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 500
      + expected - actual

      -500
      +200
      
      at Object.companyProfileData (test\api-v2\users\companies\helpers.js:34:21)
      at <anonymous>
      at process._tickCallback (internal/process/next_tick.js:160:7)



----------------------------------------------------|----------|----------|----------|----------|-------------------|
File                                                |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------------------------------------|----------|----------|----------|----------|-------------------|
All files                                           |    66.38 |    48.28 |    58.31 |       69 |                   |
 server                                             |    69.23 |    56.58 |    55.56 |    70.05 |                   |
  cron.js                                           |    56.52 |       50 |       20 |    56.52 |... 25,37,46,47,48 |
  routes-v2.js                                      |    72.37 |    59.62 |    66.67 |       75 |... 37,138,140,141 |
  server.js                                         |    88.37 |       25 |    66.67 |    88.37 |    40,53,54,55,65 |
  settings.js                                       |    54.72 |    55.56 |      100 |    54.72 |... 8,73,75,78,112 |
 server/controller/api-v2/conversations             |       75 |       50 |    66.67 |       75 |                   |
  get.controller.js                                 |       75 |       50 |    66.67 |       75 |... 66,75,79,80,91 |
 server/controller/api-v2/conversations/messages    |       80 |    44.44 |       80 |       80 |                   |
  get.controller.js                                 |    82.14 |       50 |      100 |    82.14 |    30,37,53,56,58 |
  patch.controller.js                               |    76.47 |        0 |    66.67 |    76.47 |       23,24,25,27 |
 server/controller/api-v2/crons                     |    46.43 |        0 |        0 |    46.43 |                   |
  get.controller.js                                 |    46.43 |        0 |        0 |    46.43 |... 53,55,56,58,61 |
 server/controller/api-v2/email_template            |    90.57 |       50 |      100 |    94.12 |                   |
  patch.controller.js                               |    89.66 |       50 |      100 |    92.86 |             54,68 |
  post.controller.js                                |    91.67 |       50 |      100 |    95.65 |                50 |
 server/controller/api-v2/email_template/search     |    92.86 |       50 |      100 |      100 |                   |
  get.controller.js                                 |    92.86 |       50 |      100 |      100 |                21 |
 server/controller/api-v2/health                    |      100 |      100 |      100 |      100 |                   |
  get.controller.js                                 |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/jobs                      |    95.56 |    91.43 |      100 |    98.13 |                   |
  get.controller.js                                 |    95.65 |    83.33 |      100 |    95.45 |                41 |
  patch.controller.js                               |    94.05 |    91.07 |      100 |    98.28 |               144 |
  post.controller.js                                |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/locations                 |     87.1 |       50 |      100 |     87.1 |                   |
  get.controller.js                                 |     87.1 |       50 |      100 |     87.1 |       40,45,55,56 |
 server/controller/api-v2/messages                  |    85.71 |    67.95 |      100 |    89.93 |                   |
  get.controller.js                                 |    94.74 |       50 |      100 |      100 |                25 |
  post.controller.js                                |    84.51 |    68.42 |      100 |    88.55 |... 80,381,409,410 |
 server/controller/api-v2/pages                     |    83.72 |       50 |      100 |    83.72 |                   |
  get.controller.js                                 |    86.67 |    42.86 |      100 |    86.67 |             24,30 |
  post.controller.js                                |    82.14 |    57.14 |      100 |    82.14 |    58,59,60,67,69 |
 server/controller/api-v2/referral                  |    78.85 |       45 |      100 |    83.33 |                   |
  get.controller.js                                 |    81.48 |    42.86 |      100 |     87.5 |          42,43,49 |
  post.controller.js                                |       76 |       50 |      100 |    79.17 |    29,39,40,41,42 |
 server/controller/api-v2/referral/email            |      100 |      100 |      100 |      100 |                   |
  post.controller.js                                |      100 |      100 |      100 |      100 |                   |
 server/controller/api-v2/skills                    |    47.62 |        0 |        0 |    47.62 |                   |
  get.controller.js                                 |    47.62 |        0 |        0 |    47.62 |... 31,32,33,34,38 |
 server/controller/api-v2/statistics                |     68.8 |    56.45 |    61.54 |    68.32 |                   |
  get.controller.js                                 |     68.8 |    56.45 |    61.54 |    68.32 |... 36,237,239,242 |
 server/controller/api-v2/subscribers               |       50 |       25 |      100 |       50 |                   |
  post.controller.js                                |       50 |       25 |      100 |       50 |... 41,42,48,49,50 |
 server/controller/api-v2/users                     |    82.47 |    52.08 |    88.89 |    82.95 |                   |
  filterReturnData.js                               |    93.18 |    59.09 |    85.71 |     92.5 |          52,53,75 |
  patch.controller.js                               |    73.58 |    46.15 |      100 |       75 |... 75,76,77,87,88 |
 server/controller/api-v2/users/auth                |    64.86 |    31.48 |      100 |    66.06 |                   |
  delete.controller.js                              |      100 |      100 |      100 |      100 |                   |
  post.controller.js                                |    53.62 |    28.57 |      100 |    55.22 |... 05,107,112,135 |
  verify_send_email.js                              |    68.18 |    41.67 |      100 |    68.18 |... 14,15,28,29,34 |
 server/controller/api-v2/users/auth/password       |    95.24 |       50 |      100 |    95.24 |                   |
  put.controller.js                                 |    95.24 |       50 |      100 |    95.24 |                40 |
 server/controller/api-v2/users/auth/password/reset |     87.5 |       50 |      100 |     87.5 |                   |
  post.controller.js                                |    85.19 |       50 |      100 |    85.19 |       39,40,41,50 |
  put.controller.js                                 |    90.48 |       50 |      100 |    90.48 |             39,43 |
 server/controller/api-v2/users/candidates          |    61.54 |    46.36 |       80 |    67.91 |                   |
  get.controller.js                                 |       46 |    20.83 |      100 |    48.89 |... 67,68,78,79,82 |
  patch.controller.js                               |    66.33 |    56.25 |    71.43 |    75.84 |... 89,495,528,541 |
  post.controller.js                                |    59.49 |    19.44 |      100 |    63.51 |... 01,117,149,150 |
 server/controller/api-v2/users/candidates/history  |    90.57 |    57.69 |      100 |    93.88 |                   |
  post.controller.js                                |    90.57 |    57.69 |      100 |    93.88 |         59,67,104 |
 server/controller/api-v2/users/candidates/search   |     57.2 |    60.78 |    43.75 |    59.32 |                   |
  post.controller.js                                |    84.52 |    73.08 |      100 |    92.75 |... 40,167,168,186 |
  searchCandidates.js                               |    44.44 |    54.46 |       25 |    45.51 |... 72,373,375,376 |
 server/controller/api-v2/users/companies           |    72.12 |    51.97 |    77.78 |    76.14 |                   |
  get.controller.js                                 |    52.94 |    27.59 |       50 |    57.45 |... 74,78,80,82,84 |
  patch.controller.js                               |       75 |    60.95 |      100 |       80 |... 44,249,250,266 |
  post.controller.js                                |    84.31 |    38.89 |      100 |       86 |... 51,153,163,171 |
 server/controller/api-v2/users/companies/search    |    82.26 |    67.65 |      100 |    83.33 |                   |
  post.controller.js                                |    82.26 |    67.65 |      100 |    83.33 |... 99,106,109,133 |
 server/controller/api-v2/users/companies/status    |    95.24 |       50 |      100 |      100 |                   |
  post.controller.js                                |    95.24 |       50 |      100 |      100 |                33 |
 server/controller/api-v2/users/email               |    91.43 |       50 |      100 |    91.43 |                   |
  patch.controller.js                               |    88.24 |       50 |      100 |    88.24 |             34,38 |
  post.controller.js                                |    94.44 |       50 |      100 |    94.44 |                35 |
 server/controller/api-v2/users/settings            |    92.86 |    84.62 |      100 |       95 |                   |
  patch.controller.js                               |    92.86 |    84.62 |      100 |       95 |             57,58 |
 server/controller/middleware                       |    72.11 |    51.28 |    86.36 |    81.25 |                   |
  asyncMiddleware.js                                |      100 |       75 |      100 |      100 |                 2 |
  auth-v2.js                                        |    64.41 |    47.22 |     87.5 |    82.61 |... 54,55,56,64,73 |
  errorHandler.js                                   |    95.45 |    71.43 |      100 |      100 |       16,17,18,19 |
  multer.js                                         |     69.7 |       70 |    83.33 |    71.88 |... 24,25,26,55,60 |
  requestLogger.js                                  |       25 |        0 |        0 |       30 | 6,7,8,10,17,18,21 |
  sanitizer.js                                      |      100 |       50 |      100 |      100 |           6,10,13 |
 server/controller/services                         |    36.25 |    16.55 |    29.82 |    39.94 |                   |
  amplitude.js                                      |    31.58 |     12.5 |        0 |    31.58 |... 21,22,24,25,28 |
  crypto.js                                         |       90 |       50 |      100 |      100 |                 4 |
  currency.js                                       |      100 |      100 |      100 |      100 |                   |
  errors.js                                         |    84.62 |       50 |    66.67 |    84.62 |             26,34 |
  google.js                                         |    26.32 |        0 |        0 |    26.32 |... 26,27,35,36,38 |
  jwtToken.js                                       |    70.59 |    33.33 |      100 |    70.59 |    24,25,26,27,29 |
  linkedin.js                                       |     18.6 |        0 |        0 |    20.51 |... 91,102,103,104 |
  logger.js                                         |    69.23 |       50 |      100 |    69.23 |        9,18,29,41 |
  objects.js                                        |    43.24 |    16.67 |     37.5 |    43.24 |... 49,54,56,57,61 |
  sanitize.js                                       |      100 |      100 |      100 |      100 |                   |
  serviceSync.js                                    |    19.35 |     4.26 |    18.75 |    23.23 |... 37,338,340,343 |
  time.js                                           |    57.14 |      100 |       25 |    57.14 |             2,6,7 |
 server/controller/services/cron                    |     28.5 |     7.55 |    21.43 |    29.57 |                   |
  companyAutomaticEmailOfNewCandidate.js            |    23.61 |      3.7 |       20 |    24.64 |... 49,150,152,153 |
  newMessagesReminderEmail.js                       |    95.45 |       75 |      100 |    95.45 |                42 |
  serviceQueue.js                                   |    66.67 |      100 |        0 |    66.67 |                 4 |
  synchronizeSendGrid.js                            |    11.69 |        0 |        0 |    12.33 |... 58,160,161,166 |
  unreadChatMessagesReminder.js                     |    31.58 |        0 |        0 |    31.58 |... 31,32,33,34,38 |
 server/controller/services/email                   |    32.43 |       15 |     7.14 |    32.43 |                   |
  emails.js                                         |    85.71 |       50 |      100 |    85.71 |                11 |
  sendGrid.js                                       |    26.87 |     6.25 |        0 |    26.87 |... 60,164,165,167 |
 server/controller/services/email/emails            |    70.87 |       25 |    63.64 |    70.87 |                   |
  candidateHistory.js                               |      100 |      100 |      100 |      100 |                   |
  chatReminder.js                                   |    28.57 |      100 |        0 |    28.57 |       4,7,9,11,25 |
  companyApproved.js                                |      100 |      100 |      100 |      100 |                   |
  companyAutoNotification.js                        |    44.44 |      100 |        0 |    44.44 |      6,9,11,26,29 |
  dtaDocEmail.js                                    |      100 |      100 |      100 |      100 |                   |
  forgotPassword.js                                 |    93.33 |       50 |      100 |    93.33 |                30 |
  newMessagesReminder.js                            |      100 |      100 |      100 |      100 |                   |
  referUser.js                                      |      100 |      100 |      100 |      100 |                   |
  verifyEmail.js                                    |      100 |      100 |      100 |      100 |                   |
  welcomeEmail.js                                   |    33.33 |      100 |        0 |    33.33 |    5,8,9,10,12,26 |
  youReferredACompany.js                            |    18.75 |        0 |        0 |    18.75 |... 37,47,52,58,67 |
 server/controller/services/zoho                    |    25.86 |        0 |     6.67 |       30 |                   |
  zoho.js                                           |    25.86 |        0 |     6.67 |       30 |... 10,111,116,125 |
 server/model                                       |    92.31 |       50 |    91.67 |    94.12 |                   |
  defaultMongoose.js                                |     87.5 |       50 |    91.67 |     91.3 |             50,61 |
  enumerations.js                                   |      100 |      100 |      100 |      100 |                   |
  regexes.js                                        |    83.33 |       50 |      100 |    83.33 |                 4 |
 server/model/mongoose                              |    82.17 |    41.18 |    56.25 |    83.12 |                   |
  cities.js                                         |       90 |      100 |       50 |       90 |                15 |
  companies.js                                      |    83.87 |    66.67 |    57.14 |    83.87 |    16,20,30,31,48 |
  email_templates.js                                |    91.67 |      100 |    66.67 |    91.67 |                14 |
  jobs.js                                           |      100 |      100 |      100 |      100 |                   |
  messages.js                                       |    91.67 |      100 |    66.67 |    91.67 |                19 |
  pages.js                                          |    91.67 |      100 |    66.67 |    91.67 |                19 |
  referrals.js                                      |       90 |      100 |       50 |       90 |                11 |
  skills.js                                         |       80 |      100 |        0 |       80 |             10,15 |
  sync_queue.js                                     |       80 |      100 |        0 |       80 |             10,14 |
  users.js                                          |    68.18 |    35.71 |       75 |    70.73 |... 48,49,50,51,52 |
 server/model/schemas                               |      100 |      100 |      100 |      100 |                   |
  candidates.js                                     |      100 |      100 |      100 |      100 |                   |
  cities.js                                         |      100 |      100 |      100 |      100 |                   |
  companies.js                                      |      100 |      100 |      100 |      100 |                   |
  email_templates.js                                |      100 |      100 |      100 |      100 |                   |
  jobs.js                                           |      100 |      100 |      100 |      100 |                   |
  messages.js                                       |      100 |      100 |      100 |      100 |                   |
  pages.js                                          |      100 |      100 |      100 |      100 |                   |
  referrals.js                                      |      100 |      100 |      100 |      100 |                   |
  skills.js                                         |      100 |      100 |      100 |      100 |                   |
  sync_queue.js                                     |      100 |      100 |      100 |      100 |                   |
  users.js                                          |      100 |      100 |      100 |      100 |                   |
----------------------------------------------------|----------|----------|----------|----------|-------------------|
