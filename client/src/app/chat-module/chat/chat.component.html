<section class="wob-bg-primary2 mt-5">

  <div class="container">
    <div class="row">
      <div class = "col-md-12">
        <div class="row mt-2">
          <div *ngIf="msg ===''" class = "col-md-11 ml-4 float-right mt-5">
            <button type = "button" data-toggle="modal" data-target="#popModal" class = "btn btn-secondary float-right mb-1 text-light">What happens next?</button>
          </div>
        </div>
        <div class = "d-flex my-4">
          <div *ngIf="msg!==''" class = "col-md-12 py-5 my-3">
            <div class="alert alert-danger">
              {{msg}}
            </div>
          </div>
          <div class = "row" *ngIf="users && msg === ''" id = "frame">
            <div class = "col-3 col-sm-4 float-left h-100 position-relative p-0">
              <div class = "p-2 p-sm-3 border-bottom" style= "overflow:hidden;">
                <div class = "wrap" style = "line-height:60px;">
                  <ng-container *ngIf="profile_pic;else company_logo_top">
                    <img id="profile-img" src="{{profile_pic}}" alt="Profile pic" class = "float-left rounded-circle" style = "width:60px;">
                  </ng-container>
                  <ng-template #company_logo_top>
                    <img id="profile-img12" src="/assets/profile/profile-image.png" alt="Profile pic" class = "float-left rounded-circle" style = "width:60px;">
                  </ng-template>
                  <p class = "float-left ml-4 d-none d-md-block text-capitalize">{{display_name}}</p>
                </div>
              </div>
              <div id = "contact" class = "border-right">
                <ul class = "list-group">
                  <li *ngFor="let person of users;let i = index" [ngClass]="(credentials.id == person.user_id)?'list-group-item wob-bg-secondary3':'list-group-item list-group-item-lite position-relative'" (click)="openDialog(person.name,person.user_id,person.name,i)" style= "overflow:hidden;">
                    <div class = "cont m-auto position-relative">
                      <ng-container *ngIf="currentUser.type == 'company';else cand_image">
                        <ng-container *ngIf="person.image;else person_image">
                          <img src="{{person.image}}" alt="Profile pic" class = "float-left rounded-circle mr-2" style = "width:40px;">
                        </ng-container>
                        <ng-template #person_image>
                          <img src="/assets/profile/profile-image.png" alt="Profile pic" class = "float-left rounded-circle mr-2" style = "width:40px;">
                        </ng-template>
                        <div class="meta">
                          <p *ngIf="person.name" class = "text-capitalize float-left ml-2 ml-md-" style = "line-height:35px;"><b>{{ person.name }}</b></p>
                          <span *ngIf="person.unread_count" class = "rounded-circle badge badge-danger position-absolute mt-2" style = "right:0px; font-size: 13px;">
                              <b>{{person.unread_count}}</b>
                            </span>
                        </div>
                      </ng-container>
                      <ng-template #cand_image>
                        <ng-container *ngIf="person.image;else company_image">
                          <img src="{{person.image}}" alt="Profile pic" class = "float-left rounded-circle mr-2" style = "width:40px;">
                        </ng-container>
                        <ng-template #company_image>
                          <img src="/assets/profile/profile-image.png" alt="" class = "float-left rounded-circle mr-2" style = "width:40px;">
                        </ng-template>
                        <div class="meta">
                          <p class = "text-capitalize float-left ml-2 ml-md-" style = "line-height:35px;"><b>{{ person.name }}</b></p>
                          <span *ngIf="person.unread_count" class = "rounded-circle badge badge-danger position-absolute mt-2" style = "right:0px; font-size: 13px;">
                              <b>{{person.unread_count}}</b>
                            </span>
                        </div>
                      </ng-template>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class = "col-9 col-sm-8 pl-0 pr-0">
              <div class = "border-bottom" style = "overflow:hidden;">
                <div class = "p-1 p-md-3 w-sm-100 w-75 float-left">
                  <ul class="cand_info-ul">
                    <ng-container *ngIf="job_desc.employee;">
                      <li>Approach type: Employee</li>
                      <li>Job type: {{job_desc.employee.employment_type}}</li>
                      <li>Job title: {{job_desc.employee.job_title}}</li>
                      <li>Salary: {{job_desc.employee.currency}} {{job_desc.employee.annual_salary.min}} <span *ngIf="job_desc.employee.annual_salary.max">- {{job_desc.employee.annual_salary.max}}</span></li>
                    </ng-container>
                    <ng-container *ngIf="job_desc.contractor;">
                      <li>Approach type: Contractor</li>
                      <li>Hourly rate: {{job_desc.contractor.currency}} {{job_desc.contractor.hourly_rate.min}} <span *ngIf="job_desc.contractor.hourly_rate.max">- {{job_desc.contractor.hourly_rate.max}}</span></li>
                      <br>
                    </ng-container>
                    <ng-container *ngIf="job_desc.volunteer;">
                      <li>Approach type: Volunteer</li>
                      <br>
                    </ng-container>
                  </ul>
                </div>
                <div class = "p-2 w-25 float-left d-none d-md-block">
                  <button data-toggle="modal" data-target="#myModalNew" class="btn btn-warning float-right mb-1 text-light">View approach</button>
                  <a *ngIf="(currentUser.type === 'company')" routerLink="/users/talent/{{credentials.id}}" class="btn btn-warning float-right text-light">View candidate profile</a>
                </div>
              </div>
              <ng-container *ngIf="file_uploaded === 0;else no_section" >
                <div class="col-md-12 text-center" >
                  <img src="/assets/profile/Loading_icon.gif" alt="Loading Gif">
                </div>
              </ng-container>
              <ng-template #no_section>
                <div class="message p-2" #scrollMe [scrollTop]="scrollMe.scrollHeight">
                  <ul class = "ul_pd">
                    <div *ngFor="let msg of new_msgss">
                      <ng-container *ngIf="msg.sender_id === currentUser._id;else second">
                        <li class="sent mb-3 col-md-12">
                          <br><br><br>
                          <p class = "p-2 send_p job-description rounded d-inline-block">
                            <!-- msg.message.approach.employee starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.employee">
                               <span>
                                <b>Employment opportunity</b>
                                 <br/>
                              </span>
                              <span>
                                <b>Job title:</b>
                                {{msg.message.approach.employee.job_title}}
                                <br/>
                              </span>
                              <span>
                                <b>Job type:</b>
                                {{msg.message.approach.employee.employment_type}}
                                <br/>
                              </span>
                              <span>
                                <b>Salary:</b>
                                {{msg.message.approach.employee.currency}} {{msg.message.approach.employee.annual_salary.min}} <span *ngIf="msg.message.approach.employee.annual_salary.max">- {{msg.message.approach.employee.annual_salary.max}}</span>
                                <br/>
                              </span>
                              <span>
                                <b>Location:</b>
                                {{msg.message.approach.employee.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.employee.employment_description | safeHtml">
                                {{msg.message.approach.employee.employment_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.employee ends-->

                            <!-- msg.message.approach.volunteer starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.volunteer">
                              <span>
                                <b>Volunteer opportunity</b>
                                <br/>
                              </span>
                              <span>
                                <b>Location: </b>
                                {{msg.message.approach.volunteer.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.volunteer.opportunity_description | safeHtml">
                                {{msg.message.approach.volunteer.opportunity_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.volunteer ends-->

                            <!-- msg.message.approach.contractor starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.contractor">
                              <span>
                                <b>Contract/freelancer opportunity</b>
                                <br/>
                              </span>
                              <span>
                                <b>Location: </b>
                                {{msg.message.approach.contractor.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Hourly rate: </b>
                                {{msg.message.approach.contractor.currency}} {{msg.message.approach.contractor.hourly_rate.min}} <span *ngIf="msg.message.approach.contractor.hourly_rate.max">- {{msg.message.approach.contractor.hourly_rate.max}}</span>
                                <br/>
                              </span>

                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.contractor.contract_description | safeHtml">
                                {{msg.message.approach.contractor.contract_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.contractor ends-->

                            <!--msg.message.approach_accepted starts-->
                            <ng-container *ngIf="msg.message.approach_accepted">
                              <span [innerHTML]="msg.message.approach_accepted.message | safeHtml">
                                {{msg.message.approach_accepted.message}}
                              </span>
                            </ng-container>
                            <!--msg.message.approach_accepted ends-->
                            <!--msg.message.approach_rejected starts-->
                            <ng-container *ngIf="msg.message.approach_rejected">
                              <span [innerHTML]="msg.message.approach_rejected.message | safeHtml">
                                {{msg.message.approach_rejected.message}}
                              </span>
                            </ng-container>
                            <!--msg.message.approach_rejected ends-->

                            <!--msg.message.interview_offer starts-->
                            <ng-container *ngIf="msg.message.interview_offer">
                              <span>
                                <b>Interview date & time:</b>
                                {{msg.message.interview_offer.date_time | date : 'dd'}} {{msg.message.interview_offer.date_time | date : 'MMM'}} {{msg.message.interview_offer.date_time | date : 'yyyy'}} {{msg.message.interview_offer.date_time | date : 'HH:mm'}}
                                <br/>
                              </span>
                              <span>
                                <b>Interview location:</b>
                                {{msg.message.interview_offer.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.interview_offer.description | safeHtml">
                                  {{msg.message.interview_offer.description}}
                                </span>
                            </ng-container>
                            <!--msg.message.interview_offer ends-->

                            <!--msg.message.employment_offer starts-->
                            <ng-container *ngIf="msg.message.employment_offer">
                              <span>
                                <b>Job title:</b>
                                {{msg.message.employment_offer.title}}
                                <br/>
                              </span>
                              <span>
                                <b>Salary:</b>
                                {{msg.message.employment_offer.salary}} {{msg.message.employment_offer.salary_currency}}
                                <br/>
                              </span>
                              <span>
                                <b>Start date:</b>
                                {{msg.message.employment_offer.start_date | date : 'dd'}} {{msg.message.employment_offer.start_date | date : 'MMM'}} {{msg.message.employment_offer.start_date | date : 'yyyy'}} {{msg.message.employment_offer.start_date | date : 'HH:mm'}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.employment_offer.description | safeHtml">
                                {{msg.message.employment_offer.description}}
                                <br/>
                              </span>
                              <ng-container *ngIf="!msg.message.employment_offer.file_url;else employ_file_url">
                              </ng-container>
                              <ng-template #employ_file_url>
                                <b>Employment contract: </b>
                                <a href="{{msg.message.employment_offer.file_url}}" style="word-wrap: break-word;" target="_blank">{{msg.message.employment_offer.file_url.substr(msg.message.employment_offer.file_url.lastIndexOf('/') + 1)}}</a> <!-- for local you can use 53 instead of 70 -->
                              </ng-template>
                            </ng-container>
                            <!--msg.message.employment_offer ends-->

                            <!--msg.message.employment_offer_accepted starts-->
                            <ng-container *ngIf="msg.message.employment_offer_accepted">
                              <span [innerHTML]="msg.message.employment_offer_accepted.message | safeHtml">
                              {{msg.message.employment_offer_accepted.message}}
                            </span>
                            </ng-container>
                            <!--msg.message.employment_offer_accepted ends-->

                            <!--msg.message.employment_offer_rejected starts-->
                            <ng-container *ngIf="msg.message.employment_offer_rejected">
                              <span [innerHTML]="msg.message.employment_offer_rejected.message | safeHtml">
                              {{msg.message.employment_offer_rejected.message}}
                            </span>
                            </ng-container>
                            <!--msg.message.employment_offer_rejected ends-->

                            <!--file starts-->
                            <ng-container *ngIf="msg.message.file">
                              <span>
                                <a href="{{msg.message.file.url}}" style="word-wrap: break-word;" target="_blank">{{msg.message.file.url.substr(msg.message.file.url.lastIndexOf('/') + 1)}}</a> <!-- for local you can use 53 instead of 70 -->
                              </span>
                            </ng-container>
                            <!--file ends-->

                            <!--normal message starts-->
                            <ng-container *ngIf="msg.message.normal">
                              <span [innerHTML]="msg.message.normal.message | safeHtml">
                                {{msg.message.normal.message}}
                              </span>
                            </ng-container>
                            <!--normal message ends-->
                          </p>
                        </li>
                        <div class="chat_company">
                          {{msg.date_created | date : 'dd'}} {{msg.date_created | date : 'MMM'}} {{msg.date_created | date : 'yyyy'}} {{msg.date_created | date : 'HH:mm'}}

                        </div>
                      </ng-container>
                      <ng-template #second>
                        <li class="replies mb-3 col-md-12">
                          <br><br><br>
                          <div class="arrow-up"></div>
                          <p class = "p-2 rec_p rounded text-light d-inline-block wob-bg-primary1">
                            <!-- msg.message.approach.employee starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.employee">
                              <span>
                                <b>Employment opportunity</b>
                                <br/>
                              </span>
                              <span>
                                <b>Job title:</b>
                                {{msg.message.approach.employee.job_title}}
                                <br/>
                              </span>
                              <span>
                                <b>Job type:</b>
                                {{msg.message.approach.employee.employment_type}}
                                <br/>
                              </span>
                              <span>
                                <b>Salary:</b>
                                {{msg.message.approach.employee.currency}} {{msg.message.approach.employee.annual_salary.min}} <span *ngIf="msg.message.approach.employee.annual_salary.max">- {{msg.message.approach.employee.annual_salary.max}}</span>
                                <br/>
                              </span>
                              <span>
                                <b>Location:</b>
                                {{msg.message.approach.employee.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.employee.employment_description | safeHtml">
                                {{msg.message.approach.employee.employment_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.employee ends-->

                            <!-- msg.message.approach.volunteer starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.volunteer">
                              <span>
                                <b>Volunteer opportunity</b>
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.volunteer.opportunity_description | safeHtml">
                                {{msg.message.approach.volunteer.opportunity_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.volunteer starts-->

                            <!-- msg.message.approach.contractor starts-->
                            <ng-container *ngIf="msg.message.approach && msg.message.approach.contractor">
                              <span>
                                <b>Contractor opportunity</b>
                                <br/>
                              </span>
                              <span>
                                <b>Location: </b>
                                {{msg.message.approach.contractor.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Hourly rate: </b>
                                {{msg.message.approach.contractor.currency}} {{msg.message.approach.contractor.hourly_rate.min}} <span *ngIf="msg.message.approach.contractor.hourly_rate.max">- {{msg.message.approach.contractor.hourly_rate.max}}</span>
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.approach.contractor.contract_description | safeHtml">
                                {{msg.message.approach.contractor.contract_description}}
                                <br/>
                              </span>
                            </ng-container>
                            <!-- msg.message.approach.contractor ends-->

                            <!--msg.message.approach_accepted starts-->
                            <ng-container *ngIf="msg.message.approach_accepted">
                              <span [innerHTML]="msg.message.approach_accepted.message | safeHtml">
                                {{msg.message.approach_accepted.message}}
                              </span>
                            </ng-container>
                            <!--msg.message.approach_accepted ends-->
                            <!--msg.message.approach_rejected starts-->
                            <ng-container *ngIf="msg.message.approach_rejected">
                              <span [innerHTML]="msg.message.approach_rejected.message | safeHtml">
                                {{msg.message.approach_rejected.message}}
                              </span>
                            </ng-container>
                            <!--msg.message.approach_rejected ends-->

                            <!--msg.message.interview_offer starts-->
                            <ng-container *ngIf="msg.message.interview_offer">
                              <span>
                                <b>Interview date & time:</b>
                                {{msg.message.interview_offer.date_time | date : 'dd'}} {{msg.message.interview_offer.date_time | date : 'MMM'}} {{msg.message.interview_offer.date_time | date : 'yyyy'}} {{msg.message.interview_offer.date_time | date : 'HH:mm'}}
                                <br/>
                              </span>
                              <span>
                                <b>Interview location:</b>
                                {{msg.message.interview_offer.location}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.interview_offer.description | safeHtml">
                                  {{msg.message.interview_offer.description}}
                                </span>
                            </ng-container>
                            <!--msg.message.interview_offer ends-->

                            <!--msg.message.employment_offer starts-->
                            <ng-container *ngIf="msg.message.employment_offer">
                              <span>
                                <b>Job title:</b>
                                {{msg.message.employment_offer.title}}
                                <br/>
                              </span>
                              <span>
                                <b>Salary:</b>
                                {{msg.message.employment_offer.salary}} {{msg.message.employment_offer.salary_currency}}
                                <br/>
                              </span>
                              <span>
                                <b>Start date:</b>
                                {{msg.message.employment_offer.start_date | date : 'dd'}} {{msg.message.employment_offer.start_date | date : 'MMM'}} {{msg.message.employment_offer.start_date | date : 'yyyy'}} {{msg.message.employment_offer.start_date | date : 'HH:mm'}}
                                <br/>
                              </span>
                              <span>
                                <b>Description:</b><br>
                              </span>
                              <span [innerHTML]="msg.message.employment_offer.description | safeHtml">
                                {{msg.message.employment_offer.description}}
                                <br/>
                              </span>
                              <ng-container *ngIf="!msg.message.employment_offer.file_url;else employ_file_url">
                              </ng-container>
                              <ng-template #employ_file_url>
                                <b>Employment contract: </b>
                                <a href="{{msg.message.employment_offer.file_url}}" style="word-wrap: break-word;" target="_blank">{{msg.message.employment_offer.file_url.substr(msg.message.employment_offer.file_url.lastIndexOf('/') + 1)}}</a> <!-- for local you can use 53 instead of 70 -->
                              </ng-template>
                            </ng-container>
                            <!--msg.message.employment_offer ends-->

                            <!--msg.message.employment_offer_accepted starts-->
                            <ng-container *ngIf="msg.message.employment_offer_accepted">
                              <span [innerHTML]="msg.message.employment_offer_accepted.message | safeHtml">
                              {{msg.message.employment_offer_accepted.message}}
                            </span>
                            </ng-container>
                            <!--msg.message.employment_offer_accepted ends-->

                            <!--msg.message.employment_offer_rejected starts-->
                            <ng-container *ngIf="msg.message.employment_offer_rejected">
                              <span [innerHTML]="msg.message.employment_offer_rejected.message | safeHtml">
                              {{msg.message.employment_offer_rejected.message}}
                            </span>
                            </ng-container>
                            <!--msg.message.employment_offer_rejected ends-->

                            <!--file starts-->
                            <ng-container *ngIf="msg.message.file">
                              <span>
                                <a href="{{msg.message.file.url}}" style="word-wrap: break-word;" target="_blank">{{msg.message.file.url.substr(msg.message.file.url.lastIndexOf('/') + 1)}}</a> <!-- for local you can use 53 instead of 70 -->
                              </span>
                            </ng-container>
                            <!--file ends-->

                            <!--normal message starts-->
                            <ng-container *ngIf="msg.message.normal">
                              <span [innerHTML]="msg.message.normal.message | safeHtml">
                                {{msg.message.normal.message}}
                              </span>
                            </ng-container>
                            <!--normal message ends-->
                          </p>
                        </li>
                        <div class="chat_user">
                          {{msg.date_created | date : 'dd'}} {{msg.date_created | date : 'MMM'}} {{msg.date_created | date : 'yyyy'}} {{msg.date_created | date : 'HH:mm'}}
                        </div>
                      </ng-template>
                    </div>
                    <div class = "offers_b"></div>
                  </ul>
                </div>
              </ng-template>
              <ng-container *ngIf="cand_offer === 1;else no_offer">
                <ng-container *ngIf="show_accpet_reject == 0;else no_show">
                  <div class="message-input">
                    <div class = "offers">
                      <form (submit)="accept_offer(msgForm)" #msgForm = ngForm style="display:inline;">
                        <input type="hidden" name="email" [(ngModel)]="credentials.email"/>
                        <input type="hidden" name="id" [(ngModel)]="credentials.id"/>
                        <input type="hidden" placeholder="Write your message..." name="msg_body" [(ngModel)]="credentials.msg_body"/>
                        <span class = "offers_btn">
                            <button type="submit" class = "btn btn-warning mb-1 text-light">Accept offer</button>
                          </span>
                      </form>
                      <form (submit)="reject_offer(msgForm)" #msgForm = ngForm style="display:inline;">
                        <input type="hidden" name="email" id="email" [(ngModel)]="credentials.email"/>
                        <input type="hidden" name="id" id="id" [(ngModel)]="credentials.id"/>
                        <input type="hidden" placeholder="Write your message..." name="msg_body" id="comment" [(ngModel)]="credentials.msg_body"/>
                        <span class = "offers_btn">
                            <button type="submit" class = "btn btn-warning mb-1 ml-1 text-light">Reject offer</button>
                          </span>
                      </form>
                    </div>
                  </div>
                </ng-container>
                <ng-template #no_show>
                </ng-template>
              </ng-container>
              <ng-template #no_offer>
              </ng-template>
              <ng-container *ngIf="company_reply == 1;else no_reply">
                <div class="message-input" >
                  <ng-container *ngIf="currentUser.type == 'company';else no_offers">
                    <div class = "offers">
                        <span class = "">
                          <button type="button" data-toggle="modal" data-target="#myModal" (click)="reset_msgs()" class="btn btn-warning mb-1 text-light">Offer to interview</button>
                          <button type="button" data-toggle="modal" data-target="#Modal" (click)="reset_msgs()" class="btn btn-warning mb-1 ml-1 text-light">Offer to employ</button>
                        </span>
                    </div>
                  </ng-container>
                  <ng-template #no_offers>
                  </ng-template>
                  <ng-container *ngIf="cand_job_offer == 1;else no_job_offer">
                    <div class = "offers">
                      <form (submit)="accept_job_offer(msgForm)" #msgForm = ngForm style="display:inline;">
                        <input type="hidden" name="email" id="email" [(ngModel)]="credentials.email"/>
                        <input type="hidden" name="id" id="id" [(ngModel)]="credentials.id"/>
                        <input type="hidden" placeholder="Write your message..." name="msg_body" id="comment" [(ngModel)]="credentials.msg_body"/>
                        <input type="hidden" name="job_offer_id" id="job_offer_id" [(ngModel)]="credentials.job_offer_id"/>
                        <span class = "">
                            <button type="submit" class = "btn btn-warning mb-1 text-light">Accept employment offer</button>
                          </span>
                      </form>
                      <form (submit)="reject_job_offer(msgForm)" #msgForm = ngForm style="display:inline;">
                        <input type="hidden" name="email" id="email" [(ngModel)]="credentials.email"/>
                        <input type="hidden" name="id" id="id" [(ngModel)]="credentials.id"/>
                        <input type="hidden" placeholder="Write your message..." name="msg_body" id="comment" [(ngModel)]="credentials.msg_body"/>
                        <input type="hidden" name="job_offer_id" id="job_offer_id" [(ngModel)]="credentials.job_offer_id"/>
                        <span class = "">
                            <button type="submit" class = "btn btn-warning mb-1 ml-1 text-light">Reject employment offer</button>
                          </span>
                      </form>
                    </div>
                  </ng-container>
                  <ng-template #no_job_offer>
                  </ng-template>
                  <form (submit)="send_message(msgForm)" #msgForm = ngForm>
                    <div class = "wrap bg-light p-2">
                      <div class = "row">
                        <input type="hidden" name="email" id="email" [(ngModel)]="credentials.email"/>
                        <input type="hidden" name="id" id="id" [(ngModel)]="credentials.id"/>
                        <input type="hidden" name="first_message" id="first_message" [(ngModel)]="first_message"/>
                        <div class = "col-8 col-sm-8 col-md-9 col-lg-10">
                          <ckeditor class="ckeditor_tab" [(ngModel)]="credentials.msg_body" #myckeditor name="html_text" [config]="ckeConfig" debounce="500" >
                          </ckeditor>
                        </div>
                        <div class = "col-4 col-sm-4 col-md-3 col-lg-2">
                            <span class = "btn_mobile">
                              <button class = "send btn btn-primary mb-2" type="submit" id = "btnClick">
                                <i class="fas fa-paper-plane text-light mr-2" aria-hidden="true"></i>
                                Send
                              </button>
                              <div class="file btn btn-primary mb-2">
                                <i class="fa fa-upload" aria-hidden="true"></i>
                                Upload
                                <input id="aa" #Image type="file" (change) ="upload_file()" name="file" ng-model='file' class = "file-upload"/>
                              </div>
                            </span>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </ng-container>
              <ng-template #no_reply>
              </ng-template>
              <!--end col here-->
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="file_msg!=''" class = "col-md-12">
      <h4 class="alert alert-danger">
        {{file_msg}}
      </h4>
    </div>
  </div>


</section>
<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-center">Offer to interview</h4>
      </div>
      <div class="modal-body">
        <form (submit)="send_interview_message(msgForm)" #msgForm = ngForm style="overflow: hidden;">
          <ng-container *ngIf="interview_log;else no_modal">
          </ng-container>
          <ng-template #no_modal>
          </ng-template>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Date:</label>
                <div class="input-group mb-3">
                  <input type="text" class="form-control" name="date" [(ngModel)]="credentials.date" is-open="date.opened" required placeholder="01/01/1970" id="startdate_datepicker">
                  <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-calendar" aria-hidden="true"></i></span>
                  </div>
                  <div class = "invalid-feedback d-inline"  *ngIf="date_log">
                    {{date_log}}
                    {{date_log}}
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Time:</label>
                <input type="time" name="time" [(ngModel)]="credentials.time" class="form-control" placeholder="00:00">
                <div class = "invalid-feedback d-inline"  *ngIf="time_log">
                  {{time_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Location:</label>
                <input type="text" name="location" [(ngModel)]="credentials.location" class="form-control" placeholder="London">
                <div class = "invalid-feedback d-inline"  *ngIf="location_log">
                  {{location_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Other details:</label>
                <ckeditor class="ckeditor_tab" [(ngModel)]="credentials.description" #myckeditor name="html_text" [config]="ckeConfigInterview" debounce="500">
                </ckeditor>
                <div class = "invalid-feedback d-inline"  *ngIf="description_log">
                  {{description_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group text-right">
                <button type="submit" class="btn btn-primary model-btn submit">Send</button>
                <div class = "invalid-feedback d-inline-block mt-2 mb-2">
                  {{interview_log}}
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal b-->
<div id="Modal" class="modal fade" role="dialog">
  <div class="modal-dialog" role="document">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-center">Offer to employ</h4>
      </div>
      <div class="modal-body">
        <form (submit)="send_job_message(msgForm)" #msgForm = ngForm>
          <ng-container *ngIf="job_offer_log;else no_modal">
          </ng-container>
          <ng-template #no_modal>
          </ng-template>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Job title:</label>
                <input type="text" class="form-control" name="job_title" [(ngModel)]="credentials.job_title" placeholder="Full stack developer">
                <div class = "invalid-feedback d-inline"  *ngIf="job_title_log">
                  {{job_title_log}}
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Employment type</label>
                <select class="form-control selectpicker" name="employment_type" title="(select one)" [(ngModel)]="credentials.employment_type">
                  <option *ngFor='let type of employment_type_select' [value]="type" [attr.selected]="type === credentials.employment_type? true : null">{{type}}</option>
                </select>
                <div class = "invalid-feedback d-inline"  *ngIf="employment_type_log">
                  {{employment_type_log}}
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Annual salary:</label>
                <input type="text" #expect_salary="ngModel"  pattern="^[0-9]*$" required class="form-control" name="base_salary" [(ngModel)]="credentials.base_salary" placeholder="10000">
                <div class = "invalid-feedback d-inline" *ngIf="expect_salary.errors && credentials.base_salary">
                  Salary should be a number.
                </div>
                <div class = "invalid-feedback d-inline"  *ngIf="salary_log">
                  {{salary_log}}
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="invisible">Currency </label>
                <select class="form-control selectpicker" name="currency" title="Currency" [(ngModel)]="credentials.currency" id="sel1">
                  <option *ngFor='let yearly_salary_curency of salary_currency_select' [value]="yearly_salary_curency" [attr.selected]="yearly_salary_curency === credentials.currency? true : null">{{yearly_salary_curency}}</option>
                </select>
                <div class = "invalid-feedback d-inline"  *ngIf="salary_currency_log">
                  {{salary_currency_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Start date:</label>
                <div class="input-group mb-3">
                  <input type="text" class="form-control" name="date" [(ngModel)]="credentials.start_date" is-open="date.opened" required placeholder="01/01/1970" id="startdate_datepicker_employ">
                  <div class="input-group-append">
                    <span class="input-group-text"><i class="fas fa-calendar" aria-hidden="true"></i></span>
                  </div>
                  <div class = "invalid-feedback d-inline"  *ngIf="start_date_log">
                    {{start_date_log}}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Approach:</label>
                <ckeditor class="ckeditor_tab" [(ngModel)]="credentials.job_description" #myckeditor name="html_text" [config]="ckeConfigInterview" debounce="500" >
                </ckeditor>
                <div class = "invalid-feedback d-inline"  *ngIf="job_desc_log">
                  {{job_desc_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-8">
                  <div class="form-group">
                    <label>Employment contract (optional):</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <span *ngIf="img_name" class="employment-contract">{{img_name}}</span>
                  <!--<span *ngIf="!img_name">Employment contract (optional):</span>-->
                  <input id="my_aa" #Image type="file" (change)="show_file_name()" accept="application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/*" name="image" [(ngModel)]="credentials.employment_contract" class="form-control border-0"/>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div *ngIf="job_offer_log_error" class="mt-3 alert alert-danger">
                {{job_offer_log_error}}
              </div>
              <div *ngIf="job_offer_log_success" class="mt-3 alert alert-danger">
                {{job_offer_log_success}}
              </div>
              <div class="form-group text-right">
                <button type="submit" class="btn btn-primary model-btn submit">Send</button>
                <div class = "invalid-feedback d-inline-block mt-2 mb-2">
                  {{job_offer_log}}
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!--Job desc modal-->
<!-- Modal -->
<div id="myModalNew" class="modal fade" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title text-center">Approach</h4>
      </div>
      <div class="modal-body">
        <ng-container *ngIf="job_desc;else no_job_desc_popup">
          <!--popup for employ starts-->
          <ng-container *ngIf="job_desc.employee;">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Approach type:</label>
                  <p>Employee</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Job title:</label>
                  <p>{{job_desc.employee.job_title}}</p>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Job type:</label>
                  <p>{{job_desc.employee.employment_type}}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Salary:</label>
                  <p>{{job_desc.employee.currency}} {{job_desc.employee.annual_salary.min}} <span *ngIf="job_desc.employee.annual_salary.max">- {{job_desc.employee.annual_salary.max}}</span></p>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Location:</label>
                  <ng-container *ngIf="!job_desc.employee.location;else no_job_loc">
                    <p>N/A</p>
                  </ng-container>
                  <ng-template #no_job_loc>
                    <p>{{job_desc.employee.location}}</p>
                  </ng-template>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Employment description:</label>
                  <ng-container *ngIf="!job_desc.employee.employment_description;else no_job_desc">
                  </ng-container>
                  <ng-template #no_job_desc>
                    <p class="job_decs" [innerHTML]="job_desc.employee.employment_description | safeHtml">
                      {{job_desc.employee.employment_description}}
                    </p>
                  </ng-template>
                </div>
              </div>
            </div>
          </ng-container>
          <!--popup for employ ends-->

          <!--popup for Contractor starts-->
          <ng-container *ngIf="job_desc.contractor;">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Approach type:</label>
                  <p>Contractor</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Location:</label>
                  <p>{{job_desc.contractor.location}} </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Hourly rate:</label>
                  <p>{{job_desc.contractor.currency}} {{job_desc.contractor.hourly_rate.min}} <span *ngIf="job_desc.contractor.hourly_rate.max">- {{job_desc.contractor.hourly_rate.max}}</span></p>
                </div>
              </div>


            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Contract description:</label>
                  <p class="job_decs" [innerHTML]="job_desc.contractor.contract_description | safeHtml">
                    {{job_desc.contractor.contract_description}}
                  </p>
                </div>
              </div>
            </div>
          </ng-container>
          <!--popup for Contractor ends-->

          <!--popup for volunteer starts-->
          <ng-container *ngIf="job_desc.volunteer;">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Approach type:</label>
                  <p>Volunteer</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Location:</label>
                  <p>{{job_desc.volunteer.location}} </p>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Opportunity description:</label>
                  <p class="job_decs" [innerHTML]="job_desc.volunteer.opportunity_description  | safeHtml">
                    {{job_desc.volunteer.opportunity_description}}
                  </p>
                </div>
              </div>
            </div>
          </ng-container>
          <!--popup for volunteer ends-->

        </ng-container>
        <ng-template #no_job_desc_popup>
        </ng-template>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal" class="btn btn-primary model-btn submit">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Modal to display on page load-->
<!-- Modal -->
<!-- end model -->
<div id="popModal" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content costom_model">
      <div class="modal-header bg-primary">
        <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
        <h3 *ngIf="this.currentUser.type === 'company'" class="modal-title text-center mo">
          {{companyMsgTitle}}
        </h3>
        <h3 *ngIf="this.currentUser.type === 'candidate'" class="modal-title text-center mo">
          {{candidateMsgTitle}}
        </h3>
      </div>
      <div class="modal-body mo_body">
        <div [innerHTML]="companyMsgContent | safeHtml" *ngIf="this.currentUser.type === 'company'" class = "mo_content" id = "style-6">
          {{companyMsgContent}}
        </div>
        <div [innerHTML]="candidateMsgContent | safeHtml" *ngIf="this.currentUser.type === 'candidate'" class = "mo_content" id = "style-6">
          {{candidateMsgContent}}
        </div>
      </div>
      <div class="modal-footer mo_footer">
        <button type="reset" (click)="update_status()" class="btn btn-primary model-btn" data-dismiss="modal">Got it</button>
      </div>
    </div>
  </div>
</div>

<!--Profile-inner end-->
