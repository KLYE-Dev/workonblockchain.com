<section class = "my-5" *ngIf="invalidMsg && invalidMsg !== ''">
  <div class="container">
    <div class="row" >
      <div class = "invalid-feedback d-inline w-auto" >
        <span> <i class="fas fa-exclamation-circle"></i></span>
        <span>
          {{invalidMsg}}
      </span>
      </div>
    </div>
  </div>
</section>

<section class = "wob-bg-primary2" *ngIf="!invalidMsg || invalidMsg === ''">

  <div class="container">

    <div class="row">
      <div class="col-md-9 my-5" *ngFor= "let data of cand_data">
        <section class = "border rounded py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-6">
              <img *ngIf="!data.image || data.initials" src = "assets/profile/profile-image.png" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
              <img *ngIf="data.image && data.first_name" src = "{{data.image}}" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
              <div class="mt-3">
                <span *ngIf='data.first_name'><h3>{{data.first_name}} {{data.last_name}}</h3></span>
                <span *ngIf='data.initials'><h3>{{data.initials}}</h3></span>

                <span><p class="text-justify">{{data.description}}</p></span>
              </div>
            </div>
            <div class="col-md-6">
              <ul class="list-group list-group-flush float-right">
                <li class="list-group-item">
                  <span><i class="fas fa-landmark mr-2"></i></span>
                  <span>Nationality : {{data.nationality}}</span>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-suitcase mr-2"></i></span>
                  <span >Expected annual salary : {{data.expected_salary_currency}} {{data.expected_salary}}</span>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-align-justify mr-2"></i></span>
                  <span >Your availability : {{data.availability_day}}</span>
                </li>

              </ul>
            </div>

          </div>

        </section >

        <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf='data.first_name'>
          <div class="row">
            <div class="col-md-12">
              <h2>
                About
              </h2>
            </div>

          </div>

          <div class="row mt-3">
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>Email address: </label>
                <p>
                  {{data._creator.email}}
                <p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>Contact number:</label>
                <p>
                  {{data.contact_number}}
                <p>
              </div>
            </div>
          </div>

          <div class="row mt-3" *ngIf="data.github_account || data.stackexchange_account" >
            <div class="col-md-6 mb-3">
              <div class="form-group" *ngIf="data.github_account">
                <label>Github account url: </label>
                <p>
                  {{data.github_account}}
                <p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group" *ngIf="data.stackexchange_account">
                <label>Stackexchange account url:</label>
                <p>
                  {{data.stackexchange_account}}
                <p>
              </div>
            </div>
          </div>

        </section>



        <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf="data.first_name && data._creator.candidate">
          <div class="row">
            <div class="col-md-12">
              <h2>
                Residence/base location
              </h2>
            </div>
          </div>
          <div class="row mt-3">

            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>Country: </label>
                <p>
                  {{data._creator.candidate.base_country}}
                <p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>City: </label>
                <p>
                  {{data._creator.candidate.base_city}}
                <p>
              </div>
            </div>
          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-12">
              <h2>
                Desired job
              </h2>
            </div>
          </div>

          <div class="row mt-3">

            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>Expected annual salary: </label>
                <p>{{data.expected_salary_currency}} {{data.expected_salary}}</p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>Your availablity: </label>
                <p>{{data.availability_day}}</p>
              </div>
            </div>
          </div>

          <div class="row">

            <div class="col-md-12 mb-3">
              <div class="form-group">
                <label>Desired location: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let country of countries'> {{country.charAt(0).toUpperCase()}}{{country.slice(1)}} </div>
                </div>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <div class="form-group">
                <label>Area of interest: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let interest_area of interest_area;'> {{interest_area}} </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12 mb-3">
              <div class="form-group">
                <label>Roles: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let roles_data of roles'> {{roles_data}} </div>
                </div>
              </div>
            </div>

          </div>

        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-12">
              <h2>
                Blockchain and DLT experience
              </h2>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12 mb-3">
              <div class="form-group">
                <label>Why work on blockchain? </label>
                <p>{{data.why_work}}</p>
              </div>
            </div>

            <div class="col-md-12 mb-3" *ngIf="commercial && commercial.length > 0 ">
              <div class="form-group">
                <label>Platform commercially worked with: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let data of commercial;'> {{data.platform_name}}: {{data.exp_year}} years </div>
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3" *ngIf="platforms && platforms.length > 0">
              <div class="form-group">
                <label>Platforms designed/developed smart contracts: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let data of platforms;'> {{data.platform_name}}: {{data.exp_year}} years </div>
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3" *ngIf="experimented && experimented.length>0">
              <div class="form-group">
                <label>Platform experimented with: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let data of data.experimented_platform;'> {{data.value}}</div>
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3" *ngIf="commercial_skills && commercial_skills.length > 0">
              <div class="form-group">
                <label>Commercial experience in these areas: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let data of commercial_skills;'> {{data.skill}}: {{data.exp_year}} years </div>
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3" *ngIf="formal_skills && formal_skills.length > 0">
              <div class="form-group">
                <label>Formal (university) education in these areas: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let data of formal_skills;'> {{data.skill}}: {{data.exp_year}} years </div>
                </div>
              </div>
            </div>

          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf="languages && languages.length>0">
          <div class="row">
            <div class="col-md-12">
              <h2>
                Experience
              </h2>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-12 mb-3">
              <div class="form-group">
                <label>Languages: </label>
                <div>
                  <div class="d-inline-block p-2 border rounded mr-1 mb-1" *ngFor='let lang of languages;'> {{lang.language}}: {{lang.exp_year}} years </div>
                </div>
              </div>
            </div>

          </div>
        </section>


        <section class = "border rounded mt-4 py-3 px-5 bg-white"  *ngIf="data.work_history!=''">
          <div class="row">
            <div class="col-md-12">
              <h2>
                Work history
              </h2>
            </div>
          </div>

          <div class="row mt-4" *ngFor='let work of history'>
            <div class="col-md-12">
              <h4>{{work.positionname}}</h4>
              <strong>{{work.companyname}}</strong>
            </div>
            <div class="col-md-6">
              <p *ngIf='work.currentwork== true'><i class="fas fa-calendar"></i> {{work.startdate | date:'MMMM-yyyy'}} {{work.startyear}}, till now.</p>
              <p *ngIf='work.currentwork== false '><i class="fas fa-calendar"></i> {{work.startdate | date:'MMMM-yyyy'}} , {{work.enddate | date:'MMMM-yyyy'}} </p>
            </div>
            <div class="col-md-6">
              <i class="fas fa-globe"></i> {{work.locationname}}
            </div>
            <div class="col-md-12">
              <p class="text-justify">
                {{work.description}}
              </p>
            </div>
          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf="data.education_history!=''" >
          <div class="row">
            <div class="col-md-12">
              <h2>
                Work history
              </h2>
            </div>
          </div>

          <div class="row mt-4" *ngFor='let edu of education'>
            <div class="col-md-12">
              <h4>{{edu.uniname}}</h4>
            </div>
            <div class="col-md-6">
              <strong>{{edu.degreename}} - {{edu.fieldname}}</strong>
            </div>
            <div class="col-md-6">
              <i class="fas fa-calendar" aria-hidden="true"></i>
              {{edu.eduyear}}
            </div>
          </div>

        </section>

      </div>
      <div class="col-md-3 my-5">

        <section class = "border rounded py-2 px-3 bg-white">
          <div class="row">
            <div class="col-md-12 mb-2">
              <h5>
                Send job description
              </h5>
            </div>
          </div>
          <form (submit)="send_job_offer(msgForm)" #msgForm = ngForm>
            <div class="form-group">
              <label>Job title</label>
              <input type="text" name="job_title" [(ngModel)]="credentials.job_title" class="form-control" placeholder="Job Title">
              <input type="hidden" name="user_id" [(ngModel)]="credentials.user_id" class="form-control">
              <input type="hidden" name="name" [(ngModel)]="credentials.name" class="form-control">
            </div>
            <div class="form-group">
              <label>Salary</label>

              <input type="text" #expect_salary="ngModel"  pattern="^[0-9]*$" required name="salary" [(ngModel)]="credentials.salary" class="form-control" placeholder="Your salary eg 2000">
              <div class = "invalid-feedback d-inline float-left" *ngIf="expect_salary.errors && credentials.salary">
                Salary should be a number.
              </div>
            </div>

            <div class="form-group">
              <label>Currency</label>

              <select title="Please choose currency" class="selectpicker form-control" name="currency" [(ngModel)]="credentials.currency">
                <option  *ngFor='let base_currency of currency' >{{base_currency}}</option>

              </select>
            </div>
            <div class="form-group">
              <label>Location</label>
              <input type="text" name="location" [(ngModel)]="credentials.location" class="form-control" placeholder="Location eg London">
            </div>
            <div class="form-group">
              <label>Job type</label>
              <div class="form-check" *ngFor="let options of job_type">
                <input type="radio" id="{{options}}" class="form-check-input" name="optradio"  [(ngModel)]="credentials.job_type" [value]="options">
                <label class="form-check-label" for="{{options}}" >{{options}}
                </label>
              </div>
            </div>

            <div class="form-group">
              <label>Job description</label>
              <ckeditor class="ckeditor_tab" [(ngModel)]="credentials.job_desc" #myckeditor name="html_text" [config]="ckeConfig" debounce="500" >
              </ckeditor>
            </div>
            <div class="alert alert-success" role="alert" *ngIf="job_offer_msg">
              {{job_offer_msg}}
            </div>
            <div class = "form-group text-center">
              <button type="submit" [disabled]="expect_salary.errors || !credentials.currency || !credentials.job_desc || !credentials.job_type || !credentials.job_title || !credentials.location" class="btn btn-primary">Submit Job Offer</button>
            </div>
          </form>
        </section>
      </div>
    </div>
  </div>

</section>



