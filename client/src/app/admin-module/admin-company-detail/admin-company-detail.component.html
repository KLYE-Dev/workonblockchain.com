<section class = "wob-bg-primary2 py-5 mt-5">
  <div class="container pt-2">
    <div class="row">
      <div class="col-md-12" *ngFor = "let data of info" >
        <section class = "border rounded py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-6">
              <img *ngIf="!imgPath" src = "assets/profile/profile-image.png" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
              <img *ngIf="imgPath" src = "{{imgPath}}" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
              <div class="mt-3">
                <span><h3>{{data.company_name}}</h3></span>
                <span><pre>{{data.company_description}}</pre></span>
                <span>
				 		      <a [routerLink]="['/admin-display-chat']" [queryParams]="{user: user_id , type : data._creator.type}" >Show Chat With Candidates</a>
				 		    </span>
                <span>
                  <form #approve_form="ngForm" >
                    <input type="hidden" name="email"  [ngModel]="data._creator.email">
                    <input type="hidden" name="name"  [ngModel]="data.first_name">
                    <input type="hidden" name="type"  [ngModel]="data._creator.type">
                    <input type="hidden" name="is_verify" [ngModel]="data._creator.is_verify">
                    <input type="hidden" name="id" [ngModel]="data._creator._id">
                    <input type= "hidden" *ngIf='(data._creator.is_verify ===1 && data._creator.is_approved === 0)' name="is_approve" [ngModel]="1">
                    <input type= "hidden" *ngIf='(data._creator.is_verify ===1 && data._creator.is_approved === 1)' name="is_approve" [ngModel]="0">
								    <div class="my-3">
                      <button type="submit" (click) = "approveClick($event , approve_form)"  class = "btn btn-primary" *ngIf = "(data._creator.is_verify ===1 && data._creator.is_approved === 0)" >Approve</button>
                      <button type="submit" (click) = "approveClick($event , approve_form)" class = "btn btn-primary" *ngIf = "(data._creator.is_verify ===1 && data._creator.is_approved === 1)" >Disapprove</button>
                      <button type="submit" class = "btn btn-primary" *ngIf = "data._creator.is_verify ===0" disabled>Approve</button>
							    	</div>
							    </form>
                </span>
              </div>
            </div>
            <div class="col-md-6">
              <ul class="list-group list-group-flush float-right">
                <li class="list-group-item" *ngIf="referred_name !== ''">
                  <span ><i class="fas fa-user mr-2"></i> </span>
                  <ng-container *ngIf="referred_link ; else noLink">
                  <span >Refered By: <a  [routerLink]="[detail_link]" target="_blank" [queryParams]="{user: referred_link }">{{referred_name}}</a>
					 				</span>
                  </ng-container>
                  <ng-template #noLink>
                    <span>Refered By: {{referred_name}}</span>
                  </ng-template>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-building mr-2"></i></span>
                  <span><a [href]="data.company_website" target="_blank">{{data.company_website}}</a></span>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-map-marker-alt mr-2"></i></span>
                  <span >Country: {{data.company_country}}</span>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-map-marker-alt mr-2"></i></span>
                  <span class = "li_txt">City: {{data.company_city}}</span>
                </li>
                <li class="list-group-item">
                  <span><i class="fas fa-phone mr-2"></i></span>
                  <span class = "li_txt"> Phone: {{data.company_phone}}</span>
                </li>
              </ul>
            </div>
          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-6">
              <h2>
                <i class="fas fa-user"></i>
                Account
              </h2>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6 mb-3">
              <div class="form-group">
                  <label>Account created date: </label>
                  <p>{{data._creator.created_date | date:'dd-MMMM-yyyy'}}</p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">
              <ng-container *ngIf="verify === 1;else no_verify">
                  <label>Email verified: </label>
                  <p>Yes</p>
              </ng-container>
              <ng-template #no_verify>
                  <label>Email verified: </label>
                  <p>No</p>
              </ng-template>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">

              <ng-container *ngIf="is_approved !== '';else no_approve">
                  <label>Approved by admin: </label>
                  <p>Yes</p>
              </ng-container>
              <ng-template #no_approve>
                  <label>Approved by admin: </label>
                  <p>No</p>
              </ng-template>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">

              <ng-container *ngIf="data._creator.disable_account === false;else no_enable">
                  <label>Account enabled: </label>
                  <p>Yes</p>
              </ng-container>
              <ng-template #no_enable>
                  <label>Account enabled: </label>
                  <p>No</p>
              </ng-template>
              </div>
            </div>
            <div class="col-md-6" *ngIf="data._creator.dissable_account_timestamp">
              <div class="form-group">
                 <label>Account enabled/disabled timestamp: </label>
                  <p>{{data._creator.dissable_account_timestamp | date:'short'}}</p>
              </div>
            </div>
          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-6">
              <h2>
                <i class="fas fa-building"></i>
                Company info
              </h2>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>When was the company founded:</label>
                <p>
                  {{data.company_founded}}
                <p>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <label>How is the company funded:</label>
                <p>
                  {{data.company_funded}}
                <p>
              </div>
            </div>

            <div class="col-md-6 ">
              <div class="form-group">
                <label>Number of employees:</label>
                <p>
                  {{data.no_of_employees}}
                <p>
              </div>
            </div>
          </div>
        </section>

        <section class = "border rounded mt-4 py-3 px-5 bg-white">
          <div class="row">
            <div class="col-md-6">
              <h2>
                <i class="fas fa-building"></i>
                Company administration
              </h2>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6 mb-2">
              <div class="form-group">
                <p>
                  {{data.first_name}} {{data.last_name}}
                <p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Title:</label>
                <p>
                  {{data.job_title}}
                <p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Email:</label>
                <p>
                  {{data._creator.email}}
                <p>
              </div>
            </div>
          </div>
        </section>

        <section class = "bg-white border rounded mt-4 py-3 px-5" *ngIf = "data.saved_searches && data.saved_searches.length > 0">
          <div class="row">
            <div class="col-md-6">
              <h2>
                <i class="fas fa-search" aria-hidden="true"></i>
                Saved searches
              </h2>
            </div>
          </div>


          <div class="row mt-3">
            <div class="col-md-12">
              <h4><i class="fas fa-envelope "></i> Notifications</h4>

            </div>
            <div class="col-md-12">
              {{data.when_receive_email_notitfications}}
            </div>
          </div>
          <hr class="bg-dark" />


          <div *ngFor="let searches of data.saved_searches; let i = index ">
            <div class="row">
              <div class="col-md-12">
                <h3 class="pt-2 mb-3"> Job search {{i+1}}: {{searches.name}}</h3>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <h4 class="pt-2 "><i class="fas fa-user" aria-hidden="true"></i> Job requirements</h4>
              </div>
            </div>


            <div class="row mt-3">
              <div class="col-md-12 mb-3" *ngIf="searches.work_type">
                <div class="form-group">
                  <label>Work type:</label>
                 <p>{{searches.work_type}}</p>
                </div>
              </div>
              <div class="col-md-12 mb-3" *ngIf="searches.job_type && searches.job_type.length > 0">
                <div class="form-group">
                  <label>Type:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let type of searches.job_type"> {{type}}</div>
                  </div>
                </div>
              </div>
              <div class="col-md-12 mb-3" *ngIf="searches.position && searches.position.length > 0">
                <div class="form-group">
                  <label>Role:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let position of searches.position"> {{position}}</div>
                  </div>

                </div>
              </div>

              <div class = "col-md-12 mb-3" *ngIf="searches.location  || searches.visa_needed === true " >
                <div class="form-group" *ngIf="searches.location && searches.location.length > 0">
                  <label>Location:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let country of getLocation(searches.location)'>
                      <div *ngIf="country.name === 'Remote'">
                        <i class="fas fa-laptop"></i> {{country.name.charAt(0).toUpperCase()}}{{country.name.slice(1)}}
                      </div>
                      <div *ngIf="country.type === 'city'">
                        <i class="fas fa-city"></i> {{country.name.charAt(0).toUpperCase()}}{{country.name.slice(1)}}
                      </div>

                    </div>
                  </div>
               </div>

                <div class="form-group" *ngIf="searches.visa_needed && searches.visa_needed === true;">
                  <div class="form-group mt-3">
                    <p>Only show candidates that require a work visa</p>

                  </div>

                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf="searches.blockchain && searches.blockchain.length >0">
                <div class="form-group">
                  <label>Commercial blockchain experience:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let blockchain of searches.blockchain">
                      <img class="mb-1 ml-1" src = "/assets/images/all_icons/{{blockchain}}.png" alt="{{blockchain}} Logo">
                      {{blockchain}}
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf = "searches.skills && searches.skills.length > 0">
                <div class="form-group">
                  <label>Skills:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let lang of searches.skills"> {{lang}}</div>
                  </div>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf = "searches.years_exp_min">
                <div class="form-group">
                  <label>Years of experience:</label>
                  <p>{{searches.years_exp_min}}+ years</p>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf = "searches.residence_country && searches.residence_country.length > 0">
                <div class="form-group">
                  <label>Residence country:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let residence of searches.residence_country"> {{residence}}</div>
                  </div>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf="searches.current_currency && searches.current_salary">
                <div class="form-group">
                  <label>Salary:</label>
                  <p>
                    {{searches.current_currency}} {{searches.current_salary}}
                  <p>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf="searches.current_currency && searches.expected_hourly_rate">
                <div class="form-group">
                  <label>Hourly rate:</label>
                  <p>
                    {{searches.current_currency}} {{searches.expected_hourly_rate}}
                  <p>
                </div>
              </div>

              <div class="col-md-12 mb-3" *ngIf="searches.other_technologies">
                <div class="form-group">
                  <label>Other requirements:</label>
                  <p>
                    {{searches.other_technologies}}
                  </p>
                </div>
              </div>

            </div>

            <div class="row" *ngIf="searches.order_preferences && searches.order_preferences.length > 0">
              <div class="col-md-12">
                <h4 class="pt-2 "><i class="fas fa-align-justify"></i> Job preferences</h4>
              </div>
              <div class="col-md-12 mt-3">
                <div class="form-group">
                  <label>Commercial blockchain experience:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor= "let pref of searches.order_preferences"> {{pref}}</div>
                  </div>
                </div>
              </div>
            </div>
            <hr *ngIf="i < (data.saved_searches.length - 1)" class="bg-dark"/>

          </div>


        </section>

      </div>
    </div>
  </div>
</section>
