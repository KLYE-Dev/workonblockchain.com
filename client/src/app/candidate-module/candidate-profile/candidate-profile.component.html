<!-- uncomment for use -->
<!--<div class="my-container">
	<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
</div>-->
<!--Profile-inner-->
<ng-container *ngIf="infoo==='';else profile_section" >
<div class=""></div>
</ng-container>

<ng-template #profile_section >
  <section class = "wob-bg-primary2 py-5 mt-5">
     <div class="alert alert-info" role="alert" *ngIf="message">{{message}}</div>

    <div class="container pt-2">
      <div class="row">
        <div class="col-md-12">
          <button type = "button" data-toggle="modal" data-target="#popModal" class = "btn btn-secondary float-right text-white">What happens next?</button>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <!--use fieldset instaed of div to diplay image within border-->
          <section class="border rounded py-3 px-5 bg-white mt-3" *ngIf="!public_data">
            <div class="row">
              <div class="col-md-6">
                <img *ngIf="!imgPath" src = "assets/profile/profile-image.png" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
                <img *ngIf="imgPath" src = "{{imgPath}}" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
                <div class="mt-3">
                  <span>
                    <h2 class="text-capitalize">{{first_name}} {{last_name}}</h2>
                  </span>
                  <span>
                    <pre>{{description}}</pre>
                  </span>
                </div>
              </div>
              <div class="col-md-5 mt-3">
                <ul class="list-group list-group-flush float-right">
                  <li class="list-group-item">
                    <span><i class="fas fa-landmark mr-2"></i></span>
                    <span>Nationality: {{nationality}}</span>
                  </li>
                  <li class="list-group-item">
                    <span><i class="fas fa-phone mr-2"></i></span>
                    <span> Phone: {{contact_number}}</span>
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-user mr-2"></i>
                    Candidate status: <span class = "text-capitalize">{{candidate_status.status}}</span>
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-clock mr-2"></i>
                    <span>Date created: {{date_created | date : 'dd'}} {{date_created | date : 'MMMM'}} {{date_created | date : 'yyyy'}}</span>
                  </li>
                </ul>
              </div>
              <div class="col-md-1">
                <a class="float-right" (click)="internalRoute('edit_profile','about_you')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 py-3 px-5 bg-white">
            <div class="row">
              <div class="col-md-6">
                <h2> <i class="fas fa-user"></i> About</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','about_you')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>
            <div class="row mt-4">
              <div class = "col-md-6">
                <div class="form-group">
                  <label> Email address:</label>
                  <p>
                    {{email}}
                  <p>
                </div>
              </div>
              <div class = "col-md-6" *ngIf="github">
                <div class="form-group">
                  <label> Github account URL:</label>
                  <p>
                    {{github}}
                  <p>
                </div>
              </div>
            </div>
            <div class="row mt-4" *ngIf="stack">
              <div class = "col-md-6">
                <div class="form-group">
                  <label> Stackexchange account URL:</label>
                  <p>
                    {{stack}}
                  <p>
                </div>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 py-3 px-5 bg-white">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fas fa-map-marker-alt"></i> Residence/base location</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','residence')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>
            <div class="row mt-4"  *ngIf="base_country">
              <div class = "col-md-6">
                <div class="form-group">
                  <label> Country:</label>
                  <p>
                    {{base_country}}
                  <p>
                </div>
              </div>
              <div class = "col-md-6">
                <div class="form-group">
                  <label> City:</label>
                  <p>
                    {{base_city}}
                  <p>
                </div>
              </div>
            </div>
          </section>


          <section class = "border rounded mt-4 py-3 px-5 bg-white">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fas fa-briefcase"></i> Desired job</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','job_candidate')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>

            <div class="row mt-4">
              <div class = "col-md-12" *ngIf="countries">
                <div class="form-group">
                  <label> Desired location:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let country of countries'>
                      {{country.charAt(0).toUpperCase()}}{{country.slice(1)}}
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row mt-4">
              <div class = "col-md-12">
                <div class="form-group ">
                  <label> Area of interest:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let interest_area of interest_area;'>
                      {{interest_area}}
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row mt-4">
              <div class = "col-md-12">
                <div class="form-group">
                  <label> Desired roles:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let roles_data of roles'>
                      {{roles_data}}
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row mt-4">
              <div class = "col-md-12" *ngIf="expected_salary">
                <div class="form-group">
                  <label> Expected annual salary:</label>
                  <p class="mr-2">
                    {{expected_currency}} {{expected_salary}}
                  <p>
                </div>
              </div>
            </div>

            <div class="row mt-4" *ngIf="current_salary">
              <div class = "col-md-12" >
                <div class="form-group">
                  <label class="mb-0"> Current annual salary:</label>
                  <small id="emailHelp" class="form-text text-muted mt-0 mb-2">This information is never shown to companies. It is used by us to help us help you set your expected salary.</small>
                  <p class="mr-2">
                    {{current_currency}} {{current_salary}}
                  <p>
                </div>
              </div>
            </div>

            <div class="row mt-4">
              <div class = "col-md-12" *ngIf="availability_day">
                <div class="form-group">
                  <label> Your availablity:</label>
                  <p class="mr-2">
                    {{availability_day}}
                  <p>
                </div>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 py-3 px-5 bg-white">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fab fa-bitcoin"></i> Blockchain experience</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','resume_candidate')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>

            <div class = "row mt-4" *ngIf="why_work">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Why do you want to work on blockchain?</label>
                  <p>
                    {{why_work}}
                  </p>
                </div>
              </div>
            </div>

            <div class="row" *ngIf = "commercial && commercial.length > 0">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Platforms commercially worked with and developed on:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let data of commercial;'>
                      <img class="mb-1 ml-1" src = "/assets/images/all_icons/{{data.name}}.png" alt="{{data.name}} Logo">
                      {{data.name}}: {{data.exp_year}} years
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row" *ngIf = "platforms && platforms.length > 0">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Platforms commercially designed and developed smart contracts on:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let data of platforms;'>

                      <img class="mb-1 ml-1" src = "/assets/images/all_icons/{{data.name}}.png" alt="{{data.name}} Logo">
                      {{data.name}}: {{data.exp_year}} years
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row">
              <div class="col-md-12" *ngIf = "experimented && experimented.length > 0 ">
                <div class="form-group">
                  <label>Platform experimented with:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let data of experimented;'>
                      <img class="mb-1 ml-1" src = "/assets/images/all_icons/{{data}}.png" alt="{{data}} Logo">
                      {{data}}
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="row" *ngIf = "commercial_skills && commercial_skills.length > 0">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Commercial experience in these areas:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let data of commercial_skills;'>{{data.skill}}: {{data.exp_year}} years</div>

                  </div>
                </div>
              </div>
            </div>

            <div class="row" *ngIf = "formal_skills && formal_skills.length > 0">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Formal (university) education in these areas:</label>
                  <div>
                    <div class="d-inline-block p-2 border rounded mr-1 mt-1" *ngFor='let data of formal_skills;'>{{data.skill}}: {{data.exp_year}} years</div>

                  </div>
                </div>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf="languages && languages.length>0">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fas fa-briefcase"></i> Experience</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','experience_candidate')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>
            <div class="row mt-4">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Languages: </label>
                  <div>
                  <div class="d-inline-block p-2 border rounded ml-1 mb-1 mt-1" *ngFor='let lang of languages;'>{{lang.language}}: {{lang.exp_year}} years</div>
                  </div>
                  </div>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 py-3 px-5 bg-white" *ngIf="history && history.length>0 ">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fas fa-wrench"></i> Work history</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','work_candidate')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>

            <div *ngFor='let work of history'>
              <div class="row mt-4">
                <div class="col-md-12">
                  <h4>{{work.positionname}}</h4>
                  <strong>{{work.companyname}}</strong>
                </div>
                <div class="col-md-6">
                  <p *ngIf='work.currentwork== true'><i class="fas fa-calendar"></i> {{work.startdate | date:'MMMM-yyyy'}} {{work.startyear}} <i class="fas fa-long-arrow-alt-right"></i> now.</p>
                  <p *ngIf='work.currentwork== false '><i class="fas fa-calendar"></i> {{work.startdate | date:'MMMM-yyyy'}} <i class="fas fa-long-arrow-alt-right"></i> {{work.enddate | date:'MMMM-yyyy'}} </p>
                </div>
                <div class="col-md-6">
                  <i class="fas fa-globe"></i> {{work.locationname}}
                </div>
                <div class="col-md-12">
                  <pre>{{work.description}}</pre>
                </div>
              </div>
            </div>
          </section>

          <section class = "border rounded mt-4 mb-5 py-3 px-5 bg-white" *ngIf="education && education.length>0 ">
            <div class="row">
              <div class="col-md-6">
                <h2><i class="fas fa-university"></i> Education</h2>
              </div>
              <div class="col-md-6">
                <a class="float-right" (click)="internalRoute('edit_profile','education_candidate')">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </a>
              </div>
            </div>

            <div class="row mt-4" *ngFor='let edu of education'>
              <div class="col-md-12">
                <h4>{{edu.uniname}}</h4>
              </div>
              <div class="col-md-6">
                <strong>{{edu.degreename}} - {{edu.fieldname}}</strong>
              </div>
              <div class="col-md-6">
                <i class="fas fa-calendar" aria-hidden="true"></i>
                {{edu.eduyear}}
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div id="popModal" class="modal fade" role="dialog">
    <div class="modal-dialog" role="document">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header bg-primary">
          <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
          <h2 class="modal-title text-center">
            {{candidateMsgTitle}}
          </h2>
        </div>
        <div class="modal-body">
            <div [innerHTML]="candidateMsgBody | safeHtml " *ngIf="candidateMsgBody"></div>
        </div>
        <div class="modal-footer">
          <button type="reset" class="btn btn-primary" data-dismiss="modal">Got it</button>
        </div>
      </div>
    </div>
  </div>
  <!-- end model -->
</ng-template>

<!-- Modal-b -->
<div id="popModal_b" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <h4 class="modal-title text-center">Update your profile<br></h4>
        <legend class="w-auto m-0">
          <img *ngIf="!imgPath" src = "assets/profile/profile-image.png" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
          <img *ngIf="imgPath" src = "{{imgPath}}" style="width: 120px;height: 120px;" class = "img-responsive border rounded-circle" alt = "profile-img"/>
        </legend>
      </div>
      <h4 class = "text-center">{{first_name}} {{last_name}}</h4>
      <div class="modal-body">
        <div class = "">
            <strong>
              Where do you currently live, or where are you most frequently based?
            </strong>
            <form class="needs-validation" novalidate (submit)="about()" #aboutForm = ngForm novalidate>
              <div class="form-group">
                <label>Country</label>
                <select class="form-control" required name="country" [(ngModel)]="information.country"  required="">
                  <option value="-1" disabled selected hidden >Please choose country</option>
                  <option *ngFor='let options of base_countries'  [value]="options" selected>{{options}}</option>
                </select>
                <div class = "invalid-feedback" *ngIf="information.country === -1">
                  {{country_log}}
                </div>
              </div>
              <div class="form-group">
                <label>City</label>
                <input type="text" class="form-control" placeholder="" name="city" #city required [(ngModel)]="information.city" >
                <div class = "invalid-feedback" *ngIf="!information.city">
                  {{city_log}}
                </div>
              </div>
              <div class="form-group">
                <button type="submit" class = "form-control btn btn-primary">Update your profile</button>
              </div>
            </form>
        </div>
      </div>
    </div>
  </div>
</div>
