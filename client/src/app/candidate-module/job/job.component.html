<section class="wob-bg-primary2 pb-5 pt-3 mt-5">
  <div class="container">
    <div class="row mb-2">
      <div class="col-md-12">
        <ul class="nav justify-content-center wizard">
          <li class="nav-item">
            <a routerLink="/terms-and-condition" class="nav-link">
              <i class="{{term_active_class}}"></i>
              Terms & Conditions
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/prefill-profile" class="nav-link">
              <i class="{{term_active_class}}"></i>
              Prefill Profile
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/about" class="nav-link">
              <i class="{{about_active_class}}"></i>
              About
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/job" class="nav-link">
              <i class="{{active_class}}"></i>
              Jobs
            </a>
          </li>
          <li class="nav-item px-2">
            <a routerLink="{{resume_class}}" class="nav-link btn {{resume_disable}}">
              <i class="{{resume_active_class}}"></i>
              Blockchain
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="{{exp_class}}" class="nav-link btn {{exp_disable}}">
              <i class="{{exp_active_class}}"></i>
              Experience
            </a>
          </li>
        </ul>
      </div>
    </div>
    <form #f="ngForm" (ngSubmit)="onSubmit(f)">
      <div class="row p-4 border bg-white">
        <div class="col-md-12">
          <legend><i class="fas fa-briefcase mr-1"></i>Tell us more about your dream job</legend>
          <div class="form-group mt-4">
            <label>Where would you like to work? (select up to 10)</label>

            <div>

              <datalist id="countryList" *ngIf ="cities && cities.length > 0">
                <select class="form-control">

                <option *ngFor = "let country of cities" [attr.data-value]="country._id" value="{{country.name}}" text = "{{countriesModel}}" >{{country.name}}
                  </option>
                </select>
              </datalist>

              <input type="text" list="countryList" placeholder="Remote, Canada, London..." autocomplete="off" class="form-control w-50" [(ngModel)]="countriesModel" name="country" (input)="suggestedOptions()" (change)="selectedValueFunction($event)">
              <div class="invalid-feedback d-inline" *ngIf="error;else emptyInput">
                {{error}}
              </div>
              <div class="invalid-feedback d-inline" #emptyInput *ngIf="selectedValueArray.length <= 0">
                {{country_input_log}}
              </div>

              <div *ngIf="selectedValueArray.length > 0">
                <div class="row">
                  <div  *ngFor="let value of selectedValueArray; let i = index" class="col-md-6 p-2 mt-2">
                    <div class="border px-1 py-3 ml-2 row">
                      <div class = "col-8">
                        <label >{{value.name}}</label>
                      </div>
                      <div class = "col-4 text-right">
                        <a (click)="deleteLocationRow(i)" class = "btn btn-secondary px-2 pb-1 text-white rounded p-0 font-weight-bold">x</a>
                      </div>
                      <div class="col-12">
                        <div class="form-check" *ngIf="value.name !== 'Remote'">
                          <label class="form-check-label" for="check{{i}}">
                            <input class="form-check-input" placeholder="Remote, Canada, London..." type="checkbox" id="check{{i}}" value="{{value.name}}" [checked]="value.visa_needed"   name="visa_needed{{i}}" (change)="updateCitiesOptions($event)" > Work visa required
                          </label>
                        </div>

                      </div>
                    </div>

                  </div>
                </div>
                <input type="text" class="form-control d-none" [(ngModel)]='selectedLocations' name="selectedlocations">
                <div class = "invalid-feedback d-inline"  *ngIf="!selectedLocations || checkValidation(selectedLocations)">
                  {{country_log}}
                </div>
              </div>

            </div>
            <!--<div class="checkbox">
              <div class="row m-0">
                <div class="form-check col-md-3 mb-3" *ngFor="let option of options">
                  <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" value="{{option.value}}"  [checked]="option.checked"   (change)="updateCheckedOptions($event)" />
                    {{option.name}}
                  </label>
                </div>
              </div>
            </div>
            <input type="text" class="form-control" [(ngModel)]='selectedcountry' name="country" style="display: none;">
            <div class = "invalid-feedback d-inline"  *ngIf="selectedcountry.length<=0">
              {{country_log}}
            </div>-->
          </div>


          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>What role are you looking for?</label>
                <div class="checkbox">
                  <div class="row m-0">
                    <div class="form-check col-md-3 mb-3" *ngFor="let position_option of dropdown_options">
                      <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" [checked]="position_option.checked" value="{{position_option.value}}" (change)="onJobSelected($event)" required="" />
                        {{position_option.name}}
                      </label>
                    </div>
                  </div>
                </div>
                <input type="text" class="form-control" [(ngModel)]='jobselected' name="roles" style="display: none;">
                <div class = "invalid-feedback d-inline"  *ngIf="jobselected.length<=0">
                  {{roles_log}}
                </div>
              </div>
            </div>
          </div>


          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Expected annual salary</label>
                <input type="text" #expect_salary="ngModel" pattern="^[0-9]*$" class="form-control" required name="expected_salary" placeholder=" 10000" [(ngModel)]="salary">
                <div class = "invalid-feedback d-inline"  *ngIf="!salary; else expected_validation">
                  {{salary_log}}
                </div>
                <div class = "invalid-feedback d-inline"  #expected_validation  *ngIf="expect_salary.errors && salary">
                  Yearly expected base salary should be a number.
                </div>
              </div>

            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="invisible">Expected annual salary currency</label>
                <select [(ngModel)]="base_currency" class="selectpicker" title="Currency" id="currency1" required name="base_currency" >
                  <option *ngFor='let baseCurrency of currency' [attr.selected]="baseCurrency === base_currency ? true : null" [value]="baseCurrency">{{baseCurrency}}</option>
                </select>
                <div class = "invalid-feedback d-inline"  *ngIf="!base_currency">
                  {{currency_log}}
                </div>
              </div>

            </div>
          </div>
          <div class = "row mb-3">
            <div class="col-md-6">
              <div class="form-group">
                <label>Current annual salary (optional)</label>
                <input type="text" class="form-control" #base_validation="ngModel" pattern="^[0-9]*$" placeholder="10000" #salary_field name="current_salary" [(ngModel)]="current_salary">
                <small id="emailHelp" class="form-text text-muted">
                  This information is never shown to companies. It is used by us to help us help you set your expected salary.
                </small>
                <div class = "invalid-feedback d-inline" expected_validation *ngIf="(!current_salary && current_currency) ">
                  {{current_sal_log}}
                </div>
                <div class = "invalid-feedback d-inline"  #expected_validation  *ngIf="base_validation.errors && current_salary">
                  Current annual salary should be a number.
                </div>
              </div>

            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="invisible">Current annual salary currency</label>

                <select [(ngModel)]="current_currency" title="Currency" class="selectpicker" id="currency"  required name="current_currency" >
                  <option value="-1" >Currency</option>
                  <option *ngFor='let currentCurrency of currency' #choose_currency [attr.selected]="current_currency === currentCurrency ? true : null"[value]="currentCurrency">{{currentCurrency}}</option>
                </select>
                <div class = "invalid-feedback d-inline" *ngIf="current_currency_log ">
                  {{current_currency_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Which area are you interested in?</label>
                <div class="checkbox">
                  <div class="row m-0">
                    <div class="form-check col-md-4 mb-3" *ngFor="let position_option of area_interested">
                      <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" [checked]="position_option.checked" value="{{position_option.value}}" (change)="onAreaSelected($event)" required="" />
                        {{position_option.name}}
                      </label>
                    </div>
                  </div>
                </div>
                <input type="text" class="form-control" [(ngModel)]='selectedValue' name="interest_areas" style="display: none;">
                <div class = "invalid-feedback d-inline"  *ngIf="selectedValue.length <=0">
                  {{interest_log}}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Employment availability</label>

                <select title="(select one)" [(ngModel)]="availability_day" class="selectpicker" id="month" required name="availability_day" >
                  <option class='option' *ngFor='let month of availability' [attr.selected]  [value]="month.value" selected>{{month.name}}</option>
                </select>
                <div class = "invalid-feedback d-inline"  *ngIf="!availability_day">
                  {{avail_log}}
                </div>
              </div>
            </div>
          </div>

          <div class = "form-group text-right">
            <a routerLink="/about" class = "btn btn-warning text-white">Back</a>
            <button type=submit class = "btn btn-primary ml-1" [disabled]="(expect_salary.errors && salary) || (base_validation.errors && current_salary)">Next</button>
          </div>
          <div class = "invalid-feedback d-inline text-right float-right"  *ngIf="error_msg">
            {{error_msg}}
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
